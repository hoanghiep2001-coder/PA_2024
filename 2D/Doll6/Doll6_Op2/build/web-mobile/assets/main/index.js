window.__require=function e(t,o,i){function l(r,c){if(!o[r]){if(!t[r]){var s=r.split("/");if(s=s[s.length-1],!t[s]){var a="function"==typeof __require&&__require;if(!c&&a)return a(s,!0);if(n)return n(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var h=o[r]={exports:{}};t[r][0].call(h.exports,function(e){return l(t[r][1][e]||e)},h,h.exports,e,t,o,i)}return o[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<i.length;r++)l(i[r]);return l}({AudioManager:[function(e,t,o){"use strict";cc._RF.push(t,"4c7cf9rDSJL36cJtz1lUze/","AudioManager");var i,l=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var l,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(r=(n<3?l(r):n>3?l(t,o,r):l(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Data/constants"),c=cc._decorator,s=c.ccclass,a=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgSound=null,t.clickSound=null,t.woaSound=null,t.woaSound2=null,t.SwapSound=null,t.GemSound=null,t.rainbowSound=null,t}return l(t,e),t.prototype.playSound=function(e){if(r.Constants.ironSource.SoundState)switch(e){case"bgSound":this.bgSound.play();break;case"clickSound":this.clickSound.play();break;case"woaSound":this.woaSound.play();break;case"woaSound2":this.woaSound2.play();break;case"SwapSound":this.SwapSound.play();break;case"GemSound":this.GemSound.play();break;case"rainbowSound":this.rainbowSound.play()}},t.prototype.stopSound=function(e){switch(e){case"bgSound":this.bgSound.stop();break;case"clickSound":this.clickSound.stop();break;case"woaSound":this.woaSound.stop();break;case"woaSound2":this.woaSound2.stop();break;case"SwapSound":this.SwapSound.stop();break;case"GemSound":this.GemSound.stop();break;case"rainbowSound":this.rainbowSound.stop()}},t.prototype.stopAllSoundExceptBgSound=function(){this.clickSound.stop(),this.woaSound.stop(),this.SwapSound.stop(),this.GemSound.stop(),this.rainbowSound.stop(),this.woaSound2.stop()},t.prototype.stopAllSound=function(){this.bgSound.stop(),this.clickSound.stop(),this.woaSound.stop(),this.SwapSound.stop(),this.GemSound.stop(),this.rainbowSound.stop(),this.woaSound2.stop()},n([a(cc.AudioSource)],t.prototype,"bgSound",void 0),n([a(cc.AudioSource)],t.prototype,"clickSound",void 0),n([a(cc.AudioSource)],t.prototype,"woaSound",void 0),n([a(cc.AudioSource)],t.prototype,"woaSound2",void 0),n([a(cc.AudioSource)],t.prototype,"SwapSound",void 0),n([a(cc.AudioSource)],t.prototype,"GemSound",void 0),n([a(cc.AudioSource)],t.prototype,"rainbowSound",void 0),n([s],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../Data/constants":"constants"}],CellEnums:[function(e,t){"use strict";var o,i;cc._RF.push(t,"fd2f4r+EbtJnamSH2HbcfIE","CellEnums"),function(e){e[e.normal=0]="normal",e[e.franzy=1]="franzy"}(o||(o={})),function(e){e[e.gray=0]="gray",e[e.white=1]="white"}(i||(i={})),cc._RF.pop()},{}],Cell:[function(e,t,o){"use strict";cc._RF.push(t,"93f68rzHqxJY5it62LGw3mz","Cell");var i,l=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var l,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(r=(n<3?l(r):n>3?l(t,o,r):l(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.Cell=void 0;var r=e("../Data/constants"),c=cc._decorator,s=c.ccclass,a=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.generator=!1,t.blink=null,t.irow=0,t.jcolumn=0,t.TypeColor=0,t.typeCell=0,t._circle=null,t.wasSelectCircle=!1,t.wasClick=!1,t.countClick=0,t}return l(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.wasClickSet,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.moveCircle,this)},t.prototype.wasClickSet=function(){r.Constants.isCanTouch&&null!=this._circle&&(this.wasClick=!0,this.selectCircle())},t.prototype.start=function(){},t.prototype.moveCircle=function(){cc.log("circle is move")},t.prototype.setGrayColor=function(){this.node.color=new cc.Color(71,135,153)},t.prototype.setWhiteColor=function(){this.node.color=new cc.Color(0,0,0)},t.prototype.setColorInType=function(){1==this.typeCell&&this.setWhiteColor()},t.prototype.selectCircle=function(){null!=this._circle&&(this.countClick++,this.countClick%2==0?(this.wasSelectCircle=!1,this.wasClick=!1,this.setNormalSize(),this.node.dispatchEvent(new cc.Event.EventCustom("wasTwoClickOnCell",!0))):(this.wasSelectCircle=!0,this.node.dispatchEvent(new cc.Event.EventCustom("wasClickOnCell",!0)),this._circle.setContentSize(this.node.getContentSize())))},t.prototype.setNormalSize=function(){if(null!=this._circle){var e=cc.size(this.node.getContentSize());this._circle.setContentSize(e.height-15,e.width-15)}},t.prototype.mousedown=function(){this.wasClick=!0,this.destroyCircle()},t.prototype.destroyCircle=function(){null!=this._circle&&(this._circle.destroy(),this._circle=null,this.node.dispatchEvent(new cc.Event.EventCustom("clickOnCellForDestroyCircle",!0)))},t.prototype.circleIsNotNull=function(){return null!=this._circle},t.prototype.CellIsNotNull=function(){return null!=this},n([a],t.prototype,"generator",void 0),n([a(cc.Node)],t.prototype,"blink",void 0),n([s],t)}(cc.Component);o.Cell=h,cc._RF.pop()},{"../Data/constants":"constants"}],CircleEnums:[function(e,t,o){"use strict";cc._RF.push(t,"3b838rchfZDZ7EUO6w1VHtd","CircleEnums"),Object.defineProperty(o,"__esModule",{value:!0}),o.tipeCircle=o.typeColorCircle=void 0,function(e){e[e.blue=0]="blue",e[e.green=1]="green",e[e.orange=2]="orange",e[e.reed=3]="reed",e[e.violet=4]="violet",e[e.yellow=5]="yellow"}(o.typeColorCircle||(o.typeColorCircle={})),function(e){e[e.normal=0]="normal",e[e.lightningHorizont=1]="lightningHorizont",e[e.lightningVertical=2]="lightningVertical",e[e.rainbowBall=3]="rainbowBall"}(o.tipeCircle||(o.tipeCircle={})),cc._RF.pop()},{}],Circle:[function(e,t,o){"use strict";cc._RF.push(t,"7dbc7eE2d1AgKeAG34Dn73t","Circle");var i,l=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var l,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(r=(n<3?l(r):n>3?l(t,o,r):l(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.Circle=void 0;var r=cc._decorator,c=r.ccclass,s=r.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=[],t.circlesTipe=[],t.Blink=null,t.CircleType=0,t.inMove=!1,t}return l(t,e),t.prototype.onLoad=function(){this.setRandomColor()},t.prototype.setRandomColor=function(){var e=this.node.getComponent(cc.Sprite);this.randomNumber=Math.floor(Math.random()*Math.floor(this.sprite.length)),e.spriteFrame=this.sprite[this.randomNumber],this.setColorTipe(this.randomNumber)},t.prototype.setTipe=function(e){this.CircleType=e,e>0&&(4==e?(this.setTipeTMP(1),this.setTipeTMP(2)):this.setTipeTMP(e-1))},t.prototype.setTipeTMP=function(e){var t=cc.instantiate(this.circlesTipe[e]);t.setParent(this.node),t.setContentSize(this.node.getContentSize()),t.setPosition(0,0)},t.prototype.setColorTipe=function(e){var t=this.node.getComponent(cc.Sprite);this.CircleTypeColor=e,t.spriteFrame=this.sprite[e]},n([s(cc.SpriteFrame)],t.prototype,"sprite",void 0),n([s(cc.Prefab)],t.prototype,"circlesTipe",void 0),n([s],t.prototype,"CircleTypeColor",void 0),n([s(cc.Node)],t.prototype,"Blink",void 0),n([c],t)}(cc.Component);o.Circle=a,cc._RF.pop()},{}],ClassHelpers:[function(e,t,o){"use strict";cc._RF.push(t,"713b5j6l2pMO79Lgw9EqBJF","ClassHelpers"),Object.defineProperty(o,"__esModule",{value:!0}),o.CheckerBoolean=void 0;var i=function(){function e(){}return e.checkTwoBoolean=function(e,t){return e&&t},e.checkTrheeBoolean=function(e,t,o){return e&&t&&o},e.EqualsTwoObj=function(e,t){return e===t},e.EqualsTrheeObj=function(e,t,o){return e===t&&t===o},e}();o.CheckerBoolean=i,cc._RF.pop()},{}],GameField:[function(e,t,o){"use strict";cc._RF.push(t,"bfa611mBN1Ato8bmVTiNiGw","GameField");var i,l=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var l,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(r=(n<3?l(r):n>3?l(t,o,r):l(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.GameField=void 0;var r=e("./Circle"),c=e("./Cell"),s=e("./ClassHelpers"),a=e("./CircleEnums"),h=e("./CircleEnums"),p=e("../Data/constants"),C=e("../Plugin/AudioManager"),u=e("./GamesController"),d=cc._decorator,y=d.ccclass,f=d.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Circle=null,t.Cell=null,t.AudioManager=null,t.GameController=null,t.Hint=null,t.needRandomVoidCell=!0,t.ChangeForCreateAnActiveCell=25,t.iter=.1,t.StartCellPosX=-150,t.StartCellPosY=250,t.lenghtCell=62,t.widthCell=62,t.countCircle=0,t.countProgressStep=0,t.previousCountCircle=0,t.busterClick=!1,t.Cells=[[,,,,,,,],[,,,,,,,],[,,,,,,,],[,,,,,,,],[,,,,,,,],[,,,,,,,],[,,,,,,,],[,,,,,,,]],t.currentI_cell_click=0,t.currentJ_cell_click=0,t.timeForCheckFild=0,t.oneCheckField=!0,t.cellExist=!1,t.tmpCountCircle=0,t.horizont=!1,t.vertical=!1,t.goDestroyThreeInArow=!1,t.destroyExisted=!1,t.animationStart=!0,t}return l(t,e),t.prototype.onLoad=function(){this.node.on("wasClickOnCell",this.workWithClickedCell,this),this.node.on("wasTwoClickOnCell",this.workWithTwoClickedCell,this),this.timeForCheckFild=this.Cells.length*this.iter+.1},t.prototype.start=function(){this.createCells(),this.CreateCircles()},t.prototype.onEnable=function(){this.createCells(),this.CreateCircles(),this.destroyTipeColors=new Array(Object.keys(h.typeColorCircle).length);for(var e=0;e<this.destroyTipeColors.length;e++)this.destroyTipeColors[e]=0},t.prototype.onDisable=function(){this.DestroyCircles()},t.prototype.workWithClickedCell=function(){p.Constants.countScore>=10&&this.GameController.installHandle(),this.currentCell=this.getClickCell(),this.Hint.active=!1,p.Constants.isClickFirstTime=!0,this.currentCell===this.prewCell&&(this.prewCell=null),null!=this.currentCell&&(this.buster()||(this.setSelectPrewCell(),null!=this.prewCell&&(this.tmpPrewCell=this.prewCell,this.checkNeighboringCell()),this.prewCell=this.currentCell))},t.prototype.workWithTwoClickedCell=function(){cc.log("clear cells")},t.prototype.checkNeighboringCell=function(){this.prewCell._circle.getComponent(r.Circle).CircleTypeColor!==this.currentCell._circle.getComponent(r.Circle).CircleTypeColor&&this.prewCell!==this.currentCell&&null!=this.prewCell._circle&&null!=this.currentI_cell_click&&(this.prewCell.irow+1==this.currentCell.irow&&this.prewCell.jcolumn==this.currentCell.jcolumn||this.prewCell.irow-1==this.currentCell.irow&&this.prewCell.jcolumn==this.currentCell.jcolumn||this.prewCell.irow==this.currentCell.irow&&this.prewCell.jcolumn+1==this.currentCell.jcolumn||this.prewCell.irow==this.currentCell.irow&&this.prewCell.jcolumn-1==this.currentCell.jcolumn)&&(this.node.dispatchEvent(new cc.Event.EventCustom("setBlockTouch",!0)),p.Constants.isCanTouch=!1,this.swapCircles(this.prewCell,this.currentCell),this.needCheckFieldAfterSwapCircle())},t.prototype.needCheckFieldAfterSwapCircle=function(){var e=this;this.scheduleOnce(function(){e.node.dispatchEvent(new cc.Event.EventCustom("needCheckField",!0)),e.setCellNoClick(e.prewCell),e.setCellNoClick(e.currentCell),e.oneCheckField=!0},this.iter+this.iter+this.iter),this.scheduleOnce(function(){e.destroyExisted?(cc.log("countProgressStep"),e.node.dispatchEvent(new cc.Event.EventCustom("setUnBlockTouch",!0)),e.node.dispatchEvent(new cc.Event.EventCustom("countProgressStep",!0)),e.prewCell=null,e.currentCell=null,e.tmpPrewCell=null):(cc.log("comeBackCircle"),e.node.dispatchEvent(new cc.Event.EventCustom("setUnBlockTouch",!0)),e.swapCircles(e.currentCell,e.tmpPrewCell),e.setCellNoClick(e.tmpPrewCell),e.setCellNoClick(e.currentCell),e.prewCell=null,e.currentCell=null,e.tmpPrewCell=null)},this.timeForCheckFild)},t.prototype.swapCircles=function(e,t){cc.log("swapCirle"),this.animateMoveCircle(e,t),this.animateMoveCircle(t,e);var o=t._circle;t._circle=e._circle,e._circle=o,this.setCellNoClick(e),this.setCellNoClick(t)},t.prototype.setCellNoClick=function(e){e.countClick=0,e.wasSelectCircle=!1,e.wasClick=!1,e.setNormalSize()},t.prototype.animateMoveCircle=function(e,t){var o=this;null!=e&&null!=t&&(p.Constants.isCanTouch=!1,console.log("checking "+e._circle),cc.tween(e._circle).parallel(cc.tween().to(this.iter,{scale:1}),cc.tween().to(this.iter,{position:t.node.position})).call(function(){o.scheduleOnce(function(){p.Constants.isCanTouch=!0},1),cc.log("finish move")}).start())},t.prototype.setBuster=function(){this.busterClick=!0},t.prototype.buster=function(){return!(!this.busterClick||null==this.currentCell||(this.startTypeDestroer(this.currentCell),this.animateDestroyCircle(this.currentCell),this.setCellNoClick(this.currentCell),this.busterClick=!1,this.eventDestoyArow(),this.currentCell=null,this.node.dispatchEvent(new cc.Event.EventCustom("countProgressStep",!0)),0))},t.prototype.setSelectPrewCell=function(){null!=this.prewCell&&this.prewCell!==this.currentCell&&this.prewCell.wasSelectCircle&&this.prewCell.selectCircle()},t.prototype.setSelectCurrentCell=function(){null!=this.currentCell&&this.currentCell.wasSelectCircle&&this.currentCell.selectCircle()},t.prototype.getClickCell=function(){this.AudioManager.playSound(p.Constants.SoundTrack.clickSound);for(var e=0;e<this.Cells.length;e++)for(var t=0;t<this.Cells[e].length;t++)if(this.Cells[e][t].wasClick)return this.Cells[e][t].wasClick=!1,this.Cells[e][t];return null},t.prototype.clickDestroyCircleInCell=function(){this.countCircle--,this.node.dispatchEvent(new cc.Event.EventCustom("setPoint",!0)),this.allCirclesMove()},t.prototype.createOneLineCircles=function(){for(var e=0;e<this.Cells[0].length;e++)this.createCircle(this.Cells[0][e]);this.allCirclesMove(),this.oneCheckField&&(this.oneCheckField=!1,this.needCheckField())},t.prototype.needCheckField=function(){this.scheduleOnce(function(){this.node.dispatchEvent(new cc.Event.EventCustom("needCheckField",!0)),this.oneCheckField=!0},this.timeForCheckFild)},t.prototype.checkLine=function(){this.destroyExisted=!1,this.InArow(),this.node.dispatchEvent(new cc.Event.EventCustom("setUnBlockTouch",!0))},t.prototype.createCells=function(){for(var e,t=0,o=0,i=0;i<this.Cells.length;i++){for(var l=0;l<this.Cells[i].length;l++)(e=cc.instantiate(this.Cell)).setContentSize(this.lenghtCell,this.widthCell),e.setParent(this.node),e.setPosition(this.StartCellPosX+t,this.StartCellPosY+o),this.Cells[i][l]=e.getComponent(c.Cell),l%2!=0&&i%2==0&&this.Cells[i][l].setGrayColor(),l%2==0&&i%2!=0&&this.Cells[i][l].setGrayColor(),this.Cells[i][l].jcolumn=i,this.Cells[i][l].irow=l,t+=this.lenghtCell;t=0,o-=this.widthCell}},t.prototype.createAnyTypeCell=function(e,t){1==Math.floor(Math.random()*this.ChangeForCreateAnActiveCell+1)&&(e.typeCell=t,e.setColorInType())},t.prototype.setTypeCellsOnIandJ=function(e,t,o,i,l){for(var n=t;n<i;n++)for(var r=e;r<o;r++)this.Cells[n][r].typeCell=l,this.Cells[n][r].setColorInType()},t.prototype.CreateCircles=function(){for(var e=0;e<this.Cells.length;e++)for(var t=0;t<this.Cells[e].length;t++)0==this.Cells[e][t].typeCell&&this.createCircle(this.Cells[e][t]);this.node.dispatchEvent(new cc.Event.EventCustom("needCheckField",!0))},t.prototype.DestroyCircles=function(){for(var e=0;e<this.Cells.length;e++)for(var t=0;t<this.Cells[e].length;t++)this.Cells[e][t].circleIsNotNull()&&(this.Cells[e][t]._circle.destroy(),this.Cells[e][t]._circle=null)},t.prototype.createCircle=function(e){e.circleIsNotNull()||0!=e.typeCell||(e._circle=cc.instantiate(this.Circle),e._circle.setParent(this.node),e._circle.setPosition(e.node.position),e._circle.setContentSize(this.lenghtCell-15,this.widthCell-15),this.countCircle++)},t.prototype.allCirclesMove=function(){for(var e=0;e<this.Cells.length;e++)for(var t=0;t<this.Cells[e].length;t++)this.Cells[e][t].CellIsNotNull()&&(this.Cells[e][t].circleIsNotNull()||0!=this.Cells[e][t].typeCell||(0==e&&this.scheduleOnce(function(){this.node.dispatchEvent(new cc.Event.EventCustom("moveCircleEnd",!0))},this.iter),e>=1&&this.swapCircleInCell(t,e,t,e-1),this.cellExist||(e>=1&&t<this.Cells[e].length-1&&(1==Math.floor(Math.random()*Math.floor(2))?(this.swapCircleInCell(t,e,t-1,e-1),this.cellExist||this.swapCircleInCell(t,e,t+1,e-1)):this.swapCircleInCell(t,e,t+1,e-1),this.cellExist||this.swapCircleInCell(t,e,t-1,e-1)),0==t&&e>=1&&this.swapCircleInCell(t,e,t+1,e-1),t==this.Cells[e].length-1&&e>=1&&this.swapCircleInCell(t,e,t-1,e-1))))},t.prototype.swapCircleInCell=function(e,t,o,i){if(this.validateCircleMove(e,t,o,i))return this.Cells[t][e]._circle=this.Cells[i][o]._circle,this.Cells[i][o]._circle=null,this.moveCircle(this.Cells[t][e]._circle,this.Cells[t][e].node.position),void(this.cellExist=!0);this.cellExist=!1},t.prototype.validateCircleMove=function(e,t,o,i){return!!(s.CheckerBoolean.checkTwoBoolean(this.Cells[t][e].CellIsNotNull(),null!=this.Cells[i][o])&&s.CheckerBoolean.checkTwoBoolean(0==this.Cells[t][e].typeCell,0==this.Cells[i][o].typeCell)&&s.CheckerBoolean.checkTwoBoolean(null==this.Cells[t][e]._circle,null!=this.Cells[i][o]._circle))},t.prototype.moveCircle=function(e,t){var o=this,i=e.getComponent(r.Circle);i.inMove=!0,cc.tween(e).parallel(cc.tween().to(this.iter,{scale:1}),cc.tween().to(this.iter,{position:t})).call(function(){o.node.dispatchEvent(new cc.Event.EventCustom("moveCircleEnd",!0)),i.inMove=!1}).start()},t.prototype.fieldOnFilledWithCircles=function(){for(var e=0,t=0;t<this.Cells[0].length;t++)for(var o=0;o<this.Cells[t].length;o++)s.CheckerBoolean.checkTwoBoolean(0==this.Cells[t][o].typeCell,this.Cells[t][o].circleIsNotNull())&&this.Cells[t][o]._circle.getComponent(r.Circle).inMove&&e++;return cc.log(0),cc.log(e),!1},t.prototype.InArow=function(){for(var e=0;e<this.Cells.length;e++)for(var t=0;t<this.Cells[e].length;t++)this.goDestroyThreeInArow=!0,e>=2&&(this.vertical=!1,this.horizont=!0,this.InArowTmp(t,e,t,e-1,t,e-2)),t<this.Cells[e].length-2&&(this.horizont=!1,this.vertical=!0,this.InArowTmp(t,e,t+1,e,t+2,e))},t.prototype.InArowTmp=function(e,t,o,i,l,n){if(null!=this.Cells[t][e]&&null!=this.Cells[i][o]&&null!=this.Cells[n][l]){var c=s.CheckerBoolean.checkTwoBoolean(0==this.Cells[t][e].typeCell,0==this.Cells[i][o].typeCell),a=s.CheckerBoolean.checkTwoBoolean(c,0==this.Cells[n][l].typeCell);if(!a)return;if(c=s.CheckerBoolean.checkTwoBoolean(this.Cells[t][e].circleIsNotNull(),this.Cells[i][o].circleIsNotNull()),!(a=s.CheckerBoolean.checkTwoBoolean(c,this.Cells[n][l].circleIsNotNull())))return;if(!s.CheckerBoolean.EqualsTrheeObj(this.Cells[t][e]._circle.getComponent(r.Circle).CircleTypeColor,this.Cells[i][o]._circle.getComponent(r.Circle).CircleTypeColor,this.Cells[n][l]._circle.getComponent(r.Circle).CircleTypeColor))return;this.vertical&&(e<this.Cells[t].length-4&&(this.AudioManager.playSound(p.Constants.SoundTrack.rainbowSound),this.createRainbowBall(e,t,o,i,l,n,n,l+1,n,l+2,3)),e<this.Cells[t].length-3&&this.goDestroyThreeInArow&&(this.AudioManager.playSound(p.Constants.SoundTrack.GemSound),this.AudioManager.playSound(p.Constants.SoundTrack.woaSound),this.createLightning(e,t,o,i,l,n,n,l+1,2))),this.horizont&&(t>=4&&(this.AudioManager.playSound(p.Constants.SoundTrack.rainbowSound),this.createRainbowBall(e,t,o,i,l,n,n-1,l,n-2,l,3)),t>=3&&this.goDestroyThreeInArow&&(this.AudioManager.playSound(p.Constants.SoundTrack.GemSound),this.createLightning(e,t,o,i,l,n,n-1,l,1))),this.goDestroyThreeInArow&&(this.AudioManager.playSound(p.Constants.SoundTrack.GemSound),this.check3Circle(this.Cells[t][e],this.Cells[i][o],this.Cells[n][l]),this.eventDestoyArow())}},t.prototype.createRainbowBall=function(e,t,o,i,l,n,c,a,h,C,u){if(null!=this.Cells[c][a]&&null!=this.Cells[h][C]){var d=s.CheckerBoolean.checkTwoBoolean(0==this.Cells[c][a].typeCell,this.Cells[c][a].circleIsNotNull()),y=s.CheckerBoolean.checkTwoBoolean(0==this.Cells[h][C].typeCell,this.Cells[h][C].circleIsNotNull());s.CheckerBoolean.checkTwoBoolean(d,y)&&s.CheckerBoolean.EqualsTrheeObj(this.Cells[n][l]._circle.getComponent(r.Circle).CircleTypeColor,this.Cells[c][a]._circle.getComponent(r.Circle).CircleTypeColor,this.Cells[h][C]._circle.getComponent(r.Circle).CircleTypeColor)&&(cc.log("RainbowCreate"),this.AudioManager.playSound(p.Constants.SoundTrack.woaSound2),this.Cells[t][e]._circle.getComponent(r.Circle).setTipe(u),cc.log(this.Cells[t][e]._circle.getComponent(r.Circle).CircleType),this.check3Circle(this.Cells[i][o],this.Cells[n][l],this.Cells[c][a]),this.startCheckCircleForDestroy(this.Cells[h][C]),this.goDestroyThreeInArow=!1,this.eventDestoyArow())}},t.prototype.createLightning=function(e,t,o,i,l,n,c,a,h){if(null!=this.Cells[c][a]&&s.CheckerBoolean.checkTwoBoolean(0==this.Cells[c][a].typeCell,this.Cells[c][a].circleIsNotNull())&&s.CheckerBoolean.EqualsTwoObj(this.Cells[n][l]._circle.getComponent(r.Circle).CircleTypeColor,this.Cells[c][a]._circle.getComponent(r.Circle).CircleTypeColor)){console.log("create lightning");var p=this.Cells[t][e]._circle.getComponent(r.Circle);this.Cells[c][a].getComponent(cc.Sprite).enabled=!1,this.Cells[c][a].node.opacity=0,this.Cells[c][a]._circle.getComponent(r.Circle).getComponent(cc.Sprite).enabled=!1,this.Cells[c][a]._circle.opacity=0,p.setTipe(h),this.check3Circle(this.Cells[i][o],this.Cells[n][l],this.Cells[c][a]),this.goDestroyThreeInArow=!1,this.eventDestoyArow()}},t.prototype.destroyRainbowBall=function(e,t){for(var o=0;o<this.Cells.length;o++)for(var i=0;i<this.Cells[o].length;i++){if(!this.Cells[o][i].circleIsNotNull())return;var l=this.Cells[o][i]._circle.getComponent(r.Circle);e!=this.Cells[o][i]&&t.CircleTypeColor===l.CircleTypeColor&&(t.CircleType===l.CircleType?this.animateDestroyCircle(this.Cells[o][i]):this.startCheckCircleForDestroy(this.Cells[o][i]))}},t.prototype.destroyLightningVertical=function(e,t){console.log("boom lightning vertical");for(var o=e.jcolumn,i=0;i<this.Cells[o].length;i++){if(e!=this.Cells[o][i]||this.Cells[o][i].CellIsNotNull())return;if(!this.Cells[o][i].circleIsNotNull())return;var l=this.Cells[o][i]._circle.getComponent(r.Circle);t.CircleType===l.CircleType?this.animateDestroyCircle(this.Cells[o][i]):this.startCheckCircleForDestroy(this.Cells[o][i])}},t.prototype.destroyLightningHorizont=function(e,t){console.log("boom lightning horizont");for(var o=e.irow,i=(t.getComponent(r.Circle),0);i<this.Cells.length;i++){if(e!=this.Cells[i][o]||null!=this.Cells[i][o])return;if(this.Cells[i][o].circleIsNotNull())var l=this.Cells[i][o]._circle.getComponent(r.Circle);if(null==l)return;t.CircleType===l.CircleType?this.animateDestroyCircle(this.Cells[i][o]):this.startCheckCircleForDestroy(this.Cells[i][o])}},t.prototype.destroylightningVerticalAndlightningHorizont=function(e,t){this.destroyLightningVertical(e,t),this.destroyLightningHorizont(e,t)},t.prototype.check3Circle=function(e,t,o){this.startCheckCircleForDestroy(e),this.startCheckCircleForDestroy(t),this.startCheckCircleForDestroy(o)},t.prototype.startCheckCircleForDestroy=function(e){this.startTypeDestroer(e),this.animateDestroyCircle(e)},t.prototype.startTypeDestroer=function(e){if(e.circleIsNotNull()){var t=e._circle.getComponent(r.Circle);switch(t.CircleType){case a.tipeCircle.rainbowBall:this.destroyRainbowBall(e,t);break;case a.tipeCircle.lightningVertical:this.destroyLightningVertical(e,t);break;case a.tipeCircle.lightningHorizont:this.destroyLightningHorizont(e,t);break;case a.tipeCircle.normal:this.animateDestroyCircle(e)}}},t.prototype.destroyEveryCircles=function(){for(var e=0;e<this.Cells.length;e++)for(var t=0;t<this.Cells[e].length;t++)this.animateDestroyCircle(this.Cells[e][t]);this.scheduleOnce(function(){this.node.dispatchEvent(new cc.Event.EventCustom("destroyCircles",!0))},this.iter+.1),this.scheduleOnce(function(){this.node.dispatchEvent(new cc.Event.EventCustom("needCheckField",!0))},4*(this.iter+.2))},t.prototype.eventDestoyArow=function(){this.scheduleOnce(function(){this.node.dispatchEvent(new cc.Event.EventCustom("setBlockTouch",!0)),this.node.dispatchEvent(new cc.Event.EventCustom("destroyCircles",!0)),this.destroyExisted=!0},this.iter+this.iter)},t.prototype.animateDestroyCircle=function(e){var t=this;null!=e&&(e.blink.getComponent(cc.Animation).play("Blink_Anim"),p.Constants.isClickFirstTime&&(p.Constants.countScore+=1),cc.tween(e._circle).parallel(cc.tween().to(this.iter,{scale:0}),cc.tween().to(this.iter,{})).call(function(){null!=e._circle&&(t.countCircle--,t.getTypeDestroyCircle(e._circle.getComponent(r.Circle)),t.node.dispatchEvent(new cc.Event.EventCustom("setPoint",!0)),e._circle.destroy(),e._circle=null)}).start())},t.prototype.getTypeDestroyCircle=function(e){this.destroyTipeColors[e.CircleTypeColor]++,this.node.dispatchEvent(new cc.Event.EventCustom("setDestroyCirclesType_",!0))},n([f(cc.Prefab)],t.prototype,"Circle",void 0),n([f(cc.Prefab)],t.prototype,"Cell",void 0),n([f(C.default)],t.prototype,"AudioManager",void 0),n([f(u.GameController)],t.prototype,"GameController",void 0),n([f(cc.Node)],t.prototype,"Hint",void 0),n([f],t.prototype,"needRandomVoidCell",void 0),n([f],t.prototype,"ChangeForCreateAnActiveCell",void 0),n([f],t.prototype,"iter",void 0),n([f],t.prototype,"StartCellPosX",void 0),n([f],t.prototype,"StartCellPosY",void 0),n([f],t.prototype,"lenghtCell",void 0),n([f],t.prototype,"widthCell",void 0),n([y],t)}(cc.Component);o.GameField=v,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager","./Cell":"Cell","./Circle":"Circle","./CircleEnums":"CircleEnums","./ClassHelpers":"ClassHelpers","./GamesController":"GamesController"}],GamesController:[function(e,t,o){"use strict";cc._RF.push(t,"e906eWDGftIDL9q6NIO0kDr","GamesController");var i,l=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var l,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(r=(n<3?l(r):n>3?l(t,o,r):l(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.GameController=void 0;var r=e("../Data/constants"),c=e("../Plugin/AudioManager"),s=e("./GameField"),a=cc._decorator,h=a.ccclass,p=a.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.countTypeAndMove=12,t.allpoints=0,t.taskpoints=0,t.movepoints=0,t.testGame=!0,t.gameField=null,t.blockField=null,t.AudioManager=null,t}return l(t,e),t.prototype.onLoad=function(){this.node.on("moveCircleEnd",this.gameField.createOneLineCircles,this.gameField),this.node.on("moveCircleEnd",function(e){e.stopPropagation()}),this.node.on("clickOnCellForDestroyCircle",this.gameField.clickDestroyCircleInCell,this.gameField),this.node.on("clickOnCellForDestroyCircle",function(e){e.stopPropagation()}),this.node.on("destroyCircles",this.gameField.allCirclesMove,this.gameField),this.node.on("destroyCircles",function(e){e.stopPropagation()}),this.node.on("needCheckField",this.gameField.checkLine,this.gameField),this.node.on("needCheckField",function(e){e.stopPropagation()}),this.node.on("setPoint",this.setPoint,this),this.node.on("setPoint",function(e){e.stopPropagation()}),this.node.on("getDestroyCirclesType",this.gameField.getTypeDestroyCircle,this.gameField),this.node.on("getDestroyCirclesType",function(e){e.stopPropagation()}),this.node.on("setDestroyCirclesType_",this.setTypeDestroyCircle,this),this.node.on("setDestroyCirclesType_",function(e){e.stopPropagation()}),this.node.on("countProgressStep",this.countProgressStep,this),this.node.on("countProgressStep",function(e){e.stopPropagation()}),this.node.on("countProgressDestrCirles",this.countProgressStep,this),this.node.on("countProgressDestrCirles",function(e){e.stopPropagation()})},t.prototype.setPoint=function(){this.allpoints+=1},t.prototype.countProgressStep=function(){this.movepoints--,cc.log(this.movepoints)},t.prototype.progressTargetDestoyCircle=function(){},t.prototype.gameOverNodeDeActivate=function(){},t.prototype.gameWonNodeDeActivate=function(){},t.prototype.CheckGameOverIfColorChallengeIsComplete=function(){},t.prototype.RestartGame=function(){this.gameField.node.active=!1,this.gameField.node.active=!0,this.allpoints=1,this.movepoints=this.countTypeAndMove},t.prototype.setTypeDestroyCircle=function(){this.progressTargetDestoyCircle()},t.prototype.start=function(){window.gameReady&&window.gameReady()},t.prototype.installHandle=function(){if(console.log("install"),r.Constants.ironSource.isEndGame=!0,this.AudioManager.stopAllSound(),window.gameEnd&&window.gameEnd(),"undefined"==typeof playableSDK)if("undefined"==typeof ExitApi){if("undefined"==typeof dapi)return"undefined"!=typeof mraid?(cc.sys.os==cc.sys.OS_ANDROID||(cc.sys.os,cc.sys.ANDROID),void mraid.open("https://play.google.com/store/apps/details?id=com.an.fashiongame.dolldressup")):void(window.install&&window.install());dapi.openStoreUrl()}else ExitApi.exit();else window.playableSDK.openAppStore()},n([p],t.prototype,"countTypeAndMove",void 0),n([p],t.prototype,"testGame",void 0),n([p(s.GameField)],t.prototype,"gameField",void 0),n([p(cc.Node)],t.prototype,"blockField",void 0),n([p(c.default)],t.prototype,"AudioManager",void 0),n([h],t)}(cc.Component);o.GameController=C,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager","./GameField":"GameField"}],Responsive:[function(e,t,o){"use strict";cc._RF.push(t,"d3abaWwEQhAi5Yf4wF9VZxN","Responsive");var i,l=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var l,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(r=(n<3?l(r):n>3?l(t,o,r):l(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.UI_player=null,t.device="",t.isRotate=!1,t.HORIZONTAL_IPX="horizontal_IPX",t.HORIZONTAL_TABLET="horizontal_Tablet",t.VERTICAL_IPX="vertical_IPX",t.VERTICAL_MOBILE="vertical_Mobile",t}return l(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.handleRotate=function(){cc.view.getFrameSize().width>cc.view.getFrameSize().height?(this.isRotate=!0,this.setHorizontal()):(this.isRotate=!1,this.setVertical())},t.prototype.setHorizontal=function(){cc.view.getFrameSize().height/cc.view.getFrameSize().width<.65?this.setHorizontalForIpX():this.setHorizontalForTablet()},t.prototype.setHorizontalForIpX=function(){this.HORIZONTAL_IPX!==this.device&&(this.device=this.HORIZONTAL_IPX,this.UI_player.getComponent(cc.Widget).top=0)},t.prototype.setHorizontalForTablet=function(){this.HORIZONTAL_TABLET!==this.device&&(this.device=this.HORIZONTAL_TABLET,this.UI_player.getComponent(cc.Widget).top=0)},t.prototype.setVertical=function(){cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5?this.setIphoneX():this.setMobile()},t.prototype.setIphoneX=function(){this.VERTICAL_IPX!==this.device&&(this.device=this.VERTICAL_IPX,this.UI_player.getComponent(cc.Widget).top=-110)},t.prototype.setMobile=function(){if(this.VERTICAL_MOBILE!==this.device)if(this.device=this.VERTICAL_MOBILE,cc.view.getFrameSize().height/cc.view.getFrameSize().width>1.5){if(cc.view.getFrameSize().width/cc.view.getFrameSize().height>=.6&&cc.view.getFrameSize().width/cc.view.getFrameSize().height<.62)return void(this.UI_player.getComponent(cc.Widget).top=-30);this.UI_player.getComponent(cc.Widget).top=-45}else this.UI_player.getComponent(cc.Widget).top=0},t.prototype.update=function(){this.handleRotate()},n([s(cc.Node)],t.prototype,"UI_player",void 0),n([c],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],Ultils:[function(e,t,o){"use strict";cc._RF.push(t,"03f2ceupvBEfa9putmH215T","Ultils"),Object.defineProperty(o,"__esModule",{value:!0}),o.Ultils=void 0;var i=cc._decorator,l=(i.ccclass,i.property,{checkRowForThree:function(e){for(var t=function(t){var o=[t,t+1,t+2],i=(e[t].active,e[t].name);if([5,6,12,13,19,20,26,27,33,34,40,41,47,48,54,55].includes(t))return"continue";o.every(function(t){return e[t].name===i})&&(console.log("Check"),o.forEach(function(t){e[t].active=!1}))},o=0;o<56;o++)t(o)}}),n=function(){function e(){}return e.GamePlay=l,e}();o.Ultils=n,cc._RF.pop()},{}],constants:[function(e,t,o){"use strict";cc._RF.push(t,"eaccb/69FZDu6rC4YmR+uAW","constants"),Object.defineProperty(o,"__esModule",{value:!0}),o.Constants=void 0;var i,l=cc._decorator;l.ccclass,l.property,function(e){e.touchStart="touchstart",e.touchMove="touchmove",e.touchEnd="touchend",e.touchCancel="touchcancel"}(i||(i={}));var n,r={SoundState:!0,State:1,isEndGame:!1,isPlayBgSound:!1},c={calculatedY:0,calculatedX:0,currentDevice:""};(function(e){e.bgSound="bgSound",e.clickSound="clickSound",e.woaSound="woaSound",e.woaSound2="woaSound2",e.SwapSound="SwapSound",e.GemSound="GemSound",e.rainbowSound="rainbowSound"})(n||(n={}));var s=function(){function e(){}return e.isRotate=!1,e.isCanTouch=!0,e.countScore=0,e.isClickFirstTime=!1,e.Event=i,e.SoundTrack=n,e.ironSource=r,e.Responsive=c,e}();o.Constants=s,cc._RF.pop()},{}]},{},["Ultils","constants","Cell","CellEnums","Circle","CircleEnums","ClassHelpers","GameField","GamesController","AudioManager","Responsive"]);