{"version":3,"sources":["assets\\Script\\MainGame\\GamesController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Constants } from \"../Data/constants\";\r\nimport AudioManager from \"../Plugin/AudioManager\";\r\nimport { Circle } from \"./Circle\";\r\nimport { GameField } from \"./GameField\";\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport class GameController extends cc.Component {\r\n\r\n    @property\r\n    countTypeAndMove: number = 12;\r\n\r\n    private allpoints: number = 0;\r\n\r\n    private taskpoints: number = 0;\r\n\r\n    private movepoints: number = 0;\r\n\r\n    @property\r\n    testGame: boolean = true;\r\n\r\n    @property(GameField)\r\n    gameField: GameField = null;\r\n\r\n    @property(cc.Node)\r\n    blockField: cc.Node = null;\r\n\r\n    \r\n    onLoad() {\r\n\r\n        this.node.on('moveCircleEnd', this.gameField.createOneLineCircles, this.gameField);\r\n        this.node.on('moveCircleEnd', function (event) {\r\n            event.stopPropagation();\r\n        });\r\n\r\n        this.node.on('clickOnCellForDestroyCircle', this.gameField.clickDestroyCircleInCell, this.gameField);\r\n        this.node.on('clickOnCellForDestroyCircle', function (event) {\r\n            event.stopPropagation();\r\n        });\r\n\r\n        this.node.on('destroyCircles', this.gameField.allCirclesMove, this.gameField);\r\n        this.node.on('destroyCircles', function (event) {\r\n            event.stopPropagation();\r\n        });\r\n\r\n        this.node.on('needCheckField', this.gameField.checkLine, this.gameField);\r\n        this.node.on('needCheckField', function (event) {\r\n            event.stopPropagation();\r\n        });\r\n\r\n        this.node.on('setPoint', this.setPoint, this);\r\n        this.node.on('setPoint', function (event) {\r\n            event.stopPropagation();\r\n        });\r\n\r\n\r\n        this.node.on('getDestroyCirclesType', this.gameField.getTypeDestroyCircle, this.gameField);\r\n        this.node.on('getDestroyCirclesType', function (event) {\r\n            event.stopPropagation();\r\n        });\r\n\r\n        this.node.on('setDestroyCirclesType_', this.setTypeDestroyCircle, this);\r\n        this.node.on('setDestroyCirclesType_', function (event) {\r\n            event.stopPropagation();\r\n        });\r\n\r\n        this.node.on('countProgressStep', this.countProgressStep, this);\r\n        this.node.on('countProgressStep', function (event) {\r\n            event.stopPropagation();\r\n        });\r\n        this.node.on('countProgressDestrCirles', this.countProgressStep, this);\r\n        this.node.on('countProgressDestrCirles', function (event) {\r\n            event.stopPropagation();\r\n        });\r\n    }\r\n\r\n\r\n    private setPoint() {\r\n        this.allpoints += 1;\r\n    }\r\n\r\n\r\n    private countProgressStep() {\r\n        this.movepoints--;\r\n        cc.log(this.movepoints)\r\n    }\r\n\r\n    progressTargetDestoyCircle(){\r\n\r\n    }\r\n\r\n    gameOverNodeDeActivate(){\r\n     \r\n    }\r\n\r\n    gameWonNodeDeActivate(){\r\n     \r\n    }\r\n\r\n    private CheckGameOverIfColorChallengeIsComplete(){\r\n\r\n    }\r\n\r\n    RestartGame() {\r\n        this.gameField.node.active = false;\r\n        this.gameField.node.active = true;\r\n        this.allpoints = 1;\r\n        this.movepoints = this.countTypeAndMove;\r\n    }\r\n\r\n    setTypeDestroyCircle() {\r\n        this.progressTargetDestoyCircle();\r\n    }\r\n\r\n\r\n    @property(AudioManager)\r\n    AudioManager: AudioManager = null;\r\n    \r\n    protected start(): void {\r\n        // this.AudioManager.playSound(Constants.SoundTrack.bgSound)\r\n        window.gameReady && window.gameReady();\r\n    }\r\n\r\n    public installHandle(): void {\r\n        console.log(\"install\");\r\n        Constants.ironSource.isEndGame = true;\r\n        this.AudioManager.stopAllSound();\r\n        window.gameEnd && window.gameEnd();\r\n\r\n        //If ad network is tiktok\r\n        if (typeof (playableSDK) != \"undefined\") {\r\n            window.playableSDK.openAppStore();\r\n            return;\r\n        }\r\n\r\n        // If ad network is google ads\r\n        if (typeof (ExitApi) != \"undefined\") {\r\n            ExitApi.exit();\r\n            return;\r\n        }\r\n\r\n        // If ad netwrok is ironsources\r\n        if (typeof (dapi) != \"undefined\") {\r\n            dapi.openStoreUrl();\r\n            return;\r\n        }\r\n\r\n        // If ad network support MRAID 2.0\r\n        if (typeof(mraid) != \"undefined\") {\r\n            if (cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.ANDROID) {\r\n                mraid.open(\"https://play.google.com/store/apps/details?id=com.an.fashiongame.dolldressup\");\r\n                return;\r\n            }\r\n\r\n            // if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.IPHONE || cc.sys.os == cc.sys.IPAD) {\r\n            //     mraid.open(\"https://itunes.apple.com/us/app/id6449269733?mt=8\");\r\n            //     return;\r\n            // }\r\n\r\n            mraid.open(\"https://play.google.com/store/apps/details?id=com.an.fashiongame.dolldressup\");\r\n            return;\r\n        }\r\n        // If ad network is mindwork. window alway avaiable so skip undefined check\r\n        window.install && window.install();\r\n    }\r\n\r\n}"]}