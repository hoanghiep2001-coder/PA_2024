window.__require=function t(e,o,n){function r(s,c){if(!o[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var u="function"==typeof __require&&__require;if(!c&&u)return u(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var h=o[s]={exports:{}};e[s][0].call(h.exports,function(t){return r(e[s][1][t]||t)},h,h.exports,t,e,o,n)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({AnimData:[function(t,e,o){"use strict";cc._RF.push(e,"bbde4TkwLVC/rZeCM2fqz7N","AnimData"),Object.defineProperty(o,"__esModule",{value:!0}),o.AnimData=void 0;var n,r,i,s,c=cc._decorator;c.ccclass,c.property,function(t){t.Level28_A="Level/Level28_A",t.Level28_B="Level/Level28_B",t.Level29_A="Level/Level29_B",t.Level29_B="Level/Level29_B",t.Level32_B="Level/Level32_B"}(n||(n={})),function(t){t.Level28_A="Level/Level28_A",t.Level28_C="Level/Level28_C",t.Level29_A="Level/Level29_B",t.Level32_A="Level/Level32_A",t.Level32_B="Level/Level32_B"}(r||(r={})),function(t){t.Level28_A2="Level/Level28_A2",t.Level28_C="Level/Level28_C"}(i||(i={})),function(t){t.Level32_B="Level/Level32_B"}(s||(s={}));var a=function(){function t(){}return t.Girl=n,t.Boy=r,t.FatMan=i,t.Door=s,t}();o.AnimData=a,cc._RF.pop()},{}],AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"16092J/6+9HR5x8fJSUKKad","AudioManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Data/constants"),c=cc._decorator,a=c.ccclass,u=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgSound=null,e.eraserSound=null,e.successSound=null,e.moveSound=null,e.fireworksSound=null,e.clickSound=null,e.SheepSound1=null,e.SheepSound2=null,e.LoseSound=null,e.femaleLaughSound=null,e.fightSound=null,e}return r(e,t),e.prototype.playSound=function(t){if(s.Constants.ironSource.SoundState&&!s.Constants.ironSource.isEndGame)switch(t){case"bgSound":this.bgSound.play();break;case"fightSound":this.fightSound.play();break;case"femaleLaughSound":this.femaleLaughSound.play();break;case"eraserSound":this.eraserSound.play();break;case"LoseSound":this.LoseSound.play();break;case"SheepSound1":this.SheepSound1.play();break;case"SheepSound2":this.SheepSound2.play();break;case"clickSound":this.clickSound.play();break;case"successSound":this.successSound.play();break;case"moveSound":this.moveSound.play();break;case"fireworksSound":this.fireworksSound.play()}},e.prototype.stopSound=function(t){switch(t){case"bgSound":this.bgSound.stop();break;case"femaleLaughSound":this.femaleLaughSound.stop();break;case"fightSound":this.fightSound.stop();break;case"eraserSound":this.eraserSound.stop();break;case"LoseSound":this.LoseSound.stop();break;case"SheepSound1":this.SheepSound1.stop();break;case"SheepSound2":this.SheepSound2.stop();break;case"clickSound":this.clickSound.stop();break;case"successSound":this.successSound.stop();break;case"moveSound":this.moveSound.stop();break;case"fireworksSound":this.fireworksSound.stop()}},e.prototype.stopAllSound=function(){this.fightSound.stop(),this.bgSound.stop(),this.femaleLaughSound.stop(),this.eraserSound.stop(),this.successSound.stop(),this.moveSound.stop(),this.fireworksSound.stop(),this.clickSound.stop(),this.SheepSound1.stop(),this.SheepSound2.stop(),this.LoseSound.stop()},i([u(cc.AudioSource)],e.prototype,"bgSound",void 0),i([u(cc.AudioSource)],e.prototype,"eraserSound",void 0),i([u(cc.AudioSource)],e.prototype,"successSound",void 0),i([u(cc.AudioSource)],e.prototype,"moveSound",void 0),i([u(cc.AudioSource)],e.prototype,"fireworksSound",void 0),i([u(cc.AudioSource)],e.prototype,"clickSound",void 0),i([u(cc.AudioSource)],e.prototype,"SheepSound1",void 0),i([u(cc.AudioSource)],e.prototype,"SheepSound2",void 0),i([u(cc.AudioSource)],e.prototype,"LoseSound",void 0),i([u(cc.AudioSource)],e.prototype,"femaleLaughSound",void 0),i([u(cc.AudioSource)],e.prototype,"fightSound",void 0),i([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Data/constants":"constants"}],GameController:[function(t,e,o){"use strict";cc._RF.push(e,"dfec3bBGHdHY4ShHxSUTm+E","GameController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.GameController=void 0;var s=t("../Data/constants"),c=t("../Plugin/AudioManager"),a=cc._decorator,u=a.ccclass,h=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AudioManager=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){window.gameReady&&window.gameReady()},e.prototype.installHandle=function(){if(console.log("install"),this.AudioManager.stopAllSound(),s.Constants.ironSource.isEndGame=!0,window.gameEnd&&window.gameEnd(),"undefined"==typeof playableSDK)if("undefined"==typeof ExitApi){if("undefined"==typeof dapi)return"undefined"!=typeof mraid?(cc.sys.os==cc.sys.OS_ANDROID||(cc.sys.os,cc.sys.ANDROID),void mraid.open("https://play.google.com/store/apps/details?id=com.an.DOPstory.drawonepart")):void(window.install&&window.install());dapi.openStoreUrl()}else ExitApi.exit();else window.playableSDK.openAppStore()},i([h(c.default)],e.prototype,"AudioManager",void 0),i([u],e)}(cc.Component);o.GameController=l,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager"}],GamePlay:[function(t,e,o){"use strict";cc._RF.push(e,"e4962SfSUFOcoqc2Otz+5iQ","GamePlay");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Data/AnimData"),c=t("../Data/constants"),a=t("../Plugin/AudioManager"),u=t("./GameController"),h=t("./NodeController"),l=cc._decorator,f=l.ccclass,d=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AudioManager=null,e.GameController=null,e.NodeController=null,e.CTA=null,e.CTA_btn=null,e.isDoneEraser=!1,e.timeoutId=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.initGame()},e.prototype.initGame=function(){c.Constants.currentLv=1,this.CTA.active=!1,this.NodeController.shape_wrong.active=!1},e.prototype.activeEaraserHint=function(){var t=this;c.Constants.isCanTouch=!0,this.NodeController.Point.opacity=0,this.NodeController.Point.setPosition(71,134),this.NodeController.Point.active=!0,cc.tween(this.NodeController.Point).to(.5,{opacity:255}).call(function(){t.NodeController.Point.getComponent(cc.Animation).play()}).start()},e.prototype.hideEraserPoint=function(){this.NodeController.Point.active=!1},e.prototype.handleDeleteWrong=function(t,e){c.Constants.isCanTouch=!1,this.AudioManager.playSound(c.Constants.SoundTrack.LoseSound),this.NodeController.shape_wrong.active=!0,this.NodeController.shape_wrong.setPosition(t),cc.tween(this.NodeController.shape_wrong).to(.5,{scale:.1,opacity:255},{easing:cc.easing.elasticOut}).to(.5,{opacity:0,scale:0},{easing:cc.easing.elasticOut}).call(function(){Array.isArray(e)?e.forEach(function(t){return t.resetProgress()}):e.resetProgress(),c.Constants.isCanTouch=!0,cc.log("reset Progress!")}).start(),cc.log("delete wrong...")},e.prototype.filterCorrectResult=function(t,e){switch(c.Constants.currentLv){case 1:"Boy"===t.node.parent.name&&t.progress>=.45?this.deleteCorrect(1,t):this.handleDeleteWrong(e,t);break;case 2:"main"===t.node.parent.name&&t.progress>=.82?this.deleteCorrect(2,t):this.handleDeleteWrong(e,t);break;case 3:"Scene3"===t.node.parent.name&&t.progress>=.6?this.deleteCorrect(3,t):this.handleDeleteWrong(e,t)}},e.prototype.deleteCorrect=function(t,e){var o=this;cc.log("correct"),c.Constants.currentLv+=1,c.Constants.isCanTouch=!1,this.hideEraserPoint(),e.node.active=!1;var n=this.NodeController.Scenes[t-1],r=n.getChildByName("Result_Win"),i=null,a=null;switch(t){case 1:var u=n.getChildByName("spine_Girl"),h=n.getChildByName("Boy"),l=n.getChildByName("fatman"),f=n.getChildByName("Fight"),d=n.getChildByName("text");clearInterval(this.timeoutId),this.AudioManager.playSound(c.Constants.SoundTrack.fightSound),f.active=!0,this.scheduleOnce(function(){r.active=!0,f.active=!1,o.AudioManager.stopSound(c.Constants.SoundTrack.fightSound)},1.5),u.getComponent(sp.Skeleton).setAnimation(0,s.AnimData.Girl.Level28_B,!0),d.active=!1,h.active=!1,l.active=!1,a=3,i=1.5;break;case 2:var p=n.getChildByName("intro"),_=p.getChildByName("spine_Girl"),y=n.getChildByName("main");a=3,i=.1,p.opacity=255,p.active=!0,y.active=!1,_.getComponent(sp.Skeleton).setAnimation(0,s.AnimData.Girl.Level29_B,!0);break;case 3:var v=n.getChildByName("spine_Boy"),b=n.getChildByName("spine_Girl"),m=n.getChildByName("Result_Win"),g=n.getChildByName("Hotel").getChildByName("Scratchable").getChildByName("lvl32_hotel").getChildByName("Hotel_door"),x=n.getChildByName("Hotel").getChildByName("Scratchable").getChildByName("Mask").getChildByName("Door");g.active=!0,x.active=!1,m.active=!0,v.active=!1,b.active=!1,i=1}this.scheduleOnce(function(){o.NodeController.FX_confetti.resetSystem(),o.AudioManager.playSound(c.Constants.SoundTrack.successSound)},i),c.Constants.currentLv<=3?this.showNextLevel(a):this.winGame()},e.prototype.showNextLevel=function(t){var e=this;this.scheduleOnce(function(){2===c.Constants.currentLv?e.scheduleOnce(function(){e.activeEaraserHint()},3):e.scheduleOnce(function(){e.activeEaraserHint()},1),e.NodeController.Scenes[c.Constants.currentLv-2].active=!1,e.NodeController.Scenes[c.Constants.currentLv-1].active=!0,e.NodeController.FX_confetti.stopSystem()},t)},e.prototype.handleIronSourcePlaySound=function(){c.Constants.ironSource.isPlayBgSound||(c.Constants.ironSource.SoundState&&this.AudioManager.playSound(c.Constants.SoundTrack.bgSound),c.Constants.ironSource.isPlayBgSound=!0)},e.prototype.handleMuteSoundIronSource=function(){c.Constants.ironSource.State=parseInt(localStorage.getItem("cocosSoundState"),10),c.Constants.ironSource.State&&(1!==c.Constants.ironSource.State||c.Constants.ironSource.SoundState||c.Constants.ironSource.isEndGame||(c.Constants.ironSource.SoundState=!0,this.AudioManager.playSound(c.Constants.SoundTrack.bgSound)),2===c.Constants.ironSource.State&&c.Constants.ironSource.SoundState&&(c.Constants.ironSource.SoundState=!1,this.AudioManager.stopAllSound()))},e.prototype.activeTweenForBtn=function(){var t=this;this.scheduleOnce(function(){cc.tween(t.CTA_btn).to(.5,{opacity:255}).call(function(){cc.tween(t.CTA_btn).repeatForever(cc.tween(t.CTA_btn).to(.5,{scale:.5}).to(.5,{scale:.45},{easing:"elasticOut"})).start()}).start()},1)},e.prototype.winGame=function(){var t=this;c.Constants.isDoneEraser=!0,this.AudioManager.stopSound(c.Constants.SoundTrack.eraserSound),this.isDoneEraser=!0,this.scheduleOnce(function(){t.CTA.active=!0,t.CTA.getComponent(cc.Animation).play("CTA_Anim"),t.activeTweenForBtn()},2)},e.prototype.playYameteKudasaiSound=function(){var t=this;this.AudioManager.playSound(c.Constants.SoundTrack.femaleLaughSound),this.timeoutId=setInterval(function(){c.Constants.currentLv<2&&t.AudioManager.playSound(c.Constants.SoundTrack.femaleLaughSound)},6e3)},i([d(a.default)],e.prototype,"AudioManager",void 0),i([d(u.GameController)],e.prototype,"GameController",void 0),i([d(h.default)],e.prototype,"NodeController",void 0),i([d(cc.Node)],e.prototype,"CTA",void 0),i([d(cc.Node)],e.prototype,"CTA_btn",void 0),i([f],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/AnimData":"AnimData","../Data/constants":"constants","../Plugin/AudioManager":"AudioManager","./GameController":"GameController","./NodeController":"NodeController"}],MaskGamePlay:[function(t,e){"use strict";cc._RF.push(e,"af3b25w7AVJa7LI1CskCfDP","MaskGamePlay");var o=t("Scratchable");cc.Class({extends:cc.Component,properties:{pointClear:cc.Node,touchArea:cc.Node},onLoad:function(){this.scratchables=this.getComponentsInChildren(o)},update:function(){if(this.isTouch=this.touchArea.getComponent("TouchAreaController").isTouch,this.pointClear.active&&this.isTouch){var t=cc.v2(this.pointClear.x+cc.winSize.width/2,this.pointClear.y+cc.winSize.height/2);this.scratchables.forEach(function(e){e.isScratchable&&e.isInBound(t)&&e.scratchHole(t)})}}}),cc._RF.pop()},{Scratchable:"Scratchable"}],NeutrinoAssemblerJSB:[function(t,e,o){"use strict";cc._RF.push(e,"908f2U8uBBKHLoXjGNOOkv8","NeutrinoAssemblerJSB");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),cc.renderer;var i=[0,1,3,1,2,3],s=512*i.length,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._currentVertex=0,e._renderStyleIndex=null,e._worldScale=new cc.Vec3,e}return r(e,t),e._checkAndCreateCurrentBuffer=function(){var t=e._bufferIndex;e._vertexBuffers[t]||(e._vertexBuffers[t]=new ArrayBuffer(2048*e._vertexFormat._bytes),e._vertexFloatBuffers[t]=new Float32Array(e._vertexBuffers[t]),e._vertexUint32Buffers[t]=new Uint32Array(e._vertexBuffers[t])),e._indexBuffers[t]||(e._indexBuffers[t]=new Uint16Array(s))},e._incBuffer=function(){++e._bufferIndex,e._numBufferVertices=0,e._numBufferIndices=0,e._startBufferVertex=0,e._startBufferIndex=0,e._checkAndCreateCurrentBuffer()},e.prototype._prepareForGeometry=function(t,o){e._numBufferVertices,(e._numBufferVertices+t>2048||e._numBufferIndices+o>s)&&(this._finishDrawCall(),e._incBuffer())},e.prototype._commitGeometry=function(t,o){e._numBufferVertices+=t,e._numBufferIndices+=o},e._resetGeometryBuffers=function(){this._bufferIndex=0,this._numBufferVertices=0,this._numBufferIndices=0,this._startBufferVertex=0,this._startBufferIndex=0,this._checkAndCreateCurrentBuffer()},e.prototype._finishDrawCall=function(){if(e._startBufferIndex!==e._numBufferIndices){var t=e._bufferIndex,o=new Float32Array(e._vertexBuffers[t],e._startBufferVertex*e._vertexFormat._bytes,(e._numBufferVertices-e._startBufferVertex)*e._vertexFormat._bytes/4),n=new Uint16Array(e._indexBuffers[t].buffer,2*e._startBufferIndex,e._numBufferIndices-e._startBufferIndex);this.updateIAData(this._drawCallIndex,e._vertexFormat._nativeObj,o,n);var r=this._renderComp.materials[this._renderStyleIndex].effect;this.updateEffect(this._drawCallIndex,r._nativeObj),e._startBufferVertex=e._numBufferVertices,e._startBufferIndex=e._numBufferIndices,++this._drawCallIndex}},e.prototype.updateRenderData=function(t){this.fillBuffers(t),t.node._renderFlag|=cc.RenderFlow.FLAG_UPDATE_RENDER_DATA},e.prototype.fillBuffers=function(t){t._neutrinoEffect&&t.context.loaded()&&(this.reset(),e._resetGeometryBuffers(),this._drawCallIndex=0,this._currentVertex=0,this._renderStyleIndex=null,this._worldScale=t._worldScale,t._neutrinoEffect.fillGeometryBuffers([1,0,0],[0,1,0],[0,0,-1]),this._finishDrawCall())},e.prototype.initialize=function(){},e.prototype.beforeQuad=function(t){this._renderStyleIndex!==t&&(this._finishDrawCall(),this._renderStyleIndex=t),this._prepareForGeometry(4,i.length)},e.prototype.pushVertex=function(t){var o=e._bufferIndex,n=e._vertexFormat._bytes/4,r=e._vertexFloatBuffers[o],s=e._vertexUint32Buffers[o],c=(e._numBufferVertices+this._currentVertex)*n,a=t.position[0]*this._worldScale.x,u=t.position[1]*this._worldScale.y,h=t.position[2]*this._worldScale.z;if(r[c++]=a,r[c++]=u,r[c++]=h,r[c++]=t.texCoords[0][0],r[c++]=1-t.texCoords[0][1],s[c++]=t.color[0]|t.color[1]<<8|t.color[2]<<16|t.color[3]<<24,++this._currentVertex,4==this._currentVertex){for(var l=e._indexBuffers[o],f=0;f<i.length;++f)l[e._numBufferIndices+f]=e._numBufferVertices-e._startBufferVertex+i[f];this._commitGeometry(4,i.length),this._currentVertex=0}},e.prototype.pushRenderCall=function(){},e.prototype.cleanup=function(){},e._vertexFormat=cc.gfx.VertexFormat.XYZ_UV_Color,e._vertexBuffers=[],e._vertexFloatBuffers=[],e._vertexUint32Buffers=[],e._indexBuffers=[],e}(cc.MeshRenderer.__assembler__);o.default=c,cc._RF.pop()},{}],NeutrinoAssemblerWebGL:[function(t,e,o){"use strict";cc._RF.push(e,"32e92P2G2hLrY8BaVp0+NVh","NeutrinoAssemblerWebGL");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i=[0,1,3,1,2,3],s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._initialized=!1,e._currentVertex=0,e._renderStyleIndex=null,e._vertexFormat=cc.gfx.VertexFormat.XYZ_UV_Color,e._buffer=null,e._bufferOffsetInfo=null,e._modelBatcher=null,e._worldScale=new cc.Vec3,e}return r(e,t),e.prototype.fillBuffers=function(t,e){t._neutrinoEffect&&t.context.loaded()&&(this._initialized||(this._buffer=e.getBuffer("mesh",this._vertexFormat),this._initialized=!0),this._modelBatcher=e,this._renderStyleIndex=null,this._worldScale=t._worldScale,t._neutrinoEffect.fillGeometryBuffers([1,0,0],[0,1,0],[0,0,-1]))},e.prototype.initialize=function(){},e.prototype.beforeQuad=function(t){if(this._renderStyleIndex!==t){var e=this._renderComp.materials[t];e&&e.getHash()!==this._modelBatcher.material.getHash()&&(this._modelBatcher._flush(),this._modelBatcher.material=e),this._renderStyleIndex=t}this._bufferOffsetInfo=this._buffer.request(4,i.length)},e.prototype.pushVertex=function(t){var e=this._bufferOffsetInfo,o=this._vertexFormat._bytes/4,n=this._buffer,r=n._vData,s=n._uintVData,c=e.byteOffset/4+this._currentVertex*o,a=t.position[0]*this._worldScale.x,u=t.position[1]*this._worldScale.y,h=t.position[2]*this._worldScale.z;if(r[c+0]=a,r[c+1]=u,r[c+2]=h,r[c+3]=t.texCoords[0][0],r[c+4]=1-t.texCoords[0][1],s[c+5]=t.color[0]|t.color[1]<<8|t.color[2]<<16|t.color[3]<<24,++this._currentVertex,4==this._currentVertex){for(var l=n._iData,f=0;f<i.length;++f)l[e.indiceOffset+f]=e.vertexOffset+i[f];this._currentVertex=0}},e.prototype.pushRenderCall=function(){},e.prototype.cleanup=function(){},e}(cc.Assembler);o.default=s,cc._RF.pop()},{}],NeutrinoAssembler:[function(t,e,o){"use strict";cc._RF.push(e,"7dd47KelZZLyadMohM05ouJ","NeutrinoAssembler"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./NeutrinoAssemblerWebGL"),r=(t("./NeutrinoAssemblerJSB"),n.default);o.default=r,cc._RF.pop()},{"./NeutrinoAssemblerJSB":"NeutrinoAssemblerJSB","./NeutrinoAssemblerWebGL":"NeutrinoAssemblerWebGL"}],NeutrinoComponent:[function(t,e,o){"use strict";cc._RF.push(e,"fe372iH4fZOBLxITCZbQxJ2","NeutrinoComponent");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./NeutrinoSettings"),c=t("./NeutrinoContext"),a=cc._decorator,u=a.ccclass,h=a.property,l=new cc.Mat4,f=new cc.Mat4,d=new cc.Quat,p=new cc.Vec3,_=new cc.Mat4,y=[0,0,0,0],v=[0,0,0,0];function b(t){return t instanceof cc.Vec2?[t.x,t.y]:t instanceof cc.Vec3?[t.x,t.y,t.z]:t}var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.context=null,e._neutrinoEffectModel=null,e._neutrinoEffect=null,e._spriteFrames=null,e._emitterPropsOnStart={},e._texturesRemap=null,e._waitingForContext=!1,e._resetInProgress=!1,e._numTexturesLoading=0,e._errorOnLoad=!1,e._worldScale=new cc.Vec3,e._destructed=!1,e._serialized=!1,e._worldParentId="",e._texturesPrefixPath="",e._spriteAtlas=null,e._pausedOnStart=!1,e._pausedGeneratorsOnStart=!1,e.destroyWhenEmpty=!1,e.destroyNodeWhenEmpty=!1,e}return r(e,t),Object.defineProperty(e.prototype,"worldParent",{get:function(){return this._findWorldParent()},set:function(t){this._worldParentId=t?t.uuid:"",this._waitForContextAndReset()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texturesPrefixPath",{get:function(){return this._texturesPrefixPath},set:function(t){this._texturesPrefixPath=t,this._waitForContextAndReset()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spriteAtlas",{get:function(){return this._spriteAtlas},set:function(t){this._spriteAtlas=t,this._waitForContextAndReset()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pausedOnStart",{get:function(){return this._pausedOnStart},set:function(t){this._pausedOnStart=t,this._waitForContextAndReset()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pausedGeneratorsOnStart",{get:function(){return this._pausedGeneratorsOnStart},set:function(t){this._pausedGeneratorsOnStart=t,this._waitForContextAndReset()},enumerable:!1,configurable:!0}),e.prototype.resetInEditor=function(){this._waitForContextAndReset()},e.prototype.onLoad=function(){if(this.context=c.default.instance(),this.context.ensureNoiseTextureIsGenerated(),!this._serialized){this._serialized=!0;var t=s.default.instance();t&&(this._texturesPrefixPath=t.defaultTexturesPrefixPath,this._spriteAtlas=t.defaultSpriteAtlas,t.defaultWorldParent&&(this._worldParentId=t.defaultWorldParent.uuid))}this._waitForContextAndReset()},e.prototype.onDestroy=function(){this._spriteFrames&&(this._spriteFrames.forEach(function(t){t&&t.decRef()}),this._spriteFrames.length=0),this._waitingForContext&&this.context.off("loaded",this._reset,this),this._destructed=!0},e.prototype.update=function(t){if(this._neutrinoEffect){this._getNeutrinoWorldPositionRotation(y,v),this._neutrinoEffect.update(t,y,v);var e=this.worldParent;e?(e.getWorldMatrix(_),this.materials.forEach(function(t){t.setProperty("worldParentMat",_)})):this.materials.forEach(function(t){t.setProperty("worldParentMat",cc.Mat4.IDENTITY)}),this.paused()||(this.destroyWhenEmpty||this.destroyNodeWhenEmpty)&&0===this.getNumParticles()&&(this.destroyNodeWhenEmpty?this.node.destroy():this.destroy())}},e.prototype.ready=function(){return null!==this._neutrinoEffect},e.prototype.restart=function(){this._getNeutrinoWorldPositionRotation(y,v),this._neutrinoEffect.restart(y,v)},e.prototype.resetPositionRotation=function(){this._getNeutrinoWorldPositionRotation(y,v),this._neutrinoEffect.resetPosition(y,v)},e.prototype.pause=function(){this.ready()&&this._neutrinoEffect.pauseAllEmitters(),this._pausedOnStart=!0},e.prototype.unpause=function(){this.ready()&&this._neutrinoEffect.unpauseAllEmitters(),this._pausedOnStart=!1},e.prototype.paused=function(){return this.ready()?this._neutrinoEffect.areAllEmittersPaused():this._pausedOnStart},e.prototype.pauseGenerators=function(){this.ready()&&this._neutrinoEffect.pauseGeneratorsInAllEmitters(),this._pausedGeneratorsOnStart=!0},e.prototype.unpauseGenerators=function(){this.ready()&&this._neutrinoEffect.unpauseGeneratorsInAllEmitters(),this._pausedGeneratorsOnStart=!1},e.prototype.generatorsPaused=function(){return this.ready()?this._neutrinoEffect.areGeneratorsInAllEmittersPaused():this._pausedGeneratorsOnStart},e.prototype.setPropertyInAllEmitters=function(t,e){var o=b(e);this.ready()?this._neutrinoEffect.setPropertyInAllEmitters(t,o):this._emitterPropsOnStart[t]=o},e.prototype.getNumParticles=function(){return this._neutrinoEffect?this._neutrinoEffect.getNumParticles():0},e.prototype._checkBacth=function(t,e){t.cullingMask!==e&&(t._flush(),t.cullingMask=e)},e.prototype._waitForContextAndReset=function(){if(this.context)return this.context.loaded()?void this._reset():(this._waitingForContext=!0,void this.context.once("loaded",this._reset,this))},e.prototype._reset=function(){if(!this._resetInProgress&&!this._destructed){this._waitingForContext=!1;var t=this.getEffectClass();if(t){this._resetInProgress=!0,this._errorOnLoad=!1,this._neutrinoEffectModel=new t(this.context.neutrinoContext),this._neutrinoEffect=null;var e=this._neutrinoEffectModel.textures.length;this._spriteFrames=new Array(e),this._numTexturesLoading=this._spriteFrames.length;for(var o=0;o<e;++o){var n=(this._texturesPrefixPath+this._neutrinoEffectModel.textures[o]).replace(/\.[^/.]+$/,"");if(this.spriteAtlas){var r=this.spriteAtlas.getSpriteFrame(n);r?(r.addRef(),this._spriteFrames[o]=r,--this._numTexturesLoading):(cc.warn(this.__classname__+": Can't load sprite '"+n+"' from sprite atlas. Will try to load single texture."),this._loadTexture(o,n))}else this._loadTexture(o,n)}0===this._numTexturesLoading&&this._onTexturesLoaded()}else cc.error(this.__classname__+": you shouldn't use NeutrinoComponent by itself. Use generated effect classes instead.")}},e.prototype._loadTexture=function(t,e){var o=this,n=this,r=this.getTexturesDatabase().find(function(t){return t.path===e}),i=function(){--n._numTexturesLoading,0===n._numTexturesLoading&&n._onTexturesLoaded()};if(!r)return cc.error(this.__classname__+": Can't find texture '"+e+"."),this._errorOnLoad=!0,void i();this.context.texturesBundle().load(r.path,cc.SpriteFrame,function(r,s){o._destructed||(r?(cc.error(n.__classname__+": Can't load sprite frame '"+e+"'. "+r),n._errorOnLoad=!0):(s.addRef(),n._spriteFrames[t]=s),i())})},e.prototype._onTexturesLoaded=function(){var t=this;if(this._errorOnLoad)this._resetInProgress=!1;else{this.materials.length=0;var e=!1;if(this._neutrinoEffectModel.renderStyles.forEach(function(o,n){var r=o.textureIndices[0],i=t._spriteFrames[r];if(!i)return cc.warn(t.__classname__+": Loading flow wrong behavior found #3 (don't worry about it)"),void(e=!0);var s=i.getTexture();if(!s)return cc.warn(t.__classname__+": Loading flow wrong behavior found #4 (don't worry about it)"),void(e=!0);var c=t._neutrinoEffectModel.materials[o.materialIndex],a=t.context.materials[2*c+(s.hasPremultipliedAlpha()?1:0)];if(!a)return cc.warn(t.__classname__+": Loading flow wrong behavior found #5 (don't worry about it)"),void(e=!0);t.setMaterial(n,a).setProperty("texture",s)},this),e)this._resetInProgress=!1;else{for(var o in this._initTexturesRemap(),this._getNeutrinoWorldPositionRotation(y,v),this._neutrinoEffect=this._neutrinoEffectModel.createWGLInstance(y,v,this._assembler,{paused:this._pausedOnStart,generatorsPaused:this._pausedGeneratorsOnStart}),this._neutrinoEffect.texturesRemap=this._texturesRemap,this._emitterPropsOnStart)this._neutrinoEffect.setPropertyInAllEmitters(o,this._emitterPropsOnStart[o]);this._emitterPropsOnStart={},this._resetInProgress=!1}}},e.prototype._initTexturesRemap=function(){for(var t=!1,e=0;e<this._spriteFrames.length;++e)if(1!==(o=this._spriteFrames[e]).uv[6]||0!==o.uv[0]||0!==o.uv[7]||1!==o.uv[1]){t=!0;break}if(t)for(this._texturesRemap=new Array(this._spriteFrames.length),e=0;e<this._spriteFrames.length;++e){var o=this._spriteFrames[e];this._texturesRemap[e]=new this.context.neutrinoContext.SubRect(o.uv[0],1-o.uv[1],o.uv[6]-o.uv[0],o.uv[1]-o.uv[7])}else this._texturesRemap=[]},e.prototype._getNeutrinoWorldPositionRotation=function(t,e){var o=l,n=d,r=p,i=this._worldScale;this.node.getWorldMatrix(o);var s=this.worldParent;if(s){var c=f;s.getWorldMatrix(c),cc.Mat4.invert(c,c),cc.Mat4.multiply(o,c,o)}cc.Mat4.getRotation(n,o),o.getTranslation(r),o.getScale(i),t[0]=r.x/i.x,t[1]=r.y/i.y,t[2]=r.z/i.z,e[0]=n.x,e[1]=n.y,e[2]=n.z,e[3]=n.w},e.prototype._findWorldParent=function(){var t=this.node;do{if(t.uuid==this._worldParentId)return t;t=t.parent}while(t);return null},i([h],e.prototype,"_serialized",void 0),i([h],e.prototype,"_worldParentId",void 0),i([h(cc.Node)],e.prototype,"worldParent",null),i([h],e.prototype,"_texturesPrefixPath",void 0),i([h],e.prototype,"texturesPrefixPath",null),i([h(cc.SpriteAtlas)],e.prototype,"_spriteAtlas",void 0),i([h(cc.SpriteAtlas)],e.prototype,"spriteAtlas",null),i([h],e.prototype,"_pausedOnStart",void 0),i([h],e.prototype,"pausedOnStart",null),i([h],e.prototype,"_pausedGeneratorsOnStart",void 0),i([h],e.prototype,"pausedGeneratorsOnStart",null),i([h],e.prototype,"destroyWhenEmpty",void 0),i([h],e.prototype,"destroyNodeWhenEmpty",void 0),i([u],e)}(cc.RenderComponent);o.default=m,cc._RF.pop()},{"./NeutrinoContext":"NeutrinoContext","./NeutrinoSettings":"NeutrinoSettings"}],NeutrinoContext:[function(t,e,o){"use strict";cc._RF.push(e,"c5500GPiiNIKKYfuHMFpUCR","NeutrinoContext");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./neutrinoparticles.js/neutrinoparticles.umd"),i=cc._decorator,s=i.ccclass,c=i.mixins,a=[{uuid:"97KN8e0flOjpWQPC0zIOoR",name:"NeutrinoNormal"},{uuid:"c5T9A8r8FHY5DeeJSjTP0k",name:"NeutrinoNormalPremul"},{uuid:"369MNzEcVL3Jj5UF9gvCfR",name:"NeutrinoAdd"},{uuid:"baTMgpxLlFqrJF04VcDxPF",name:"NeutrinoAddPremul"},{uuid:"a74/Nyb0dDYrv5zAZoAlVP",name:"NeutrinoMultiply"},{uuid:"04mmqJExZKjqgZH4ovqGK7",name:"NeutrinoMultiplyPremul"}],u=function(){function t(){this.neutrinoContext=new r.Context,this.materials=new Array(a.length),this._materialsLeftToLoad=this.materials.length,this._bundlesLeftToLoad=0,this._noiseGenerationStep=null,this._noiseGenerated=!1,this._texturesBundle=null,cc.EventTarget.call(this),this._startLoadingForBuild()}var e;return e=t,t.instance=function(){return this._singleInstance||(this._singleInstance=new e),this._singleInstance},t.prototype.loaded=function(){return 0===this._materialsLeftToLoad&&0===this._bundlesLeftToLoad},t.prototype.startNoiseTextureGeneration=function(){if(!this._noiseGenerated){var t,e=this,o=new this.neutrinoContext.NoiseGenerator;this._noiseGenerationStep=function(){for(var n=0;n<100;++n)if(o.step()){clearInterval(t),e._noiseGenerationStep=null,e._noiseGenerated=!0,o=null;break}},t=setInterval(this._noiseGenerationStep,0)}},t.prototype.ensureNoiseTextureIsGenerated=function(){if(!this._noiseGenerated)for(this._noiseGenerationStep||this.startNoiseTextureGeneration();this._noiseGenerationStep;)this._noiseGenerationStep()},t.prototype.texturesBundle=function(){return this._texturesBundle},t.prototype._startLoadingForDev=function(){for(var t=this,e=function(e){var o=e;cc.assetManager.loadAny(a[e].uuid,function(e,n){e?cc.error("NeutrinoContext: can't load material with UUID='"+a[o].uuid+"'. "+e):t._materialLoaded(n,o)})},o=0;o<this.materials.length;++o)e(o)},t.prototype._startLoadingForBuild=function(){var t=this,e=this;++this._bundlesLeftToLoad,cc.assetManager.loadBundle("neutrinoparticles-materials",function(o,n){if(o)cc.error("NeutrinoContext: failed to load bundle 'neutrinoparticles-materials'. "+o);else{--t._bundlesLeftToLoad;for(var r=function(t){var o=t;n.load(a[t].name,function(t,n){t?cc.error("NeutrinoContext: can't load material '"+a[o].name+"'. "+t):e._materialLoaded(n,o)})},i=0;i<t.materials.length;++i)r(i)}}),++this._bundlesLeftToLoad,cc.assetManager.loadBundle("neutrinoparticles/textures",function(e,o){e?cc.error("NeutrinoContext: failed to load bundle 'neutrinoparticles/textures'"):(cc.log("NeutrinoContext: Loaded bundle neutrinoparticles/textures"),--t._bundlesLeftToLoad,t._texturesBundle=o,t._checkAndEmitLoadedStatus())})},t.prototype._materialLoaded=function(t,e){this.materials[e]=t,--this._materialsLeftToLoad,this._checkAndEmitLoadedStatus()},t.prototype._checkAndEmitLoadedStatus=function(){this.loaded()&&this.emit("loaded")},e=n([s("NeutrinoContext"),c(cc.EventTarget)],t)}();o.default=u,cc.game.once(cc.game.EVENT_GAME_INITED,function(){u.instance().startNoiseTextureGeneration()}),cc._RF.pop()},{"./neutrinoparticles.js/neutrinoparticles.umd":"neutrinoparticles.umd"}],NeutrinoEffect_NoNameEffect:[function(t,e,o){"use strict";cc._RF.push(e,"db9efn2zFlH+5AKvHlG38QL","NeutrinoEffect_NoNameEffect");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../exported_effects/NoNameEffect.js"),c=t("../textures"),a=t("NeutrinoComponent"),u=t("NeutrinoAssembler"),h=cc._decorator,l=h.ccclass,f=h.executeInEditMode,d=h.playOnFocus,p=h.menu,_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getEffectClass=function(){return s},e.prototype.getTexturesDatabase=function(){return c.default},i([l,f,d,p("i18n:MAIN_MENU.component.renderers/NeutrinoComponent/NoNameEffect")],e)}(a.default);o.default=_,cc.Assembler.register(_,u.default),cc._RF.pop()},{"../exported_effects/NoNameEffect.js":"NoNameEffect","../textures":"textures",NeutrinoAssembler:"NeutrinoAssembler",NeutrinoComponent:"NeutrinoComponent"}],NeutrinoSettings:[function(t,e,o){"use strict";cc._RF.push(e,"fbcd0MmKjROJoyVC6K9nt1e","NeutrinoSettings");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultWorldParent=null,e.defaultTexturesPrefixPath="",e.defaultSpriteAtlas=null,e}var o;return r(e,t),o=e,e.instance=function(){var t=cc.find("Canvas");if(!t)return null;var e=t.getComponent(o);return e||((e=t.addComponent(o)).defaultWorldParent=t),e},i([a(cc.Node)],e.prototype,"defaultWorldParent",void 0),i([a],e.prototype,"defaultTexturesPrefixPath",void 0),i([a(cc.SpriteAtlas)],e.prototype,"defaultSpriteAtlas",void 0),o=i([c],e)}(cc.Component);o.default=u,cc.NeutrinoSettings=u,cc._RF.pop()},{}],NoNameEffect:[function(t,e,o){"use strict";cc._RF.push(e,"b46864GGMVEva0o9vqyqOmM","NoNameEffect"),function(t,n){if("object"==typeof o&&void 0!==e)e.exports=n();else if("function"==typeof define&&define.amd)define(["exports"],function(e){(t.NeutrinoEffect=e).NoNameEffect=n()});else{var r=t.NeutrinoEffect||(t.NeutrinoEffect={});r.__last__=r.NoNameEffect=n()}}("undefined"!=typeof self?self:void 0,function(){return function(t){var e=function t(e,o){this.Ld=e,this.Bd=o,this.Bd.we.pe.length>0?(this.we=this.Bd.we.pe[0],this.Lc=[t.prototype.Ec,t.prototype.Fc][this.we.xe]):this.we=null};e.prototype={Ec:function(e,o,n){var r=t.ib(n.Md),i=Math.cos(r),s=Math.sin(r),c=t.Ae(n.Nd[0]),a=t.Ae(n.Nd[1]);e.transform(c*i,c*s,a*-s,a*i,o[0],o[1])},Fc:function(e,o,n){var r=n.Mc,i=2*r[2]*r[2],s=2*r[0]*r[1],c=2*r[3]*r[2],a=t.Ae(n.Nd[0]),u=t.Ae(n.Nd[1]);e.transform(a*(1-2*r[1]*r[1]-i),a*(s+c),u*(c-s),u*(2*r[0]*r[0]+i-1),o[0],o[1])},Pc:function(e,o,n){if(o.vc(e,-1,n),this.we&&null!=this.Be&&!o.oc&&o.Od>.001){var r=Math.floor(o.Qc%this.we.Rc),i=Math.floor(o.Qc/this.we.Rc),s=o.Ab.slice(),c=o.Nd.slice();if(!n||n.transform(s,c)){var a=Math.abs(c[0]),u=Math.abs(c[1]);if(a>.001&&u>.001){if(e.save(),this.Lc(e,s,o),e.translate(-a*o.Pd[0],-u*(1-o.Pd[1])),e.globalAlpha*=o.Od,o.gf[0]<.999||o.gf[1]<.999||o.gf[2]<.999){if(a>=1&&u>=1){var h=a<this.Tc?a:this.Tc,l=u<this.Uc?u:this.Uc;t.af(h,l),t.bf.globalCompositeOperation="copy",t.bf.drawImage(this.Be.image,this.Be.x+this.Tc*r,this.Be.y+this.Uc*i,this.Tc,this.Uc,0,0,h,l),t.bf.globalCompositeOperation="multiply",t.bf.fillStyle=t.ff(o.gf),t.bf.fillRect(0,0,h,l),t.bf.globalCompositeOperation="destination-atop",t.bf.drawImage(this.Be.image,this.Be.x+this.Tc*r,this.Be.y+this.Uc*i,this.Tc,this.Uc,0,0,h,l),e.drawImage(t.cf,0,0,h,l,0,0,a,u)}}else e.drawImage(this.Be.image,this.Be.x+this.Tc*r,this.Be.y+this.Uc*i,this.Tc,this.Uc,0,0,a,u);e.restore()}}}o.vc(e,1,n)},Hd:function(t,e){switch(t.save(),this.we?(t.globalCompositeOperation=this.Ld.materials[this.Ld.model.renderStyles[this.we.renderStyleIndex].materialIndex],this.Be=this.Ld.textureDescs[this.Ld.model.renderStyles[this.we.renderStyleIndex].textureIndices[0]]):this.Be=null,this.Be&&(this.Tc=this.Be.width/this.we.Rc,this.Uc=this.Be.height/this.we.Sc),this.Bd.Vc){case 0:for(var o=0;o<this.Bd.tc.length;++o)this.Pc(t,this.Bd.tc[o],e);break;case 1:for(o=this.Bd.tc.length;o-- >0;)this.Pc(t,this.Bd.tc[o],e);break;case 2:for(this.Bd.tc.sort(function(t,e){return t.Ab[2]>e.Ab[2]?1:t.Ab[2]<e.Ab[2]?-1:0}),o=0;o<this.Bd.tc.length;++o)this.Pc(t,this.Bd.tc[o],e)}t.restore()}};var o=function(t,e){this.Ld=t,this.Bd=e,this.Bd.we.pe.length>0?this.we=this.Bd.we.pe[0]:this.we=null,this.vertex=[{position:[0,0,0],color:[0,0,0,0],texCoords:[[0,0]]},{position:[0,0,0],color:[0,0,0,0],texCoords:[[0,0]]},{position:[0,0,0],color:[0,0,0,0],texCoords:[[0,0]]},{position:[0,0,0],color:[0,0,0,0],texCoords:[[0,0]]}]};o.prototype={qe:function(e,o,n,r,i){if(e.Ce(-1,o,n,r,i),this.we&&!e.oc){var s=this.vertex[0],c=this.vertex[1],a=this.vertex[2],u=this.vertex[3],h=[],l=[];if(0==this.we.xe){var f=t.ib(e.Md),d=-Math.sin(f),p=Math.cos(f);h[0]=o[0]*p+n[0]*d,h[1]=o[1]*p+n[1]*d,h[2]=o[2]*p+n[2]*d,l[0]=-o[0]*d+n[0]*p,l[1]=-o[1]*d+n[1]*p,l[2]=-o[2]*d+n[2]*p}else{var _=e.Mc,y=2*_[2]*_[2],v=2*_[0]*_[1],b=2*_[3]*_[2];h[0]=1-2*_[1]*_[1]-y,h[1]=v+b,h[2]=2*_[0]*_[2]-2*_[3]*_[1],l[0]=v-b,l[1]=1-2*_[0]*_[0]-y,l[2]=2*_[1]*_[2]+2*_[3]*_[0]}var m=[],g=[],x=[],S=[];t.u(m,h,-e.Nd[0]*e.Pd[0]),t.u(g,h,e.Nd[0]*(1-e.Pd[0])),t.u(x,l,-e.Nd[1]*e.Pd[1]),t.u(S,l,e.Nd[1]*(1-e.Pd[1])),t.c(s.position,m,x),t.c(s.position,s.position,e.Ab),t.c(c.position,m,S),t.c(c.position,c.position,e.Ab),t.c(a.position,g,S),t.c(a.position,a.position,e.Ab),t.c(u.position,g,x),t.c(u.position,u.position,e.Ab);var C=t.v(e.gf,255);s.color=c.color=a.color=u.color=[C[0],C[1],C[2],255*e.Od];var A,w,P=Math.floor(e.Qc%this.we.Rc),N=Math.floor(e.Qc/this.we.Rc),B=this.Ld.texturesRemap[this.Ld.model.renderStyles[this.we.renderStyleIndex].textureIndices[0]];if(B)var T=B.width/this.we.Rc,O=B.height/this.we.Sc,M=(A=B.x+P*T)+T,R=(w=B.y+B.height-N*O)-O;else M=(A=P*(T=1/this.we.Rc))+T,R=(w=1-N*(O=1/this.we.Sc))-O;if(s.texCoords[0]=[A,R],c.texCoords[0]=[A,w],a.texCoords[0]=[M,w],u.texCoords[0]=[M,R],i.beforeQuad&&i.beforeQuad(this.we.renderStyleIndex),i.pushVertex(s),i.pushVertex(c),i.pushVertex(a),i.pushVertex(u),i.__lastRenderCall){var L=i.__lastRenderCall;L.renderStyleIndex==this.we.renderStyleIndex?L.numIndices+=6:(i.pushRenderCall(L),i.__lastRenderCall=new t.RenderCall(L.startIndex+L.numIndices,6,this.we.renderStyleIndex))}else i.__lastRenderCall=new t.RenderCall(0,6,this.we.renderStyleIndex)}e.Ce(1,o,n,r,i)},ue:function(e,o,n,r){switch(this.Bd.Vc){case 0:for(var i=0;i<this.Bd.tc.length;++i)this.qe(this.Bd.tc[i],e,o,n,r);break;case 1:for(i=this.Bd.tc.length;i-- >0;)this.qe(this.Bd.tc[i],e,o,n,r);break;case 2:this.Bd.tc.forEach(function(e){e.depth=t.H(n,e.Ab)}),this.Bd.tc.sort(function(t,e){return t.depth<e.depth?1:t.depth>e.depth?-1:0}),this.Bd.tc.forEach(function(t){this.qe(t,e,o,n,r)},this)}}};var n=function e(o,n,r){var i=this;function s(){this.Fb=0,this.Gb=1,this.Hb=null,this.Ib=null,this.Kb=0,this.Lb=1,i.we.Mb(this),this.Nb=function(){this.Ob=this.Gb,this.Fb=0},this.Nb()}function c(){this.Gb=1,this.Kb=0,this.Lb=1,i.we.Mb(this),this.Nb=function(){this.bc=this.Gb},this.Nb()}function a(){this.Ab=[],this.Pd=[],this.Nd=[],this.gf=[],this.Kc=[]}function u(){}this.Ld=o,this.we=n,s.prototype={Jd:function(){this.Nb()},Id:function(e,n,r){i.we.Pb(e,i,this);var s=i.Rb,c=o.Rb,a=e,u=0;if(this.zb>1e-6){for(var h=this.Ob+e*this.zb;h>=1;){var l=this.zb<.001?0:(1-this.Ob)/this.zb;if(a-=l,s+=l,c+=l,null!=this.Hb&&s>this.Hb){i.disactivate();break}i.Rb=s,o.Rb=c,n&&e>0&&t.ab(i.Ab,n,i.Bb,a/e),r&&e>0&&t.slerpq(i.Mc,r,i.prevRotation,a/e),this.Lb=this.Jb;for(var f=0;f<this.Jb&&0!=i.sc.length;++f){1==this.Jb?this.Kb=0:this.Kb=f/(this.Jb-1);var d=i.sc.pop();i.tc.unshift(d),0==f?d.Yb():d.Zb(),d.Id(a),++u}if(this.Ob=0,h-=1,null!=this.Ib&&++this.Fb>=this.Ib){i.disactivate();break}}this.Ob=h}return s+=a,i.Rb=s,n&&t.T(i.Ab,n),r&&t.U(i.Mc,r),u}},c.prototype={Jd:function(){this.Nb()},Id:function(e,n,r){i.we.Pb(e,i,this);var s=i.Rb,c=s+e,a=o.Rb,u=a+e,h=n?t.O(t.h(n,i.Bb)):0,l=0;if(h>1e-6){for(var f=h/this.rd,d=this.bc+f,p=f<.001?1-this.bc:(1-this.bc)/f,_=[];d>1;){var y=s+p*e;n&&t.ab(_,i.Bb,n,p),i.Rb=y,t.T(i.Ab,_),o.Rb=t.X(a,u,p),this.Lb=this.Jb;for(var v=0;v<this.Jb&&0!=i.sc.length;++v){1==this.Jb?this.Kb=0:this.Kb=v/(this.Jb-1);var b=i.sc.pop();i.tc.unshift(b),0==v?b.Yb():b.Zb(),b.Id(e*(1-p)),++l}p+=1/f,d-=1}this.bc=d}return i.Rb=c,n&&t.T(i.Ab,n),r&&t.U(i.Mc,r),l}},a.prototype={nc:function(){this.oc=!1;for(var t=0;t<this.Kc.length;++t){var e=this.Kc[t];e.Bd.Jd(this.Ab,null),e.Ad.sd&&e.Bd.disactivate()}},Yb:function(){i.we.fd(i,this),this.nc()},Zb:function(){i.we.gd(i,this),this.nc()},Id:function(t){i.we.qc(t,i,this),this.rc(t)},pc:function(t){return this.Kc[t].Bd},rc:function(t){for(var e=0;e<this.Kc.length;e++)this.Kc[e].Bd.Id(t,this.Ab,null)},uc:function(t,n){this.Kc.push({Bd:new e(o,t,r),Ad:n})},vc:function(t,e,o){for(var n=0;n<this.Kc.length;++n){var r=this.Kc[n];e==r.Ad.xc&&r.Bd.Hd(t,o)}},Ce:function(t,e,o,n,r){for(var i=0;i<this.Kc.length;++i){var s=this.Kc[i];t==s.Ad.xc&&s.Bd.ue(e,o,n,r)}},wc:function(){this.oc=!0;for(var t=0;t<this.Kc.length;++t){var e=this.Kc[t];e.Ad.sd?(e.Bd.activate(),e.Bd.Id(0)):e.Bd.disactivate()}},yc:function(t){for(var e=0;e<this.Kc.length;++e)this.Kc[e].Bd.Ed(t)}},u.prototype.Ac=function(t){return i.we.Cc(i,t,this)},this.Ab=[],this.Bb=[],this.Mc=[],this.prevRotation=[],this.tc=[],this.sc=[],this.Wc=new u,this.construct=new r(this.Ld,this),this.Yc=[],this.ad=[],this.dd=function(){this.vd=new s},this.ed=function(){this.vd=new c},this.we.ud(this);for(var h=0;h<this.jd;++h){for(var l=new a,f=0;f<this.Yc.length;++f){var d=this.Yc[f];l.uc(d.Db,d.Ad)}this.sc.push(l)}this.Nb=function(e,o){t.T(this.Ab,e||[0,0,0]),t.T(this.Bb,this.Ab),t.U(this.Mc,o||[0,0,0,1]),t.U(this.prevRotation,this.Mc),this.Rb=0,this.wd=0,this.Zc=!0,this.paused_=!1,this.generatorsPaused_=!1,t.W(this.ad,0,0,0)}};n.prototype.Jd=function(t,e){this.Nb(t,e),this.sc.push.apply(this.sc,this.tc),this.tc.length=0,this.vd.Jd()},n.prototype.Id=function(e,o,n){if(this.paused_)this.Td(o,n);else{if(this.wd=this.Rb,o)if(t.T(this.Bb,this.Ab),e>1e-4){var r=[];t.g(r,o,this.Bb),t.T(this.ad,r),t.w(this.ad,this.ad,e)}else t.W(this.ad,0,0,0);else t.W(this.ad,0,0,0);var i;n&&t.U(this.prevRotation,this.Mc),this.Zc&&!this.generatorsPaused_?i=this.vd.Id(e,o,n):(o&&t.T(this.Ab,o),n&&t.U(this.Mc,n),i=0,this.Rb+=e);for(var s=i;s<this.tc.length;){var c=this.tc[s];if(c.oc){if(c.rc(e),this.xd(s))continue}else if(c.Id(e),this.Wc.Ac(this.tc[s])&&(c.wc(),this.xd(s)))continue;++s}}},n.prototype.xd=function(t){for(var e=this.tc[t],o=!0,n=0;n<e.Kc.length;++n){var r=e.Kc[n].Bd;if(r.activated()||r.tc.length>0){o=!1;break}}return!!o&&(this.sc.push(this.tc[t]),this.tc.splice(t,1),!0)},n.prototype.Hd=function(t,e){this.construct.Hd(t,e)},n.prototype.ue=function(t,e,o,n){this.construct.ue(t,e,o,n)},n.prototype.Td=function(e,o){this.wd=this.Rb,e&&(t.T(this.Bb,this.Ab),t.T(this.Ab,e)),o&&(t.U(this.prevRotation,this.Mc),t.U(this.Mc,o))},n.prototype.uc=function(t,e){this.Yc.push({Db:t,Ad:e})},n.prototype.pause=function(){this.paused_=!0},n.prototype.unpause=function(){this.paused_=!1},n.prototype.paused=function(){return this.paused_},n.prototype.pauseGenerators=function(){this.generatorsPaused_=!0},n.prototype.unpauseGenerators=function(){this.generatorsPaused_=!1},n.prototype.generatorsPaused=function(){return this.generatorsPaused_},n.prototype.activate=function(){this.Zc=!0},n.prototype.disactivate=function(){this.Zc=!1},n.prototype.activated=function(){return this.Zc},n.prototype.getNumParticles=function(){return this.tc.length};var r=function(){this._init=function(e,o,r,i,s){this.model=e,this.Ab=[],this.Mc=[],this.od=[],this.pd=function(t){var e=new n(this,t,i);e.Nb(this.Ab,this.Mc),this["_".concat(t.name)]=e,this.od.push(e)},this.Nb=function(e,o){this.Cd=0,this.Rb=0,t.T(this.Ab,e||[0,0,0]),t.U(this.Mc,o||[0,0,0,1])},this.Nb(o,r),this.model.qd(this),this._presimNeeded=!0,s.generatorsPaused&&this.pauseGeneratorsInAllEmitters(),s.paused?this.pauseAllEmitters():(this.zeroUpdate(),this.update(this.Ud,o,r),this._presimNeeded=!1)}};r.prototype.restart=function(t,e,o){this.Nb(t||this.Ab,e||this.Mc),this._presimNeeded=!0;for(var n=0;n<this.od.length;++n)this.od[n].Jd(this.Ab,this.Mc);this._presimNeeded=!0,o&&o.generatorsPaused&&this.pauseGeneratorsInAllEmitters(),o&&o.paused?this.pauseAllEmitters():(this.zeroUpdate(),this.update(this.Ud,this.Ab,this.Mc),this._presimNeeded=!1)},r.prototype.zeroUpdate=function(){for(var t=0;t<this.od.length;++t)this.od[t].Id(0,this.Ab,this.Mc)},r.prototype.update=function(t,e,o){this.Dd>0?this.updateFixed(t,e,o):this.updateFlex(t,e,o)},r.prototype.updateFixed=function(e,o,n){var r=0,i=[];t.T(i,this.Ab);var s=[];for(t.U(s,this.Mc),o&&t.equalv3_(o,this.Ab)&&(o=null),n&&t.equalq_(n,this.Mc)&&(n=null);e-r+this.Cd>=this.Dd;){var c=this.Rb;o&&t.ab(i,this.Ab,o,r/e),n&&t.slerpq(s,this.Mc,n,r/e);for(var a=0;a<this.od.length;++a)this.od[a].Id(this.Dd,i,s),this.Rb=c;r+=this.Dd-this.Cd,this.Cd=0,this.Rb=c+this.Dd}o&&t.T(this.Ab,o),n&&t.U(this.Mc,n),this.Cd+=e-r},r.prototype.updateFlex=function(e,o,n){for(var r=this.Rb,i=0;i<this.od.length;++i)this.od[i].Id(e,o,n),this.Rb=r;this.Rb=r+e,o&&t.T(this.Ab,o),n&&t.U(this.Mc,n)},r.prototype.resetPosition=function(e,o){e&&t.T(this.Ab,e),o&&t.U(this.Mc,o);for(var n=0;n<this.od.length;++n)this.od[n].Td(this.Ab,this.Mc)},r.prototype.setPropertyInAllEmitters=function(e,o){var n="_".concat(e);if(o instanceof Array)if(2==o.length)for(var r=0;r<this.od.length;++r)t.S(this.od[r][n],o);else for(r=0;r<this.od.length;++r)t.T(this.od[r][n],o);else for(r=0;r<this.od.length;++r)this.od[r][n]=o},r.prototype.pauseAllEmitters=function(){for(var t=0;t<this.od.length;++t)this.od[t].pause()},r.prototype.unpauseAllEmitters=function(){for(var t=0;t<this.od.length;++t)this.od[t].unpause();this.zeroUpdate(),this._presimNeeded&&(this.update(this.Ud,this.Ab,this.Mc),this._presimNeeded=!1)},r.prototype.areAllEmittersPaused=function(){for(var t=0;t<this.od.length;++t)if(!this.od[t].paused())return!1;return!0},r.prototype.pauseGeneratorsInAllEmitters=function(){for(var t=0;t<this.od.length;++t)this.od[t].pauseGenerators()},r.prototype.unpauseGeneratorsInAllEmitters=function(){for(var t=0;t<this.od.length;++t)this.od[t].unpauseGenerators()},r.prototype.areGeneratorsInAllEmittersPaused=function(){for(var t=0;t<this.od.length;++t)if(!this.od[t].generatorsPaused())return!1;return!0},r.prototype.getNumParticles=function(){for(var t=0,e=0;e<this.od.length;++e)t+=this.od[e].getNumParticles();return t};var i=function t(){this._init=function(e,n,r,i,s){t.prototype._init.call(this,e,n,r,o,s),this.texturesRemap=[];for(var c,a=[],u=0;u<this.model.Xe;++u)c=4*u,a.push(c+0,c+3,c+1,c+1,c+3,c+2);this.renderBuffer=i,this.renderBuffer.initialize(4*this.model.Xe,[2],a,this.model.Xe),this.renderBuffer.__numIndices=0}};(i.prototype=new r).fillGeometryBuffers=function(t,e,o){this.renderBuffer.cleanup(),this.renderBuffer.__lastRenderCall=null,this.od.forEach(function(n){n.ue(t,e,o,this.renderBuffer)},this),this.renderBuffer.__lastRenderCall&&this.renderBuffer.pushRenderCall(this.renderBuffer.__lastRenderCall)};var s=function t(){this._init=function(o,n,r,i){t.prototype._init.call(this,o,n,r,e,i),this.materials=[],this.model.materials.forEach(function(t){this.materials.push(["source-over","lighter","multiply"][t])},this),this.textureDescs=[]}};function c(){var e=[],o=[],n=[];this.pe=[{xe:0,Rc:1,Sc:1,renderStyleIndex:0}],this.name="DefaultEmitter",this.ud=function(t){t.dd(),t.jd=100,t.Vc=0},this.Mb=function(t){t.zb=10,t.Gb=1,t.Jb=1},this.Pb=function(t,e,o){o.zb=10},this.fd=function(n,r){r._=0,t.W(e,0,0,0),r._2=[],t.c(r._2,n.Ab,e),t.randv3gen(o,100,n.Ld.rand),r._4=[],t.T(r._4,o),r._5=0,t.T(r.Ab,r._2)},this.gd=function(n,r){r._=0,t.W(e,0,0,0),r._2=[],t.c(r._2,n.Ab,e),t.randv3gen(o,100,n.Ld.rand),r._4=[],t.T(r._4,o),r._5=0,t.T(r.Ab,r._2)},this.qc=function(e,o,r){r._+=e,t.T(n,r._4),t.u(n,n,e),t.c(n,n,r._2),t.T(r._2,n),t.T(r.Ab,r._2),t.S(r.Pd,[.5,.5]),r.Md=r._5,t.V(r.Nd,30,30),t.T(r.gf,[1,1,1]),r.Od=1,r.Qc=0},this.Cc=function(t,e){return e._>2}}(s.prototype=new r).draw=function(t,e){for(var o=0;o<this.od.length;++o)this.od[o].Hd(t,e)},this.createWGLInstance=function(t,e,o,n){var r=new i;return r._init(this,t,e,o,n||{}),r},this.createCanvas2DInstance=function(t,e,o){var n=new s;return n._init(this,t,e,o||{}),n},this.textures=["sparkleBlink.png"],this.materials=[0],this.renderStyles=[{materialIndex:0,textureIndices:[0]}],this.Xe=100,this.qd=function(t){t.Dd=.0333333,t.Ud=0,t.rand=function(){return Math.random()},t.pd(new c)}}}),cc._RF.pop()},{}],NodeController:[function(t,e,o){"use strict";cc._RF.push(e,"583f8lznOlEMIzaakSFrhxZ","NodeController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Scene1_ScratchAble=[],e.Scene2_ScratchAble=[],e.Scene3_ScratchAble=[],e.content=null,e.Point=null,e.hideMask=null,e.shape_wrong=null,e.FX_confetti=null,e.Scenes=[],e}return r(e,t),e.prototype.start=function(){var t=this;this.content.children.forEach(function(e){return e.name.includes("Scene")&&t.Scenes.push(e)}),this.Scene1_ScratchAble=this.Scenes[0].getComponentsInChildren("Scratchable"),this.Scene2_ScratchAble=this.Scenes[1].getComponentsInChildren("Scratchable"),this.Scene3_ScratchAble=this.Scenes[2].getComponentsInChildren("Scratchable"),this.shape_wrong=this.content.getChildByName("shape"),this.FX_confetti=this.content.getChildByName("ConfettiBase").getComponentInChildren(cc.ParticleSystem)},i([a(cc.Node)],e.prototype,"content",void 0),i([a(cc.Node)],e.prototype,"Point",void 0),i([a(cc.Node)],e.prototype,"hideMask",void 0),i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],Responsive:[function(t,e,o){"use strict";cc._RF.push(e,"d5c01VUSP5G8p7xJENgTwyO","Responsive");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Data/constants"),c=cc._decorator,a=c.ccclass,u=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BG=null,e.scratchable=null,e.CTA_Btn=null,e.CTA_logo=null,e.device="",e.isRotate=!1,e.HORIZONTAL_IPX="horizontal_IPX",e.HORIZONTAL_TABLET="horizontal_Tablet",e.VERTICAL_IPX="vertical_IPX",e.VERTICAL_MOBILE="vertical_Mobile",e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.handleRotate=function(){cc.view.getFrameSize().width>cc.view.getFrameSize().height?(this.isRotate=!0,this.setHorizontal()):(this.isRotate=!1,this.setVertical())},e.prototype.setHorizontal=function(){cc.view.getFrameSize().height/cc.view.getFrameSize().width<.65?this.setHorizontalForIpX():this.setHorizontalForTablet()},e.prototype.setHorizontalForIpX=function(){this.HORIZONTAL_IPX!==this.device&&(this.device=this.HORIZONTAL_IPX,s.Constants.Responsive.currentDevice="horizon_Tablet",this.CTA_logo.scale=.3,this.CTA_Btn.scale=.5)},e.prototype.setHorizontalForTablet=function(){this.HORIZONTAL_TABLET!==this.device&&(this.device=this.HORIZONTAL_TABLET,s.Constants.Responsive.currentDevice="horizon_Tablet",this.CTA_logo.scale=.3,this.CTA_Btn.scale=.5)},e.prototype.setVertical=function(){cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5?this.setIphoneX():this.setMobile()},e.prototype.setIphoneX=function(){this.VERTICAL_IPX!==this.device&&(this.device=this.VERTICAL_IPX,s.Constants.Responsive.currentDevice="vertical_mobile",this.CTA_logo.scale=.23,this.CTA_Btn.scale=.4)},e.prototype.setMobile=function(){this.VERTICAL_MOBILE!==this.device&&(this.device=this.VERTICAL_MOBILE,s.Constants.Responsive.currentDevice="vertical_mobile",this.CTA_logo.scale=.23,this.CTA_Btn.scale=.4)},e.prototype.unActiveLogo=function(){},e.prototype.update=function(){this.handleRotate()},i([u(cc.Node)],e.prototype,"BG",void 0),i([u(cc.Node)],e.prototype,"scratchable",void 0),i([u(cc.Node)],e.prototype,"CTA_Btn",void 0),i([u(cc.Node)],e.prototype,"CTA_logo",void 0),i([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Data/constants":"constants"}],Scratchable:[function(t,e){"use strict";cc._RF.push(e,"836a9YKgBxFXYKE5BcLsYH1","Scratchable"),cc.Class({extends:cc.Component,properties:{isDone:0,isWin:cc.Boolean,eraserRadius:{type:cc.Int,default:60}},start:function(){this.percentToWin=2;var t=this.getComponentInChildren(cc.Mask);this.graphics=t._graphics,this.graphics.fillColor=cc.color(255,255,255,0),this.reset()},calculateProgress:function(){if(this.isScratchable){var t=0;this.polygonPointsList.forEach(function(e){e.isHit&&(t+=1)}),this.progress=t/this.polygonPointsList.length,this.progress>=this.percentToWin&&(this.isWin=!0,this.isDone=1),this.isWin&&(this.fillInstantly(),this.completed=!0,this.isScratchable=!1,this.node.dispatchEvent(new cc.Event.EventCustom("completed",this)))}},reset:function(){this.callbackFlag=!0,this.graphics.clear(),this.tempDrawPoints=[],this.polygonPointsList=[],this.progress=0,this.completed=!1,this.isScratchable=!0,this.initPolygonList()},initPolygonList:function(){for(var t=0;t<this.node.width;t+=this.eraserRadius)for(var e=0;e<this.node.height;e+=this.eraserRadius)this.polygonPointsList.push({rect:cc.rect(t-this.node.width/2,e-this.node.height/2,this.eraserRadius,this.eraserRadius),isHit:!1})},scratchHole:function(t){t=this.node.convertToNodeSpaceAR(t);var e=this.graphics,o=this.tempDrawPoints.length;if(this.tempDrawPoints.push(t),this.calculateProgress(),o<=1)e.circle(t.x,t.y,this.eraserRadius/2),e.fill(),this.polygonPointsList.forEach(function(e){if(!e.isHit){var o=t.x>e.rect.x&&t.x<e.rect.x+e.rect.width,n=t.y>e.rect.y&&t.y<e.rect.y+e.rect.height;o&&n&&(e.isHit=!0)}});else{var n=this.tempDrawPoints[o-2],r=this.tempDrawPoints[o-1];e.moveTo(n.x,n.y),e.lineTo(r.x,r.y),e.lineWidth=this.eraserRadius,e.lineCap=cc.Graphics.LineCap.ROUND,e.lineJoin=cc.Graphics.LineJoin.ROUND,e.strokeColor=cc.color(255,255,255,255),e.stroke(),this.polygonPointsList.forEach(function(t){t.isHit=t.isHit||cc.Intersection.lineRect(n,r,t.rect)})}},resetProgress:function(){this.clearInstantly(),this.polygonPointsList=[],this.tempDrawPoints=[],this.progress=0,this.initPolygonList()},isInBound:function(){return!0},clearInstantly:function(){this.graphics.clear()},fillInstantly:function(){this.graphics.moveTo(0,0),this.graphics.rect(0,0,this.node.width,this.node.height),this.graphics.fill()}}),cc._RF.pop()},{}],TouchAreaController:[function(t,e,o){"use strict";cc._RF.push(e,"cb238j6V3ZEJ5t9cUnXoMCl","TouchAreaController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Data/constants"),c=t("../Plugin/AudioManager"),a=t("./GameController"),u=t("./GamePlay"),h=t("./NodeController"),l=cc._decorator,f=l.ccclass,d=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GamePlay=null,e.AudioManager=null,e.GameController=null,e.NodeController=null,e.CTA_Btn=null,e.CTA_Overlay=null,e.isTouch=!1,e.isActiveCTA=!1,e.startTouchPos=null,e}return r(e,t),e.prototype.start=function(){this.registerEvent()},e.prototype.registerEvent=function(){this.NodeController.hideMask.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.NodeController.hideMask.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.NodeController.hideMask.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.NodeController.hideMask.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.CTA_Btn.on(cc.Node.EventType.TOUCH_START,this.GameController.installHandle,this),this.CTA_Overlay.on(cc.Node.EventType.TOUCH_START,this.GameController.installHandle,this)},e.prototype.touchStart=function(t){if(this.GamePlay.playYameteKudasaiSound(),this.GamePlay.handleIronSourcePlaySound(),s.Constants.isCanTouch){this.isTouch=!0,this.NodeController.Point.active=!0,!s.Constants.isDoneEraser&&this.AudioManager.playSound(s.Constants.SoundTrack.eraserSound);var e=t.getLocation(),o=this.node.convertToNodeSpaceAR(e);this.NodeController.Point.getComponent(cc.Animation).stop(),this.NodeController.Point.setPosition(o),this.startTouchPos=o}},e.prototype.touchMove=function(t){if(s.Constants.isCanTouch&&this.isTouch){var e=t.getLocation(),o=this.node.convertToNodeSpaceAR(e);this.NodeController.Point.setPosition(o)}},e.prototype.touchEnd=function(){if(s.Constants.isCanTouch&&this.isTouch){var t;switch(this.isTouch=!1,this.AudioManager.stopSound(s.Constants.SoundTrack.eraserSound),s.Constants.currentLv){case 1:t=this.NodeController.Scene1_ScratchAble.filter(function(t){return t.progress>=.05});break;case 2:t=this.NodeController.Scene2_ScratchAble.filter(function(t){return t.progress>=.05});break;case 3:t=this.NodeController.Scene3_ScratchAble.filter(function(t){return t.progress>=.05})}t?(t.length>=2&&this.GamePlay.handleDeleteWrong(this.startTouchPos,t),1===t.length&&this.GamePlay.filterCorrectResult(t[0],this.startTouchPos),cc.log("check Result..")):this.GamePlay.handleDeleteWrong(this.startTouchPos,t)}},e.prototype.unActivePoint=function(){this.NodeController.Point.active=!1},e.prototype.offEvent=function(){this.isActiveCTA=!1,this.NodeController.hideMask.off(cc.Node.EventType.TOUCH_START),this.NodeController.hideMask.off(cc.Node.EventType.TOUCH_MOVE),this.NodeController.hideMask.off(cc.Node.EventType.TOUCH_END),this.NodeController.hideMask.off(cc.Node.EventType.TOUCH_CANCEL)},e.prototype.update=function(){this.GamePlay.handleMuteSoundIronSource()},i([d(u.default)],e.prototype,"GamePlay",void 0),i([d(c.default)],e.prototype,"AudioManager",void 0),i([d(a.GameController)],e.prototype,"GameController",void 0),i([d(h.default)],e.prototype,"NodeController",void 0),i([d(cc.Node)],e.prototype,"CTA_Btn",void 0),i([d(cc.Node)],e.prototype,"CTA_Overlay",void 0),i([f],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager","./GameController":"GameController","./GamePlay":"GamePlay","./NodeController":"NodeController"}],constants:[function(t,e,o){"use strict";cc._RF.push(e,"d0b68xTANVBsaIBjAI8Yj1K","constants"),Object.defineProperty(o,"__esModule",{value:!0}),o.Constants=void 0;var n,r=cc._decorator;r.ccclass,r.property,function(t){t.touchStart="touchstart",t.touchMove="touchmove",t.touchEnd="touchend",t.touchCancel="touchcancel"}(n||(n={}));var i,s={SoundState:!0,State:1,isEndGame:!1,isPlayBgSound:!1},c={calculated:0,currentDevice:""};(function(t){t.bgSound="bgSound",t.eraserSound="eraserSound",t.successSound="successSound",t.moveSound="moveSound",t.fireworksSound="fireworksSound",t.clickSound="clickSound",t.SheepSound1="SheepSound1",t.SheepSound2="SheepSound2",t.LoseSound="LoseSound",t.femaleLaughSound="femaleLaughSound",t.fightSound="fightSound"})(i||(i={}));var a=function(){function t(){}return t.isClickGameStart=!1,t.isRotate=!1,t.isCanTouch=!0,t.isDoneEraser=!1,t.currentLv=null,t.touchPoint=null,t.Event=n,t.SoundTrack=i,t.ironSource=s,t.Responsive=c,t}();o.Constants=a,cc._RF.pop()},{}],"neutrinoparticles.umd":[function(require,module,exports){"use strict";var global,factory;cc._RF.push(module,"ab558HOKv9Bq5K2NwBWDZL+","neutrinoparticles.umd"),global=void 0,factory=function(exports){function Context(){var ctx=this;function colorCompToHex_(t){return t<16?"0"+t.toString(16):t.toString(16)}this.equalv3_=function(t,e){return t[0]==e[0]&&t[1]==e[1]&&t[2]==e[2]},this.equalq_=function(t,e){return t[0]==e[0]&&t[1]==e[1]&&t[2]==e[2]&&t[3]==e[3]},this.a=function(t,e,o){t[0]=e[0]+o[0],t[1]=e[1]+o[1]},this.b=function(t,e){return[t[0]+e[0],t[1]+e[1]]},this.y=function(t,e,o){t[0]=e[0]+o,t[1]=e[1]+o},this.z=function(t,e){return[t[0]+e,t[1]+e]},this.c=function(t,e,o){t[0]=e[0]+o[0],t[1]=e[1]+o[1],t[2]=e[2]+o[2]},this.d=function(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]},this.C=function(t,e,o){t[0]=e[0]+o,t[1]=e[1]+o,t[2]=e[2]+o},this.D=function(t,e){return[t[0]+e,t[1]+e,t[2]+e]},this.addq=function(t,e,o){t[0]=e[0]+o[0],t[1]=e[1]+o[1],t[2]=e[2]+o[2],t[3]=e[3]+o[3]},this.addq_=function(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2],t[3]+e[3]]},this.e=function(t,e,o){t[0]=e[0]-o[0],t[1]=e[1]-o[1]},this.f=function(t,e){return[t[0]-e[0],t[1]-e[1]]},this.A=function(t,e,o){t[0]=e[0]-o,t[1]=e[1]-o},this.B=function(t,e){return[t[0]-e,t[1]-e]},this.nf=function(t,e,o){t[0]=e-o[0],t[1]=e-o[1]},this.of=function(t,e){return[t-e[0],t-e[1]]},this.g=function(t,e,o){t[0]=e[0]-o[0],t[1]=e[1]-o[1],t[2]=e[2]-o[2]},this.h=function(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]},this.E=function(t,e,o){t[0]=e[0]-o,t[1]=e[1]-o,t[2]=e[2]-o},this.F=function(t,e){return[t[0]-e,t[1]-e,t[2]-e]},this.rf=function(t,e,o){t[0]=e-o[0],t[1]=e-o[1],t[2]=e-o[2]},this.sf=function(t,e){return[t-e[0],t-e[1],t-e[2]]},this.i=function(t,e,o){t[0]=e[0]*o[0],t[1]=e[1]*o[1]},this.j=function(t,e){return[t[0]*e[0],t[1]*e[1]]},this.k=function(t,e,o){t[0]=e[0]*o[0],t[1]=e[1]*o[1],t[2]=e[2]*o[2]},this.l=function(t,e){return[t[0]*e[0],t[1]*e[1],t[2]*e[2]]},this.m=function(t,e,o){t[0]=e[0]/o[0],t[1]=e[1]/o[1]},this.n=function(t,e){return[t[0]/e[0],t[1]/e[1]]},this.o=function(t,e,o){t[0]=e[0]/o[0],t[1]=e[1]/o[1],t[2]=e[2]/o[2]},this.p=function(t,e){return[t[0]/e[0],t[1]/e[1],t[2]/e[2]]},this.H=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},this.dotq_=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},this.q=function(t,e,o){t[0]=e[0]*o,t[1]=e[1]*o},this.r=function(t,e){return[t[0]*e,t[1]*e]},this.s=function(t,e,o){t[0]=e[0]/o,t[1]=e[1]/o},this.t=function(t,e){return[t[0]/e,t[1]/e]},this.u=function(t,e,o){t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o},this.v=function(t,e){return[t[0]*e,t[1]*e,t[2]*e]},this.w=function(t,e,o){t[0]=e[0]/o,t[1]=e[1]/o,t[2]=e[2]/o},this.x=function(t,e){return[t[0]/e,t[1]/e,t[2]/e]},this.y=function(t,e,o){t[0]=e[0]+o,t[1]=e[1]+o},this.z=function(t,e){return[t[0]+e,t[1]+e]},this.A=function(t,e,o){t[0]=e[0]-o,t[1]=e[1]-o},this.B=function(t,e){return[t[0]-e,t[1]-e]},this.G=function(t,e){return t[0]*e[0]+t[1]*e[1]},this.H=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},this.I=function(t,e,o){var n=e[0],r=e[1],i=e[2],s=o[0],c=o[1],a=o[2];t[0]=r*a-i*c,t[1]=i*s-n*a,t[2]=n*c-r*s},this.J=function(t,e){var o=t[0],n=t[1],r=t[2],i=e[0],s=e[1],c=e[2];return[n*c-r*s,r*i-o*c,o*s-n*i]},this.K=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},this.L=function(t){return t[0]*t[0]+t[1]*t[1]},this.M=function(t,e){ctx.q(t,e,1/ctx.K(e))},this.N=function(t){return ctx.r(t,1/ctx.K(t))},this.O=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},this.P=function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},this.Q=function(t,e){ctx.u(t,e,1/ctx.O(e))},this.R=function(t){return ctx.v(t,1/ctx.O(t))},this.S=function(t,e){t[0]=e[0],t[1]=e[1]},this.T=function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2]},this.U=function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]},this.V=function(t,e,o){t[0]=e,t[1]=o},this.W=function(t,e,o,n){t[0]=e,t[1]=o,t[2]=n},this.X=function(t,e,o){return t+(e-t)*o},this.Y=function(t,e,o,n){t[0]=e[0]+(o[0]-e[0])*n,t[1]=e[1]+(o[1]-e[1])*n},this.Z=function(t,e,o){return[t[0]+(e[0]-t[0])*o,t[1]+(e[1]-t[1])*o]},this.ab=function(t,e,o,n){t[0]=e[0]+(o[0]-e[0])*n,t[1]=e[1]+(o[1]-e[1])*n,t[2]=e[2]+(o[2]-e[2])*n},this.bb=function(t,e,o){return[t[0]+(e[0]-t[0])*o,t[1]+(e[1]-t[1])*o,t[2]+(e[2]-t[2])*o]},this.slerpq=function(t,e,o,n){var r=ctx.dotq_(e,o),i=[];if(r<0?(ctx.negq(i,o),r=-r):ctx.U(i,o),1-r<Number.EPSILON)t[0]=ctx.X(e[0],o[0],n),t[1]=ctx.X(e[1],o[1],n),t[2]=ctx.X(e[2],o[2],n),t[3]=ctx.X(e[3],o[3],n);else{var s=ctx.acos_(r);ctx.mulqscalar(t,ctx.addq_(ctx.mulqscalar_(e,ctx.sin_((1-n)*s)),ctx.mulqscalar_(i,ctx.sin_(n*s))),1/ctx.sin_(s))}},this.slerpq_=function(t,e,o){var n=[];return slerpq(n,t,e,o),n},this.acos_=function(t){return Math.acos(t)},this.sin_=function(t){return Math.sin(t)},this.cos_=function(t){return Math.cos(t)},this.taus88=function(t){var e,o,n;t||(t=0),this.seed=function(t){e=(t&=4294967295)<2?t+2:t,o=t<8?t+8:t,n=t<16?t+16:t},this.rand=function(){var t=(4294967295&(e<<13^e))>>>19;return(((e=((4294967294&e)<<12^t)>>>0)^(o=((4294967288&o)<<4^(t=(4294967295&(o<<2^o))>>>25))>>>0)^(n=((4294967280&n)<<17^(t=(4294967295&(n<<3^n))>>>11))>>>0))>>>0)/4294967296},this.seed(t)},this.cb=function(t,e){this.randv2gen(t,e,function(){return Math.random()})},this.randv2gen=function(t,e,o){var n=o()*Math.PI*2;t[0]=e*ctx.cos_(n),t[1]=e*ctx.sin_(n)},this.db=function(t,e){this.randv3gen(t,e,function(){return Math.random()})},this.randv3gen=function(t,e,o){var n=o()*Math.PI*2,r=2*o()-1,i=e*Math.sqrt(1-r*r);t[0]=i*ctx.cos_(n),t[1]=i*ctx.sin_(n),t[2]=e*r},this.yb=function(t,e,o,n,r){var i=e+r()*n[0],s=o+r()*n[1];ctx.V(t,i,s)},this.eb=function(t,e){ctx.V(-e[0],-e[1])},this.fb=function(t){return[-t[0],-t[1]]},this.gb=function(t,e){ctx.W(-e[0],-e[1],-e[2])},this.hb=function(t){return[-t[0],-t[1],-t[2]]},this.negq=function(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3]},this.negq_=function(t){return[-t[0],-t[1],-t[2],-t[3]]},this.ib=function(t){return t/180*Math.PI},this.jb=function(t){return t/Math.PI*180},this.Ae=function(t){return t<0?-1:1},this.ob=function(t,e,o,n){var r=2*n[0]*n[0],i=2*n[1]*n[1],s=2*n[2]*n[2],c=2*n[0]*n[1],a=2*n[0]*n[2],u=2*n[1]*n[2],h=2*n[3]*n[2],l=2*n[3]*n[1],f=2*n[3]*n[0];t[0]=1-i-s,t[1]=c+h,t[2]=a-l,e[0]=c-h,e[1]=1-r-s,e[2]=u+f,o[0]=a+l,o[1]=u-f,o[2]=1-r-i},this.pb=function(t,e,o,n){var r=e[0]+o[1]+n[2];if(r>0){var i=2*Math.sqrt(r+1);t[3]=.25*i,t[0]=(o[2]-n[1])/i,t[1]=(n[0]-e[2])/i,t[2]=(e[1]-o[0])/i}else e[0]>o[1]&e[0]>n[2]?(i=2*Math.sqrt(1+e[0]-o[1]-n[2]),t[3]=(o[2]-n[1])/i,t[0]=.25*i,t[1]=(e[1]+o[0])/i,t[2]=(n[0]+e[2])/i):o[1]>n[2]?(i=2*Math.sqrt(1+o[1]-e[0]-n[2]),t[3]=(n[0]-e[2])/i,t[0]=(e[1]+o[0])/i,t[1]=.25*i,t[2]=(o[2]+n[1])/i):(i=2*Math.sqrt(1+n[2]-e[0]-o[1]),t[3]=(e[1]-o[0])/i,t[0]=(n[0]+e[2])/i,t[1]=(o[2]+n[1])/i,t[2]=.25*i)},this.axes2quat=this.pb,this.qb=function(t,e,o){var n=.5*ctx.ib(o),r=Math.sin(n);t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=Math.cos(n)},this.axisangle2quat=this.qb,this.axisangle2quat_=function(t,e){var o=.5*ctx.ib(e),n=Math.sin(o);return[t[0]*n,t[1]*n,t[2]*n,ctx.cos_(o)]},this.axisangle2quat_=this.axisangle2quat_,this.rb=function(t,e,o){var n=e[0],r=e[1],i=e[2],s=o[0],c=o[1],a=o[2],u=o[3],h=u*n+c*i-a*r,l=u*r+a*n-s*i,f=u*i+s*r-c*n,d=-s*n-c*r-a*i;t[0]=h*u+d*-s+l*-a-f*-c,t[1]=l*u+d*-c+f*-s-h*-a,t[2]=f*u+d*-a+h*-c-l*-s},this.sb=function(t,e,o){var n=e[0],r=e[1],i=e[2],s=e[3],c=o[0],a=o[1],u=o[2],h=o[3];t[0]=n*h+s*c+r*u-i*a,t[1]=r*h+s*a+i*c-n*u,t[2]=i*h+s*u+n*a-r*c,t[3]=s*h-n*c-r*a-i*u},this.mulqscalar=function(t,e,o){t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o},this.mulqscalar_=function(t,e){return[t[0]*e,t[1]*e,t[2]*e,t[3]*e]},this.tb=function(t,e,o,n,r){var i=ctx.ib(o),s=Math.cos(i)*n,c=Math.sin(i)*n;t[0]=e[0]+s*r[0]-c*r[1],t[1]=e[1]+c*r[0]+s*r[1]},this.ub=function(t,e,o,n,r){var i=ctx.ib(o),s=Math.cos(i)/n,c=Math.sin(i)/n;t[0]=s*r[0]+c*r[1]-e[0]*s-e[1]*c,t[1]=s*r[1]-c*r[0]+e[0]*c-e[1]*s},this.vb=function(t){return t<0?Math.floor(ctx.yd-1+t%ctx.yd):Math.floor(t%ctx.yd)},this.ff=function(t){return"#"+colorCompToHex_(Math.floor(255*t[0]))+colorCompToHex_(Math.floor(255*t[1]))+colorCompToHex_(Math.floor(255*t[2]))},this.tf=function(t,e,o,n,r,i){var s=ctx.f(n,t),c=ctx.f(r,t),a=ctx.r(e,o);if(s[0]<-a[0]&&c[0]<-a[0]||s[0]>a[0]&&c[0]>a[0]||s[1]<-a[1]&&c[1]<-a[1]||s[1]>a[1]&&c[1]>a[1])return!1;if(s[0]<=a[0]&&s[0]>=-a[0]&&s[1]<=a[1]&&s[1]>=-a[1])return!0;if(i<1e-6)return!1;if(c[0]<=a[0]&&c[0]>=-a[0]&&c[1]<=a[1]&&c[1]>=-a[1])return!0;var u=ctx.f(r,n);ctx.s(u,u,i);var h=[-u[1],u[0]],l=Math.abs(ctx.G(h,c));if(Math.abs(ctx.G(h,a))>=l){var f=[-e[1],e[0]];if(ctx.G(f,s)*ctx.G(f,c)<=0)return!0}else if(Math.abs(ctx.G(h,[a[0],-a[1]]))>=l){var d=[e[1],e[0]];if(ctx.G(d,s)*ctx.G(d,c)<=0)return!0}return!1},this.uf=function(t,e,o,n,r,i,s){var c=ctx.f(n,t),a=ctx.f(r,t),u=ctx.r(e,o);if(i<1e-6)return!1;if(c[0]<-u[0]&&a[0]<-u[0]||c[0]>u[0]&&a[0]>u[0]||c[1]<-u[1]&&a[1]<-u[1]||c[1]>u[1]&&a[1]>u[1])return!1;var h=ctx.f(r,n);ctx.s(h,h,i);var l=[-h[1],h[0]],f=Math.abs(ctx.G(l,a));if(s){if(Math.abs(ctx.G(l,u))>=f){var d=[-e[1],e[0]];if(ctx.G(d,c)*ctx.G(d,a)<=0)return!0}}else if(Math.abs(ctx.G(l,[u[0],-u[1]]))>=f){var p=[e[1],e[0]];if(ctx.G(p,c)*ctx.G(p,a)<=0)return!0}return!1},this.wb=function(t,e,o,n){var r=3*(o*ctx.yd+e),i=ctx.zd[n];t[0]=i.getUint8(r),t[1]=i.getUint8(r+1),t[2]=i.getUint8(r+2)},this.xb=function(t,e){if(null!=ctx.zd){var o=e[0]*ctx.yd,n=e[1]*ctx.yd,r=e[2]*ctx.yd,i=Math.floor(o),s=Math.floor(n),c=Math.floor(r),a=o-i,u=n-s,h=r-c,l=ctx.vb(i),f=ctx.vb(i+1),d=ctx.vb(s),p=ctx.vb(s+1),_=ctx.vb(c),y=ctx.vb(c+1),v=[],b=[],m=[],g=[],x=[],S=[],C=[],A=[];ctx.wb(v,l,d,_),ctx.wb(b,l,d,y),ctx.wb(m,l,p,_),ctx.wb(g,l,p,y),ctx.wb(x,f,d,_),ctx.wb(S,f,d,y),ctx.wb(C,f,p,_),ctx.wb(A,f,p,y);var w=[],P=[],N=[],B=[];ctx.ab(w,v,b,h),ctx.ab(P,m,g,h),ctx.ab(N,x,S,h),ctx.ab(B,C,A,h);var T=[],O=[];ctx.ab(T,w,P,u),ctx.ab(O,N,B,u),ctx.ab(t,T,O,a)}else ctx.W(t,128,128,128)},this.ImageDesc=function(t,e,o,n,r){this.image=t,this.x=e,this.y=o,this.width=n,this.height=r},this.RenderCall=function(t,e,o){this.startIndex=t,this.numIndices=e,this.renderStyleIndex=o},this.SubRect=function(t,e,o,n){this.x=t,this.y=e,this.width=o,this.height=n},this.Camera2D=function(){},this.Camera2D.prototype.tb=function(){return!0},this.Camera3D=function(t,e){this.Qd=ctx.r(t,.5),this.z=-.5*t[0]/Math.tan(ctx.ib(.5*e))},this.Camera3D.prototype.transform=function(t,e){if(t[2]<this.z)return!1;var o=-this.z/(t[2]-this.z);return ctx.a(t,ctx.r(ctx.f(t,this.Qd),o),this.Qd),ctx.q(e,e,o),!0},this.zd=null,this.yd=0,this.initializeNoise=function(t,e,o){if(t||alert("path should be defined"),null==this.zd){null!=t&&null!=t||(t=this.defaultPath);var n=new XMLHttpRequest;n.open("GET",t+"neutrinoparticles.noise.bin",!0),n.responseType="arraybuffer",n.ctx=this,n.onreadystatechange=function(){if(4==n.readyState)if(n.status>=200&&n.status<300||304==n.status){var t=n.response,r=n.ctx,i=new DataView(t,0,4).getUint32(0,!0);r.zd=[],r.yd=i;for(var s=0;s<i;++s)r.zd[s]=new DataView(t,4+3*i*i*s);e&&e()}else o&&o()},n.send()}else e()},this.NoiseGenerator=function(){for(var t,e,o,n,r,i,s,c=function(t,e,o,n,r){return.5*(2*e+(-t+o)*r+(2*t-5*e+4*o-n)*r*r+(3*e-t-3*o+n)*r*r*r)},a=function(t,e,o,n,r){return[c(t[0],e[0],o[0],n[0],r),c(t[1],e[1],o[1],n[1],r),c(t[2],e[2],o[2],n[2],r)]},u=function(t,e,o){return t<e?e:t>o?o:t},h=[],l=[],f=new ctx.taus88(120),d=function(){return f.rand()},p=.7,_=64,y=0,v=0,b=_>>>1;b>0;b>>>=1){var m=Math.floor(64/b);y+=m*m}var g=0;this.progress=0;var x=function(){for(var t=0;t<64;++t)for(var e=h[t]=[],o=0;o<64;++o)for(var n=e[o]=[],r=0;r<64;++r)n[r]=[0,0,0];g=1,this.progress=.01},S=function(){t=_>>>1,e=Math.floor(64/t),o=e*e,n=Math.max(e-1,1),r=e*e*e,i=0,s=0;for(var c=0;c<r;++c)l[c]=[],l[c][2]=2*d()-1,l[c][1]=2*d()-1,l[c][0]=2*d()-1;g=2},C=function(){for(var r=0;r<e;++r)for(var c=i-1>>>0&n,f=i>>>0&n,d=i+1>>>0&n,b=i+2>>>0&n,m=s-1>>>0&n,x=s>>>0&n,S=s+1>>>0&n,C=s+2>>>0&n,A=r-1>>>0&n,w=r>>>0&n,P=r+1>>>0&n,N=r+2>>>0&n,B=[[[l[c*o+m*e+A],l[c*o+m*e+w],l[c*o+m*e+P],l[c*o+m*e+N]],[l[c*o+x*e+A],l[c*o+x*e+w],l[c*o+x*e+P],l[c*o+x*e+N]],[l[c*o+S*e+A],l[c*o+S*e+w],l[c*o+S*e+P],l[c*o+S*e+N]],[l[c*o+C*e+A],l[c*o+C*e+w],l[c*o+C*e+P],l[c*o+C*e+N]]],[[l[f*o+m*e+A],l[f*o+m*e+w],l[f*o+m*e+P],l[f*o+m*e+N]],[l[f*o+x*e+A],l[f*o+x*e+w],l[f*o+x*e+P],l[f*o+x*e+N]],[l[f*o+S*e+A],l[f*o+S*e+w],l[f*o+S*e+P],l[f*o+S*e+N]],[l[f*o+C*e+A],l[f*o+C*e+w],l[f*o+C*e+P],l[f*o+C*e+N]]],[[l[d*o+m*e+A],l[d*o+m*e+w],l[d*o+m*e+P],l[d*o+m*e+N]],[l[d*o+x*e+A],l[d*o+x*e+w],l[d*o+x*e+P],l[d*o+x*e+N]],[l[d*o+S*e+A],l[d*o+S*e+w],l[d*o+S*e+P],l[d*o+S*e+N]],[l[d*o+C*e+A],l[d*o+C*e+w],l[d*o+C*e+P],l[d*o+C*e+N]]],[[l[b*o+m*e+A],l[b*o+m*e+w],l[b*o+m*e+P],l[b*o+m*e+N]],[l[b*o+x*e+A],l[b*o+x*e+w],l[b*o+x*e+P],l[b*o+x*e+N]],[l[b*o+S*e+A],l[b*o+S*e+w],l[b*o+S*e+P],l[b*o+S*e+N]],[l[b*o+C*e+A],l[b*o+C*e+w],l[b*o+C*e+P],l[b*o+C*e+N]]]],T=0;T<t;++T)for(var O=T/t,M=i*t+T,R=[[a(B[0][0][0],B[1][0][0],B[2][0][0],B[3][0][0],O),a(B[0][0][1],B[1][0][1],B[2][0][1],B[3][0][1],O),a(B[0][0][2],B[1][0][2],B[2][0][2],B[3][0][2],O),a(B[0][0][3],B[1][0][3],B[2][0][3],B[3][0][3],O)],[a(B[0][1][0],B[1][1][0],B[2][1][0],B[3][1][0],O),a(B[0][1][1],B[1][1][1],B[2][1][1],B[3][1][1],O),a(B[0][1][2],B[1][1][2],B[2][1][2],B[3][1][2],O),a(B[0][1][3],B[1][1][3],B[2][1][3],B[3][1][3],O)],[a(B[0][2][0],B[1][2][0],B[2][2][0],B[3][2][0],O),a(B[0][2][1],B[1][2][1],B[2][2][1],B[3][2][1],O),a(B[0][2][2],B[1][2][2],B[2][2][2],B[3][2][2],O),a(B[0][2][3],B[1][2][3],B[2][2][3],B[3][2][3],O)],[a(B[0][2][0],B[1][3][0],B[2][3][0],B[3][3][0],O),a(B[0][2][1],B[1][3][1],B[2][3][1],B[3][3][1],O),a(B[0][2][2],B[1][3][2],B[2][3][2],B[3][3][2],O),a(B[0][2][3],B[1][3][3],B[2][3][3],B[3][3][3],O)]],L=0;L<t;++L)for(var E=L/t,I=s*t+L,F=a(R[0][0],R[1][0],R[2][0],R[3][0],E),G=a(R[0][1],R[1][1],R[2][1],R[3][1],E),k=a(R[0][2],R[1][2],R[2][2],R[3][2],E),D=a(R[0][3],R[1][3],R[2][3],R[3][3],E),j=0;j<t;++j){var q=r*t+j,V=a(F,G,k,D,j/t),U=ctx.d(ctx.v(V,p),h[M][I][q]),H=[u(U[0],-1,1),u(U[1],-1,1),u(U[2],-1,1)];h[M][I][q]=H}v++,this.progress=.01+v/y*.89,++s>=e&&(s=0,++i>=e&&(i=0,_=t,p=Math.pow(p,1.2),_<=1?(g=3,this.progress=.9):g=1))},A=function(){for(var t=[-1,-1,-1],e=[.5,.7,1],o=0;o<64;++o)for(var n=h[o],r=0;r<64;++r)for(var i=n[r],s=0;s<64;++s){var c=i[s];c[0]=ctx.X(t[0],e[0],.5*c[0]+.5),c[1]=ctx.X(t[1],e[1],.5*c[1]+.5),c[2]=ctx.X(t[2],e[2],.5*c[2]+.5)}g=4,this.progress=.95},w=function(){ctx.yd=64,ctx.zd=[];for(var t=0;t<64;++t){for(var e=h[t],o=new ArrayBuffer(12288),n=new DataView(o),r=0;r<64;++r)for(var i=e[r],s=0;s<64;++s){var c=i[s],a=3*(64*r+s);n.setUint8(a+0,Math.floor(u(256*(.5*c[0]+.5)-.5,0,255))),n.setUint8(a+1,Math.floor(u(256*(.5*c[1]+.5)-.5,0,255))),n.setUint8(a+2,Math.floor(u(256*(.5*c[2]+.5)-.5,0,255)))}ctx.zd[t]=n}g=5,this.progress=1};this.step=function(){switch(g){case 0:x.call(this);break;case 1:S.call(this);break;case 2:C.call(this);break;case 3:A.call(this);break;case 4:w.call(this)}return 5==g}},this.cf=document.createElement("canvas"),this.cf.width=0,this.cf.height=0,this.bf=this.cf.getContext("2d"),this.af=function(t,e){(this.cf.width<t||this.cf.height<e)&&(this.cf.width=t,this.cf.height=e,this.bf=this.cf.getContext("2d"))},this.effects=[],this.loadEffect=function(effectFilePath,onSuccessFunc,onFailFunc){if(null!=this.effects[effectFilePath]){var effectModel=this.effects[effectFilePath];return effectModel instanceof Array?void(effectModel[effectModel.length]=[onSuccessFunc,onFailFunc]):void onSuccessFunc(effectModel)}this.effects[effectFilePath]=[[onSuccessFunc,onFailFunc]];var request=new XMLHttpRequest;request.open("GET",effectFilePath,!0),request.responseType="text",request.ctx=this,request.onreadystatechange=function(){if(4==request.readyState){var callbacks=this.ctx.effects[effectFilePath];if(request.status>=200&&request.status<300||304==request.status){var evalText="(function(ctx) {\n"+request.responseText+"\nreturn new NeutrinoEffect(ctx);\n})(this.ctx);",effectModel=eval(evalText);this.ctx.effects[effectFilePath]=effectModel,callbacks.forEach(function(t){t[0](effectModel)})}else callbacks.forEach(function(t){t[1]()})}},request.send()},this.removeEffect=function(t){delete this.effects[t]}}exports.Context=Context,Object.defineProperty(exports,"__esModule",{value:!0})},"object"==typeof exports&&void 0!==module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory((global=global||self).Neutrino={}),cc._RF.pop()},{}],textures:[function(t,e,o){"use strict";cc._RF.push(e,"fd7f0tQ5EtOT5oxbOnhkx87","textures"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=[{uuid:"16bd4bea-e4de-4ec0-862f-b190fffa54b1",path:"sparkleBlink"},{uuid:"a0b2248f-8fdf-4295-889a-38f2012cf28d",path:"textures"}],cc._RF.pop()},{}]},{},["GameController","GamePlay","MaskGamePlay","NodeController","Scratchable","TouchAreaController","AnimData","constants","AudioManager","Responsive","NeutrinoEffect_NoNameEffect","NoNameEffect","textures","NeutrinoAssembler","NeutrinoAssemblerJSB","NeutrinoAssemblerWebGL","NeutrinoComponent","NeutrinoContext","NeutrinoSettings","neutrinoparticles.umd"]);