{"version":3,"sources":["assets\\Script\\Controller\\Egg.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+CAA8C;AAC9C,uDAAkD;AAE5C,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAiC,uBAAY;IAA7C;QAAA,qEAiDC;QA/CG,kBAAY,GAAiB,IAAI,CAAC;QAElC,YAAY;QACZ,eAAS,GAAiB,IAAI,CAAC;QAC/B,aAAO,GAAgB,IAAI,CAAC;QAG5B,QAAQ;QACR,mBAAa,GAAY,KAAK,CAAC;QAG/B,YAAY;QACZ,iBAAW,GAAW,aAAa,CAAC;QACpC,eAAS,GAAW,WAAW,CAAC;QAChC,gBAAU,GAAW,YAAY,CAAC;QAClC,mBAAa,GAAW,eAAe,CAAC;;IAgC5C,CAAC;IA7Ba,mBAAK,GAAf;QAAA,iBAoBC;QAnBG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,qBAAqB,CAAC,CAAC;QAC3D,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAGjD,IAAI,CAAC,SAAS,CAAC,cAAc;YACzB,UAAC,CAAoB,EAAE,CAAqB,EAAE,CAAqB;gBAC/D,IAAG,CAAC,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,KAAI,CAAC,aAAa,EAAE;oBACnC,KAAI,CAAC,aAAa,GAAG,IAAI,CAAC;oBAC1B,KAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;oBACzB,KAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;oBACvB,KAAI,CAAC,YAAY,CAAC,KAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;oBACzC,qBAAS,CAAC,WAAW,IAAI,CAAC,CAAC;oBAC3B,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,qBAAS,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;oBAE7D,KAAI,CAAC,YAAY,CAAC;wBACd,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;oBACxB,CAAC,EAAE,CAAC,CAAC,CAAA;iBACR;YACL,CAAC,CAAA;IACT,CAAC;IAGM,0BAAY,GAAnB,UAAoB,IAAY,EAAE,IAAa;QAC3C,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;QAC5E,KAAK,CAAC,YAAY,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;IACtC,CAAC;IA5CD;QADC,QAAQ,CAAC,sBAAY,CAAC;6CACW;IAFjB,GAAG;QADvB,OAAO;OACa,GAAG,CAiDvB;IAAD,UAAC;CAjDD,AAiDC,CAjDgC,EAAE,CAAC,SAAS,GAiD5C;kBAjDoB,GAAG","file":"","sourceRoot":"/","sourcesContent":["import { Constants } from \"../Data/constants\";\r\nimport AudioManager from \"../Plugin/AudioManager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Egg extends cc.Component {\r\n    @property(AudioManager)\r\n    AudioManager: AudioManager = null;\r\n\r\n    // Component\r\n    rigidbody: cc.RigidBody = null;\r\n    collide: cc.Collider = null;\r\n\r\n\r\n    // state\r\n    isCollideLine: boolean = false;\r\n\r\n\r\n    // Animation\r\n    result_fail: string = \"result_fail\";\r\n    egg_break: string = \"egg_break\";\r\n    result_win: string = \"result_win\";\r\n    idle_security: string = \"idle_security\";\r\n\r\n\r\n    protected start(): void {\r\n        this.collide = this.getComponent(cc.PhysicsCircleCollider);\r\n        this.rigidbody = this.getComponent(cc.RigidBody);\r\n        \r\n\r\n        this.rigidbody.onBeginContact =\r\n            (c: cc.PhysicsContact, s: cc.PhysicsCollider, o: cc.PhysicsCollider) => {\r\n                if(o.tag === 5 && !this.isCollideLine) {\r\n                    this.isCollideLine = true;\r\n                    this.rigidbody.destroy();\r\n                    this.collide.destroy();\r\n                    this.setAnimation(this.egg_break, false);\r\n                    Constants.EggDieCount += 1;\r\n                    this.AudioManager.playSound(Constants.SoundTrack.stingSound);\r\n\r\n                    this.scheduleOnce(() => {\r\n                        this.node.destroy();\r\n                    }, 1)\r\n                }\r\n            }\r\n    }\r\n\r\n\r\n    public setAnimation(anim: string, loop: boolean): void {\r\n        let spine = this.node.getChildByName(\"Spine_Egg\").getComponent(sp.Skeleton);\r\n        spine.setAnimation(0, anim, loop);\r\n    }\r\n\r\n\r\n}\r\n"]}