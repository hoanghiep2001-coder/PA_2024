{"version":3,"sources":["assets\\Script\\Controller\\EggController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+CAA8C;AAC9C,uDAAkD;AAClD,uCAAkC;AAE5B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAsC,4BAAY;IAAlD;QAAA,qEAuDC;QApDG,cAAQ,GAAa,IAAI,CAAC;QAE1B,kBAAY,GAAiB,IAAI,CAAC;QAElC,gBAAU,GAAwB,EAAE,CAAC;QAErC,eAAS,GAAiB,IAAI,CAAC;QAC/B,aAAO,GAAgB,IAAI,CAAC;QAC5B,8BAAwB,GAAY,KAAK,CAAC;QAC1C,sBAAgB,GAAY,KAAK,CAAC;;IA2CtC,CAAC;IAxCa,wBAAK,GAAf;QAAA,iBAeC;QAdG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAEjD,IAAI,CAAC,SAAS,CAAC,cAAc,GAAG,UAAC,CAAmB,EAAE,CAAqB,EAAE,CAAqB;YAC9F,IAAG,CAAC,CAAC,GAAG,KAAK,CAAC,EAAE;gBACZ,qBAAS,CAAC,KAAK,GAAG,IAAI,CAAC;gBAEvB,KAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;gBACzB,KAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAE,CAAC;gBACzC,KAAI,CAAC,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;gBAC3D,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,qBAAS,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;gBACjE,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,UAAA,EAAE,IAAI,OAAA,EAAE,CAAC,WAAW,EAAE,EAAhB,CAAgB,CAAC,CAAC;gBAChD,uDAAuD;aAC1D;QACL,CAAC,CAAA;IACL,CAAC;IAGM,sCAAmB,GAA1B;QACI,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,EAAE,CAAC,aAAa,CAAC,OAAO,CAAC;IACnD,CAAC;IAGO,iCAAc,GAAtB;QACI,IAAG,IAAI,CAAC,gBAAgB;YAAE,OAAO;QACjC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC7B,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC;IAC7G,CAAC;IAGS,yBAAM,GAAhB,UAAiB,EAAU;QACvB,IAAG,MAAM,CAAC,sBAAsB,IAAI,CAAC,IAAI,CAAC,wBAAwB,IAAI,MAAM,CAAC,MAAM,EAAE;YACjF,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;YACrC,IAAI,CAAC,mBAAmB,EAAE,CAAC;SAC9B;QAED,IAAG,qBAAS,CAAC,SAAS;YAAE,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,EAAE,CAAC,aAAa,CAAC,MAAM,CAAC;QAEtE,MAAM,CAAC,MAAM,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;IAC3C,CAAC;IAnDD;QADC,QAAQ,CAAC,kBAAQ,CAAC;8CACO;IAE1B;QADC,QAAQ,CAAC,sBAAY,CAAC;kDACW;IAElC;QADC,QAAQ,CAAC,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC;gDACO;IAPpB,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAuD5B;IAAD,eAAC;CAvDD,AAuDC,CAvDqC,EAAE,CAAC,SAAS,GAuDjD;kBAvDoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["import { Constants } from \"../Data/constants\";\r\nimport AudioManager from \"../Plugin/AudioManager\";\r\nimport GamePlay from \"./GamePlay\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(GamePlay)\r\n    GamePlay: GamePlay = null;\r\n    @property(AudioManager)\r\n    AudioManager: AudioManager = null;\r\n    @property([cc.ParticleSystem])\r\n    effectDies: cc.ParticleSystem[] = [];\r\n\r\n    rigidbody: cc.RigidBody = null;\r\n    collide: cc.Collider = null;\r\n    isChangeEggRigidbodyType: boolean = false;\r\n    isActiveHelpAnim: boolean = false;\r\n\r\n\r\n    protected start(): void {\r\n        this.rigidbody = this.getComponent(cc.RigidBody);\r\n\r\n        this.rigidbody.onBeginContact = (c:cc.PhysicsContact, s: cc.PhysicsCollider, o: cc.PhysicsCollider) => {\r\n            if(o.tag === 8) {\r\n                Constants.isHit = true;\r\n\r\n                this.rigidbody.destroy();\r\n                this.getComponent(cc.Collider).destroy();\r\n                this.node.getChildByName(\"Spine_Character\").active = false;\r\n                this.AudioManager.playSound(Constants.SoundTrack.explosionSound);\r\n                this.effectDies.forEach(fx => fx.resetSystem());\r\n                // this.scheduleOnce(() => {this.GamePlay.lose()}, 2.5)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    public changeRigidbodyType(): void {\r\n        this.rigidbody.type = cc.RigidBodyType.Dynamic;\r\n    }\r\n\r\n\r\n    private activeHelpAnim(): void {\r\n        if(this.isActiveHelpAnim) return;\r\n        this.isActiveHelpAnim = true;\r\n        this.node.getChildByName(\"Spine_Character\").getComponent(sp.Skeleton).setAnimation(0, \"being_hit\", true);\r\n    }\r\n\r\n\r\n    protected update(dt: number): void {\r\n        if(window.changeEggRigidbodyType && !this.isChangeEggRigidbodyType && window.isDraw) {\r\n            this.isChangeEggRigidbodyType = true;\r\n            this.changeRigidbodyType();\r\n        }\r\n\r\n        if(Constants.isWinGame) this.rigidbody.type = cc.RigidBodyType.Static;\r\n\r\n        window.isDraw && this.activeHelpAnim();\r\n    }\r\n}\r\n"]}