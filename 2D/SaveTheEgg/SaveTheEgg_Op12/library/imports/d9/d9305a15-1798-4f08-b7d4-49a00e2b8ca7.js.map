{"version":3,"sources":["assets\\Script\\Controller\\TouchController.js"],"names":["cc","Class","Component","properties","graphics","Prefab","nodesController","Node","audioManager","GamePlay","GameController","EggController","onLoad","window","isDraw","node","on","EventType","TOUCH_START","touch_start","TOUCH_END","touch_end","TOUCH_CANCEL","start","StateForJs","isCanDraw","createGraphics","isChangeEggRigidbodyType","isToStore","getComponent","installHandle","playSound","drawSound","loop","event","isTouchWall","stopSound","offEvent","changeRigidbodyType","scheduleOnce","isReplayGame","isLoseGame","winGame","timeToWin","off","graphics_node","instantiate","x","addChild"],"mappings":"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","sourceRoot":"/","sourcesContent":["import { StateForJs } from \"../Data/StateForJS\";\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        graphics: cc.Prefab,\r\n        nodesController: cc.Node,\r\n        audioManager: cc.Node,\r\n        GamePlay: cc.Node,\r\n        GameController: cc.Node,\r\n        EggController: cc.Node,\r\n    },\r\n\r\n\r\n    onLoad() {\r\n        window.isDraw = false;\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.touch_start, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.touch_end, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.touch_end, this);\r\n    },\r\n\r\n\r\n    start() {\r\n        StateForJs.isCanDraw = true;\r\n        this.createGraphics();\r\n        this.isChangeEggRigidbodyType = false;\r\n    },\r\n\r\n\r\n    touch_start: function () {\r\n            if(window.isToStore) {\r\n                this.GameController.getComponent(\"GameController\").installHandle();\r\n                return;\r\n            }\r\n\r\n        // if(window.isLoseGame || StateForJs.isToStore) {\r\n        //     this.GameController.getComponent(\"GameController\").installHandle();\r\n        //     return;\r\n        // }\r\n\r\n        this.audioManager.getComponent(\"AudioManager\").playSound(\"drawSound\");\r\n        this.audioManager.getComponent(\"AudioManager\").drawSound.loop = true;\r\n    },\r\n\r\n\r\n    touch_end: function (event) {\r\n        if(window.isToStore) {\r\n            // this.GameController.getComponent(\"GameController\").installHandle();\r\n            return;\r\n        }\r\n\r\n        if (StateForJs.isToStore || window.isTouchWall) {\r\n            this.audioManager.getComponent(\"AudioManager\").stopSound(\"drawSound\");\r\n            window.isTouchWall = false;\r\n            return;\r\n        }\r\n\r\n        if (!StateForJs.isCanDraw) {\r\n            this.offEvent();\r\n            this.EggController.getComponent(\"EggController\").changeRigidbodyType();\r\n            this.createGraphics();\r\n        }\r\n\r\n        this.audioManager.getComponent(\"AudioManager\").stopSound(\"drawSound\");\r\n\r\n        this.scheduleOnce(() => {\r\n            if (window.isReplayGame) {\r\n                return;\r\n            }\r\n\r\n            if (!window.isLoseGame) this.GamePlay.getComponent(\"GamePlay\").winGame();\r\n        }, StateForJs.timeToWin);\r\n    },\r\n\r\n\r\n    offEvent() {\r\n        this.node.off(cc.Node.EventType.TOUCH_START);\r\n        this.node.off(cc.Node.EventType.TOUCH_END);\r\n    },\r\n\r\n\r\n    createGraphics() {\r\n        var graphics_node = cc.instantiate(this.graphics);\r\n        graphics_node.x = 0;\r\n        this.node.addChild(graphics_node);\r\n    },\r\n});\r\n"]}