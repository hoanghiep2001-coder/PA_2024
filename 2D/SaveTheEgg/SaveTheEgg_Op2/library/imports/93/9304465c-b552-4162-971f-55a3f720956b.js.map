{"version":3,"sources":["assets\\Script\\Controller\\GraphicsContro.js"],"names":["cc","Class","Component","properties","graphics","line_point","Vec2","onLoad","node","width","winSize","height","getComponent","Graphics","start","onTouch","on","Node","EventType","TOUCH_START","touch_start","TOUCH_MOVE","touch_move","TOUCH_END","touch_end","TOUCH_CANCEL","offTouch","off","event","pos","convertToNodeSpaceAR","getLocation","moveTo","x","y","push","v2","lineTo","stroke","createRigibody","rigibodyLogic","addComponent","RigidBody","gravityScale","physicsLine","lineWidth","points","friction","density","apply","checkIsCanDraw","lastPoint","nowPoint","sub","mag"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        graphics: null,\r\n        line_point: [cc.Vec2],\r\n    },\r\n\r\n    onLoad() {\r\n        this.node.width = cc.winSize.width;\r\n        this.node.height = cc.winSize.height;\r\n        this.graphics = this.getComponent(cc.Graphics);\r\n    },\r\n\r\n    start() {\r\n        this.onTouch();\r\n    },\r\n    onTouch()\r\n    {\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.touch_start, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.touch_move, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.touch_end, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.touch_end, this);\r\n    },\r\n    offTouch()\r\n    {\r\n        this.node.off(cc.Node.EventType.TOUCH_START, this.touch_start, this);\r\n        this.node.off(cc.Node.EventType.TOUCH_MOVE, this.touch_move, this);\r\n        this.node.off(cc.Node.EventType.TOUCH_END, this.touch_end, this);\r\n        this.node.off(cc.Node.EventType.TOUCH_CANCEL, this.touch_end, this);\r\n    },\r\n    touch_start: function (event) {\r\n        let pos = this.node.convertToNodeSpaceAR(event.getLocation());\r\n        this.graphics.moveTo(pos.x, pos.y);\r\n        this.line_point.push(cc.v2(pos.x, pos.y));\r\n    },\r\n    touch_move: function (event) {\r\n        let pos = this.node.convertToNodeSpaceAR(event.getLocation());\r\n        this.graphics.lineTo(pos.x, pos.y);\r\n        this.line_point.push(cc.v2(pos.x, pos.y));\r\n        this.graphics.stroke();\r\n    },\r\n    touch_end: function (event) {\r\n        this.createRigibody();\r\n        this.offTouch();\r\n    },\r\n    // /**\r\n    //  * @param {number} dt\r\n    //  */\r\n    createRigibody: function () {\r\n        // console.log(this.line_point);\r\n        this.rigibodyLogic = this.addComponent(cc.RigidBody);\r\n        this.rigibodyLogic.gravityScale = 2;\r\n        \r\n        this.physicsLine = this.addComponent(\"MyPhysicsCollider\");\r\n        this.physicsLine.lineWidth = 10;//this.graphics.lineWidth;\r\n        this.physicsLine.points = this.line_point;\r\n        this.physicsLine.friction = 0.2;\r\n        this.physicsLine.density = 1;\r\n        this.physicsLine.apply();\r\n    },\r\n    checkIsCanDraw: function (lastPoint, nowPoint) {\r\n        return lastPoint.sub(nowPoint).mag() >= 20;\r\n    },\r\n\r\n});\r\n"]}