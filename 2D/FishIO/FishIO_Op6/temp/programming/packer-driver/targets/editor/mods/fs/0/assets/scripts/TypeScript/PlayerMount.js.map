{"version":3,"sources":["file:///D:/playable-ads-hiepdh/FishIO/FishIO_Op6/assets/scripts/TypeScript/PlayerMount.ts"],"names":["_decorator","Component","Node","Label","sp","Constants","ccclass","property","Player","Skeleton","start","onCollisionEnter","other","self","tag","TouchArea","getComponent","isTouched","ironSource","SoundState","GameController","playAudio","audioEat","handleEatFishLv1","isLevelUp","handleEatFishLv2","score","isLive","die","update","dt","Level","string","String"],"mappings":"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","sourcesContent":["import { Constants } from \"../Data/Constant\";\r\nimport { _decorator, Component, CircleCollider2D, Node, Prefab,Animation,Camera,Label, instantiate, RigidBody2D, Vec2, Vec3, toRadian, math, Skeleton, sp, tween, EventTouch } from 'cc';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass\r\nexport default class Player extends Component {\r\n  @property(Node)\r\n  GameController: Node = null;\r\n  @property(Node)\r\n  Player: Node = null;\r\n  @property(sp.Skeleton)\r\n  Spine_Fish: sp.Skeleton = null;\r\n  @property(sp.Skeleton)\r\n  Spine_Bite: sp.Skeleton = null;\r\n  @property(Node)\r\n  TouchArea: Node = null;\r\n  @property(Label)\r\n  Level: Label = null;\r\n\r\n  isLevelUp: boolean = false;\r\n  isDoneAnim: boolean = true;\r\n\r\n  score: number = 20;\r\n  trackEntry: sp.spine.TrackEntry = null;\r\n\r\n\r\n\r\n  protected start(): void {\r\n\r\n  }\r\n\r\n\r\n  protected onCollisionEnter(other, self) {\r\n    if (other.tag == 1 && this.TouchArea.getComponent(\"TouchArea\").isTouched) {\r\n      if (Constants.ironSource.SoundState) {\r\n        this.GameController.getComponent(\"GameController\")\r\n          .playAudio(this.GameController.getComponent(\"GameController\").audioEat);\r\n      }\r\n      this.handleEatFishLv1(other);\r\n    }\r\n\r\n    if (other.tag == 3 && this.TouchArea.getComponent(\"TouchArea\").isTouched) {\r\n      if (this.Player.getComponent(\"PlayerController\").isLevelUp) {\r\n\r\n        if (Constants.ironSource.SoundState) {\r\n          this.GameController.getComponent(\"GameController\")\r\n            .playAudio(this.GameController.getComponent(\"GameController\").audioEat);\r\n        }\r\n\r\n        this.handleEatFishLv2(other);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  private handleEatFishLv1(other: any): void {\r\n    if (this.TouchArea.getComponent(\"TouchArea\").isTouched) {\r\n      this.score += 5;\r\n\r\n      if (other.getComponent(\"Enemy\").isLive) {\r\n        other.getComponent(\"Enemy\").die();\r\n        // this.Spine_Bite.node.active = true;\r\n        // this.Spine_Bite.node.setPosition(other.node.getPosition());\r\n        // this.Spine_Bite.setAnimation(0, \"bite\", false);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  private handleEatFishLv2(other: any): void {\r\n    if (this.TouchArea.getComponent(\"TouchArea\").isTouched) {\r\n      this.score += 800;\r\n\r\n      if (other.getComponent(\"Enemy\").isLive) {\r\n        other.getComponent(\"Enemy\").die();\r\n        // this.Spine_Bite.node.active = true;\r\n        // this.Spine_Bite.node.setPosition(other.node.getPosition());\r\n        // this.Spine_Bite.setAnimation(0, \"bite\", false);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  protected update(dt: number): void {\r\n    this.Level.string = String(this.score);\r\n  }\r\n\r\n}\r\n"]}