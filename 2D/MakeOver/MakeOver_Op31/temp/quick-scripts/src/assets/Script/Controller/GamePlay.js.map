{"version":3,"sources":["assets\\Script\\Controller\\GamePlay.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { SpineAnims } from \"../Data/Anims\";\r\nimport { Constants } from \"../Data/constants\";\r\nimport AudioManager from \"../Plugin/AudioManager\";\r\nimport { GameController } from \"./GameController\";\r\nimport NodeContainer from \"./NodeContanier\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GamePlay extends cc.Component {\r\n  @property(AudioManager)\r\n  AudioManager: AudioManager = null;\r\n  @property(GameController)\r\n  GameController: GameController = null;\r\n  @property(NodeContainer)\r\n  NodeContainer: NodeContainer = null;\r\n\r\n  @property(cc.Node)\r\n  star: cc.Node = null;\r\n  @property(cc.Node)\r\n  star1: cc.Node = null;\r\n  @property(cc.Node)\r\n  star2: cc.Node = null;\r\n  @property(sp.Skeleton)\r\n  sp_mouth: sp.Skeleton = null;\r\n\r\n\r\n  // Tools\r\n  @property(sp.Skeleton)\r\n  sp_dryer: sp.Skeleton = null;\r\n  @property(cc.Node)\r\n  Teeth_scum: cc.Node = null;\r\n  @property(cc.Node)\r\n  Options: cc.Node = null;\r\n  @property(cc.Node)\r\n  hand: cc.Node = null;\r\n\r\n\r\n  // state\r\n  trackEnTry: sp.spine.TrackEntry = null;\r\n  isActiveRemoveSound1: boolean = false;\r\n  isActiveRemoveSound2: boolean = false;\r\n  isActiveRemoveSound3: boolean = false;\r\n  isActiveRemoveSound4: boolean = false;\r\n\r\n  activeCTA: boolean = false;\r\n  CTA_steps: number = 0;\r\n  CTA_thumbnail: cc.Node = null;\r\n  CTA_isBtn: boolean = false;\r\n  CTA_anyThumbnail: boolean = true;\r\n\r\n\r\n  protected onLoad(): void {\r\n  }\r\n\r\n\r\n  protected start(): void {\r\n    this.NodeContainer.CTA.active = false;\r\n    this.hideTears();\r\n\r\n    this.scheduleOnce(() => {\r\n      this.showTools(this.NodeContainer.Tool, true);\r\n    }, 2.5);\r\n\r\n    this.scheduleOnce(() => {\r\n      this.NodeContainer.Delight_EyeAlert.active = true;\r\n      this.NodeContainer.Hand.active = true;\r\n    }, 3)\r\n    \r\n    // this.AudioManager.playSound(Constants.SoundTrack.bgSound);\r\n\r\n\r\n    // debug \r\n    // this.debug();\r\n  }\r\n\r\n\r\n  private debug(): void {\r\n    // hide tear\r\n    this.NodeContainer.Tears.forEach(node => this.hideAnim(node))\r\n\r\n    // show tools\r\n    this.showTools(this.NodeContainer.Tool, true);\r\n\r\n    // CTA anim\r\n    // this.activeCTAAnim();\r\n  }\r\n\r\n\r\n  private hideTears(): void {\r\n    this.AudioManager.playSound(Constants.SoundTrack.crySound);\r\n    this.scheduleOnce(() => {this.NodeContainer.Tears.forEach(node => this.hideAnim(node));}, 1.5);\r\n    // this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.screamHoooSound);}, 2.5);\r\n  }\r\n\r\n\r\n  private activeCTAAnim(): void {\r\n    this.NodeContainer.CTA.active = true;\r\n    this.CTA_thumbnail = this.NodeContainer.CTA_logo;\r\n    \r\n    cc.tween(this.NodeContainer.CTA_overlay)\r\n      .to(0.5, { opacity: 150 })\r\n      .call(() => {        \r\n        this.showThumbnailTween(this.CTA_thumbnail, this.CTA_anyThumbnail, this.CTA_isBtn);\r\n      })\r\n      .start()\r\n  }\r\n\r\n\r\n  private showThumbnailTween(thumbnail: cc.Node, anyThumbnail: boolean, isBtn: boolean): void {\r\n    console.log(this.NodeContainer.CTA.active);\r\n    switch (this.CTA_steps) {\r\n      case 0:\r\n        this.CTA_thumbnail = this.NodeContainer.CTA_logo;\r\n        break;\r\n      case 1:\r\n        this.CTA_thumbnail = this.NodeContainer.CTA_icon;\r\n        break;\r\n      case 2:\r\n        this.CTA_thumbnail = this.NodeContainer.CTA_Btn;\r\n        this.CTA_anyThumbnail = false;\r\n        this.CTA_isBtn = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.CTA_steps += 1;\r\n\r\n    cc.tween(thumbnail)\r\n      .to(0.5, { opacity: 255 })\r\n      .call(() => {\r\n        anyThumbnail && this.showThumbnailTween(this.CTA_thumbnail, this.CTA_anyThumbnail, this.CTA_isBtn)\r\n        isBtn && this.activeBtnTween(this.CTA_thumbnail)\r\n      }\r\n      ).start();\r\n  }\r\n\r\n\r\n  private activeBtnTween(btn: cc.Node): void {\r\n    cc.tween(btn)\r\n      .repeatForever(\r\n        cc.tween(btn)\r\n          .to(0.5, { scale: 0.45 })\r\n          .to(0.5, { scale: 0.5 }, { easing: cc.easing.elasticOut })\r\n      ).start();\r\n  }\r\n\r\n\r\n  public showIntro(): void {\r\n    this.NodeContainer.Btn_1.active = false;\r\n    this.NodeContainer.MainGame.active = false;\r\n    this.NodeContainer.intro.active = true;\r\n\r\n    // active sound intro\r\n    this.AudioManager.playSound(Constants.SoundTrack.walkSound);\r\n\r\n    // declare vars\r\n    let Delight_Intro = this.NodeContainer.intro.getChildByName(\"Delight\");\r\n    let spine_Delight: sp.Skeleton = Delight_Intro.getChildByName(\"Spine_Delight\").getComponent(sp.Skeleton);\r\n    let Spider_Intro = this.NodeContainer.intro.getChildByName(\"Spider\");\r\n\r\n    // scale intro\r\n    cc.tween(Delight_Intro)\r\n      .to(4, { scale: 1.15 })\r\n      .start();\r\n\r\n    // caculated time to active/unactive Intro steps & sounds\r\n    this.scheduleOnce(() => {\r\n      Spider_Intro.active = true;\r\n      this.AudioManager.stopSound(Constants.SoundTrack.walkSound);\r\n    }, 1.5);\r\n\r\n\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.spiderSound) }, 2.5);\r\n\r\n\r\n    this.scheduleOnce(() => {\r\n      Spider_Intro.active = false;\r\n      spine_Delight.setAnimation(0, SpineAnims.Intro_DollAnim.Scare, false);\r\n    }, 3.2);\r\n\r\n\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.hmmSound) }, 5);\r\n\r\n\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.scareSound) }, 6.5);\r\n\r\n\r\n    this.scheduleOnce(() => {\r\n      this.NodeContainer.CTA.active = true;\r\n\r\n      this.scheduleOnce(() => {\r\n        cc.tween(this.NodeContainer.CTA_Btn)\r\n        .repeatForever(\r\n          cc.tween(this.NodeContainer.CTA_Btn)\r\n            .to(0.5, { scale: 0.45 })\r\n            .to(0.5, { scale: 0.5 }, { easing: cc.easing.elasticOut })\r\n        ).start();\r\n      }, 1.5)\r\n    }, 7);\r\n  }\r\n\r\n\r\n  private showHint(): void {\r\n    // this.hand.active = true;\r\n    // cc.tween(this.hand)\r\n    //   .to(0.5, { opacity: 255 })\r\n    //   .call(() => {\r\n    //     this.hand.getComponent(cc.Animation).play(\"Hand_HintAnim\");\r\n    //   })\r\n    //   .start()\r\n  }\r\n\r\n\r\n  private hideAnim(node: cc.Node) {\r\n    cc.tween(node)\r\n      .to(0.5, { opacity: 0 })\r\n      .start();\r\n  }\r\n\r\n\r\n  private showTools(tool: cc.Node, isActive: boolean): void {\r\n    if (!isActive) tool.active = true;\r\n    this.AudioManager.playSound(Constants.SoundTrack.moveItemSound);\r\n    let position = tool.getPosition();\r\n    tool.setPosition(position.x - 30, position.y);\r\n    cc.tween(tool)\r\n      .to(0.5, { x: position.x, opacity: 255 })\r\n      .start();\r\n\r\n    this.showHint();\r\n  }\r\n\r\n\r\n  public checkCollideFly(): void {\r\n    let area = this.NodeContainer.ToolHeadArea.getBoundingBox();\r\n    let fly = this.NodeContainer.Fly.getBoundingBox();\r\n\r\n    if(area.intersects(fly)) {\r\n      Constants.isCanTouch = false;\r\n      Constants.isRemovedFly = true;\r\n\r\n      this.NodeContainer.Spine_Remove.node.active = true;\r\n      this.NodeContainer.Tool.active = false;\r\n      this.trackEnTry = this.NodeContainer.Spine_Remove.setAnimation(0, \"Action\", false);\r\n      this.setCompleteSpine();\r\n    }\r\n  }\r\n\r\n\r\n  private setCompleteSpine(): void {\r\n    this.NodeContainer.Spine_Remove.setCompleteListener((track: sp.spine.TrackEntry) => {\r\n      if(track.animation.name === \"Action\") {\r\n        this.doneFlowAndShowNextOption();\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  private getCurentTimeOfTrack(): void {\r\n    if(this.trackEnTry) {\r\n      if(this.trackEnTry.trackTime >= 1.2 && !this.isActiveRemoveSound1) {\r\n        this.isActiveRemoveSound1 = true;\r\n        this.NodeContainer.Fly.active = false;\r\n        this.NodeContainer.Delight_EyeFly.active = false;\r\n        this.AudioManager.playSound(Constants.SoundTrack.nhoMun1Sound);\r\n      }\r\n\r\n      if(this.trackEnTry.trackTime >= 1.5 && !this.isActiveRemoveSound2) {\r\n        this.isActiveRemoveSound2 = true;\r\n        this.NodeContainer.Fly.active = false;\r\n        this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound);\r\n      }\r\n\r\n      if(this.trackEnTry.trackTime >= 2 && !this.isActiveRemoveSound3) {\r\n        this.isActiveRemoveSound3 = true;\r\n        this.NodeContainer.Fly.active = false;\r\n        this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound);\r\n      }\r\n\r\n      if(this.trackEnTry.trackTime >= 2.5) {\r\n        this.isActiveRemoveSound4 = true;\r\n        this.AudioManager.playSound(Constants.SoundTrack.gapRuoiSound);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  private doneFlowAndShowNextOption(): void {\r\n    this.AudioManager.playSound(Constants.SoundTrack.DoneStepSound);\r\n    this.star2.getComponent(cc.Animation).play(\"StarAnim\");\r\n\r\n    this.scheduleOnce(() => {\r\n      this.NodeContainer.Btn_1.active = true;\r\n\r\n      cc.tween(this.NodeContainer.Btn_1)\r\n      .to(0.5, {opacity: 255})\r\n      .call(() => {\r\n        cc.tween(this.NodeContainer.Btn_1)\r\n        .repeatForever(\r\n          cc.tween(this.NodeContainer.Btn_1)\r\n            .to(0.5, { scale: 0.45 })\r\n            .to(0.5, { scale: 0.5 }, { easing: cc.easing.elasticOut })\r\n        ).start();\r\n      })\r\n      .start();\r\n      // this.Options.active = true;\r\n      // this.Options.getComponent(cc.Animation).play(\"ShowOptions\");\r\n\r\n      // mtg & applovin\r\n      // this.NodeContainer.HideMask.on(cc.Node.EventType.TOUCH_START, this.GameController.installHandle, this);\r\n    }, 1.5)\r\n  }\r\n\r\n\r\n  protected update(dt: number): void {\r\n    // this.activeCTA && this.activeCTAAnim();\r\n    !this.isActiveRemoveSound4 && this.getCurentTimeOfTrack();\r\n  }\r\n\r\n}\r\n"]}