{"version":3,"sources":["assets\\Script\\Controller\\GamePlay.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Constants } from \"../Data/constants\";\r\nimport AudioManager from \"../Plugin/AudioManager\";\r\nimport { GameController } from \"./GameController\";\r\nimport NodeContainer from \"./NodeContanier\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GamePlay extends cc.Component {\r\n\r\n  @property(AudioManager)\r\n  AudioManager: AudioManager = null;\r\n  @property(GameController)\r\n  GameController: GameController = null;\r\n  @property(NodeContainer)\r\n  NodeContainer: NodeContainer = null;\r\n\r\n\r\n  // state\r\n  isRunFlow1: boolean = false;\r\n  checkCleanserFlag: boolean = false;\r\n  checkshowTweezersFlag: boolean = false;\r\n  isRemovingMaggot: boolean = false;\r\n\r\n\r\n  protected onLoad(): void {\r\n\r\n  }\r\n\r\n\r\n  protected start(): void {\r\n    this.handleGamePlay();\r\n  }\r\n\r\n\r\n  private handleGamePlay(): void {\r\n    this.AudioManager.playSound(Constants.SoundTrack.bgSound);\r\n    this.AudioManager.playSound(Constants.SoundTrack.dirtySound);\r\n\r\n    this.scheduleOnce(() => {this.AudioManager.playSound(Constants.SoundTrack.girlScreamSound)}, 0.5);\r\n    this.scheduleOnce(() => {this.getComponent(cc.Animation).play(\"GamePlay_SwtichStep\")}, 2);\r\n  }\r\n\r\n\r\n  public runFlow1_Opt1(): void {\r\n    this.isRunFlow1 = true;\r\n    this.NodeContainer.Flow1_Opt1.active = false;\r\n    this.NodeContainer.Flow1_Opt2.active = false;\r\n    Constants.optionDoneLength += 1;\r\n    this.NodeContainer.Sp_Cleanser.node.active = true;\r\n    this.NodeContainer.Sp_Cleanser.setAnimation(0, \"Intro\", false);\r\n    this.showTools(this.NodeContainer.Sp_Cleanser);\r\n    this.AudioManager.playSound(Constants.SoundTrack.moveItemSound);\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.xitNuocSound) }, 1.2);\r\n    this.scheduleOnce(() => { this.NodeContainer.Sp_Cleanser.node.getComponent(cc.Animation).play(\"spCleanser_MoveAnim\") }, 3);\r\n    this.scheduleOnce(() => {\r\n      this.NodeContainer.PointScratch.getComponent(cc.Animation).play();\r\n      this.activeCleanSound();\r\n      Constants.isTouch = true;\r\n    }, 3.8);\r\n  }\r\n\r\n\r\n  public runFlow1_Opt2(): void {\r\n    this.isRunFlow1 = true;\r\n    this.NodeContainer.Flow1_Opt1.active = false;\r\n    this.NodeContainer.Flow1_Opt2.active = false;\r\n    this.NodeContainer.Sp_Shower.node.active = true;\r\n    Constants.optionDoneLength += 1;\r\n    this.showTools(this.NodeContainer.Sp_Shower);\r\n    this.AudioManager.playSound(Constants.SoundTrack.moveItemSound);\r\n    this.scheduleOnce(() => {\r\n      this.NodeContainer.Sp_Shower.setAnimation(0, \"Shower_Action\", true);\r\n      this.NodeContainer.PointScratch.getComponent(cc.Animation).play();\r\n      this.AudioManager.playSound(Constants.SoundTrack.showerSound);\r\n      Constants.isTouch = true;\r\n    }, 1);\r\n  }\r\n\r\n\r\n  private showTools(tool: sp.Skeleton): void {\r\n    let node = tool.node;\r\n    let position = node.getPosition();\r\n    node.setPosition(position.x - 50, position.y);\r\n    cc.tween(node)\r\n      .to(0.5, { x: position.x, opacity: 255 })\r\n      .start();\r\n  }\r\n\r\n\r\n  public activeCleanSound(): void {\r\n    this.AudioManager.playSound(Constants.SoundTrack.cleanSound);\r\n    this.AudioManager.cleanSound.volume = 0.7;\r\n\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.cleanSound) }, 0.5);\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.cleanSound) }, 1);\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.cleanSound) }, 1.5);\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.cleanSound) }, 2);\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.cleanSound) }, 2.5);\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.cleanSound) }, 3);\r\n\r\n  }\r\n\r\n\r\n  public stopCleanSound(): void {\r\n    this.AudioManager.stopSound(Constants.SoundTrack.cleanSound)\r\n    this.AudioManager.cleanSound.loop = false;\r\n  }\r\n\r\n\r\n  public handleDoneCleanser(): void {\r\n    if (this.NodeContainer.Scratchable.getComponent(\"Scratchable\").isWin) {\r\n      Constants.isTouch = false;\r\n      Constants.isCanTouch = true;\r\n      this.stopCleanSound();\r\n      this.checkCleanserFlag = true;\r\n      this.NodeContainer.Scratchable.active = false;\r\n      this.NodeContainer.PointScratch.getComponent(cc.Animation).play(\"Point_HideAnim\");\r\n      this.AudioManager.playSound(Constants.SoundTrack.completeSound);\r\n      this.NodeContainer.Star_1.getComponent(cc.Animation).play(\"Star_BlinkAnim\");\r\n      this.AudioManager.stopSound(Constants.SoundTrack.showerSound);\r\n      this.scheduleOnce(() => { this.NodeContainer.Step2.getComponent(cc.Animation).play(\"Step2_ShowFlow2\") }, 1)\r\n    }\r\n  }\r\n\r\n\r\n  public runFlow2_Opt1(): void {\r\n    Constants.isCanTouch = false;\r\n    this.NodeContainer.Flow2_Opt1.opacity = 0;\r\n    this.NodeContainer.Flow2_Opt2.opacity = 0;\r\n    this.NodeContainer.Spine_RMMG1.node.active = true;\r\n    Constants.optionDoneLength += 1;\r\n    this.activeRemoveMaggotSound(false);\r\n    this.setCompleteSpine(this.NodeContainer.Spine_RMMG1, this.NodeContainer.Flow2_Opt1);\r\n    this.NodeContainer.Spine_Maggot2.setAnimation(0, \"idle01\", false);\r\n    this.scheduleOnce(() => { this.NodeContainer.Spine_Maggot2.node.active = false }, 0.7);\r\n  }\r\n\r\n\r\n  public runFlow2_Opt2(): void {\r\n    Constants.isCanTouch = false;\r\n    this.NodeContainer.Flow2_Opt1.opacity = 0;\r\n    this.NodeContainer.Flow2_Opt2.opacity = 0;\r\n    Constants.optionDoneLength += 1;\r\n    this.NodeContainer.Spine_Acne.setAnimation(0, \"action03_squeze_big\", false);\r\n    this.activeRemoveMaggotSound(true);\r\n    this.setCompleteSpine(this.NodeContainer.Spine_Acne, this.NodeContainer.Flow2_Opt2);\r\n  }\r\n\r\n\r\n  private showAnotherOption(nodeToEnable: cc.Node): void {\r\n    nodeToEnable.active = false;\r\n    this.NodeContainer.Step2.getComponent(cc.Animation).play(\"Step2_AnotherOpt\");\r\n    this.scheduleOnce(() => { Constants.isCanTouch = true }, 0.5);\r\n  }\r\n\r\n\r\n  private showFlow3(): void {\r\n    Constants.isCanTouch = true;\r\n    this.NodeContainer.Step2.getComponent(cc.Animation).play(\"Step2_ShowFlow3\");\r\n  }\r\n\r\n\r\n  private activeRemoveMaggotSound(isLonger: boolean): void {\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.nhoMun1Sound); }, 0.75);\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound); }, 1.5);\r\n    isLonger && this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound); }, 1.9);\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound); }, 2.2);\r\n    isLonger && this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound); }, 1.5);\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound); }, 2.8);\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.nhoMun3Sound); }, 3.5)\r\n\r\n  }\r\n\r\n\r\n  public setCompleteSpine(spine: sp.Skeleton, nodeToEnable: cc.Node): void {\r\n    spine.setCompleteListener((trackEntry: sp.spine.TrackEntry) => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.completeSound);\r\n      Constants.optionDoneLength <= 2 && this.scheduleOnce(() => { this.showAnotherOption(nodeToEnable) }, 1);\r\n      Constants.optionDoneLength >= 3 && this.scheduleOnce(() => {this.showFlow3(); nodeToEnable.active = false}, 1);\r\n    })\r\n  }\r\n\r\n\r\n\r\n  protected update(dt: number): void {\r\n    !this.checkCleanserFlag && this.handleDoneCleanser();\r\n  }\r\n\r\n}\r\n"]}