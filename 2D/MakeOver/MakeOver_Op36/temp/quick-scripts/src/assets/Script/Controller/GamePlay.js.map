{"version":3,"sources":["assets\\Script\\Controller\\GamePlay.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+CAA8C;AAC9C,uDAAkD;AAClD,mDAAkD;AAClD,iDAA4C;AAEtC,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAsC,4BAAY;IAAlD;QAAA,qEA+XC;QA7XC,kBAAY,GAAiB,IAAI,CAAC;QAElC,oBAAc,GAAmB,IAAI,CAAC;QAEtC,mBAAa,GAAkB,IAAI,CAAC;QAGpC,UAAI,GAAY,IAAI,CAAC;QAErB,eAAS,GAAY,IAAI,CAAC;QAE1B,QAAQ;QAER,UAAI,GAAY,IAAI,CAAC;QAErB,iBAAW,GAAY,IAAI,CAAC;QAG5B,QAAQ;QACR,gBAAU,GAAwB,IAAI,CAAC;QAEvC,uBAAiB,GAAY,KAAK,CAAC;QAEnC,eAAS,GAAY,KAAK,CAAC;QAC3B,eAAS,GAAW,CAAC,CAAC;QACtB,mBAAa,GAAY,IAAI,CAAC;QAC9B,eAAS,GAAY,KAAK,CAAC;QAC3B,sBAAgB,GAAY,IAAI,CAAC;;IAkWnC,CAAC;IA/VW,yBAAM,GAAhB;IACA,CAAC;IAGS,wBAAK,GAAf;QACE,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,MAAM,GAAG,KAAK,CAAC;QAEtC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,qBAAS,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAC1D,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAGO,kCAAe,GAAvB;QAAA,iBAaC;QAZC,IAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QAE7D,IAAI,CAAC,YAAY,CAAC;YAChB,EAAE,CAAC,KAAK,CAAC,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC;iBAChC,EAAE,CAAC,CAAC,EAAE,EAAC,CAAC,EAAE,cAAc,CAAC,CAAC,GAAG,GAAG,EAAE,KAAK,EAAE,GAAG,EAAC,CAAC;iBAC9C,IAAI,CAAC;gBACJ,qBAAS,CAAC,UAAU,GAAG,IAAI,CAAC;gBAE5B,KAAI,CAAC,SAAS,CAAC,KAAI,CAAC,aAAa,CAAC,UAAU,EAAE,KAAK,CAAC,CAAA;YACtD,CAAC,CAAC;iBACD,KAAK,EAAE,CAAC;QACX,CAAC,EAAE,GAAG,CAAC,CAAA;IACT,CAAC;IAGO,qCAAkB,GAA1B;QAAA,iBAgBC;QAfC,IAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QAE7D,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC;aAChC,EAAE,CAAC,CAAC,EAAE,EAAC,CAAC,EAAE,cAAc,CAAC,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,GAAG,EAAC,CAAC;aAC7C,IAAI,CAAC;YACJ,qBAAS,CAAC,UAAU,GAAG,IAAI,CAAC;YAE5B,KAAI,CAAC,SAAS,CAAC,KAAI,CAAC,aAAa,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;YAEzD,KAAI,CAAC,SAAS,EAAE,CAAC;QAInB,CAAC,CAAC;aACD,KAAK,EAAE,CAAC;IACX,CAAC;IAGS,2BAAQ,GAAhB;QACE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACtC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;IAC5D,CAAC;IAGK,wBAAK,GAAb;QACE,SAAS;QACT,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QAEzD,IAAI,CAAC,aAAa,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC;QAC5D,qBAAS,CAAC,WAAW,GAAG,IAAI,CAAC;QAC7B,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,OAAO,EAAE,KAAK,CAAC,CAAA;QAE5F,YAAY;QACZ,gEAAgE;QAEhE,aAAa;QACb,iDAAiD;QAEjD,WAAW;QACX,wBAAwB;IAC1B,CAAC;IAGO,4BAAS,GAAjB;QACE,8DAA8D;QAC9D,kGAAkG;QAClG,uGAAuG;IACzG,CAAC;IAGO,gCAAa,GAArB;QAAA,iBAUC;QATC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC;QACrC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC;QAEjD,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC;aACrC,EAAE,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC;aACzB,IAAI,CAAC;YACJ,KAAI,CAAC,kBAAkB,CAAC,KAAI,CAAC,aAAa,EAAE,KAAI,CAAC,gBAAgB,EAAE,KAAI,CAAC,SAAS,CAAC,CAAC;QACrF,CAAC,CAAC;aACD,KAAK,EAAE,CAAA;IACZ,CAAC;IAGO,qCAAkB,GAA1B,UAA2B,SAAkB,EAAE,YAAqB,EAAE,KAAc;QAApF,iBA0BC;QAzBC,QAAQ,IAAI,CAAC,SAAS,EAAE;YACtB,KAAK,CAAC;gBACJ,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC;gBACjD,MAAM;YACR,KAAK,CAAC;gBACJ,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC;gBACjD,MAAM;YACR,KAAK,CAAC;gBACJ,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC;gBAChD,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;gBAC9B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACtB,MAAM;YACR;gBACE,MAAM;SACT;QAED,IAAI,CAAC,SAAS,IAAI,CAAC,CAAC;QAEpB,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC;aAChB,EAAE,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC;aACzB,IAAI,CAAC;YACJ,YAAY,IAAI,KAAI,CAAC,kBAAkB,CAAC,KAAI,CAAC,aAAa,EAAE,KAAI,CAAC,gBAAgB,EAAE,KAAI,CAAC,SAAS,CAAC,CAAA;YAClG,KAAK,IAAI,KAAI,CAAC,cAAc,CAAC,KAAI,CAAC,aAAa,CAAC,CAAA;QAClD,CAAC,CACA,CAAC,KAAK,EAAE,CAAC;IACd,CAAC;IAGO,iCAAc,GAAtB,UAAuB,GAAY;QACjC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC;aACV,aAAa,CACZ,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC;aACV,EAAE,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;aACxB,EAAE,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAC7D,CAAC,KAAK,EAAE,CAAC;IACd,CAAC;IAGO,2BAAQ,GAAhB,UAAiB,IAAa;QAC5B,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC;aACX,EAAE,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;aACvB,KAAK,EAAE,CAAC;IACb,CAAC;IAGO,4BAAS,GAAjB,UAAkB,IAAa,EAAE,QAAiB;QAAlD,iBA6BC;QA3BC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QAEjB,IAAI,CAAC,QAAQ;YAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QAElC,qBAAS,CAAC,UAAU,GAAG,IAAI,CAAC;QAE5B,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,qBAAS,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;QAEhE,IAAI,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAElC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;QAE9C,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC;aACX,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC;aACxC,IAAI,CAAC;YACJ,qBAAS,CAAC,WAAW;gBACrB,CAAC,CAAC,KAAI,CAAC,YAAY,CAAC,cAAO,KAAI,CAAC,QAAQ,EAAE,CAAA,CAAA,CAAC,EAAE,CAAC,CAAC;gBAC/C,CAAC,CAAC,KAAI,CAAC,QAAQ,EAAE,CAAA;YAEjB,KAAI,CAAC,aAAa,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC;YAE7C,KAAI,CAAC,aAAa,CAAC,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;QACjE,CAAC,CACF;aACA,KAAK,EAAE,CAAC;QAEX,mBAAmB;IACrB,CAAC;IAGM,mCAAgB,GAAvB;QAAA,iBA0CC;QAzCC,IAAI,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,cAAc,EAAE,CAAC;gCAEzD,KAAK;YACZ,IAAM,IAAI,GAAG,OAAK,aAAa,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YACnD,IAAM,OAAO,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;YAEtC,IAAK,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAG;gBAElC,OAAK,eAAe,EAAE,CAAC;gBAEvB,qBAAS,CAAC,UAAU,GAAG,KAAK,CAAC;gBAE7B,qBAAS,CAAC,WAAW,IAAI,CAAC,CAAC;gBAE3B,IAAG,qBAAS,CAAC,WAAW,IAAI,CAAC;oBAAE,qBAAS,CAAC,WAAW,GAAG,IAAI,CAAC;gBAE5D,IAAM,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;gBAElF,IAAM,YAAU,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;gBAE1E,WAAW,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBAE/B,OAAK,aAAa,CAAC,UAAU,CAAC,MAAM,GAAG,KAAK,CAAC;gBAE7C,OAAK,aAAa,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBAE1C,OAAK,aAAa,CAAC,UAAU,CAAC,WAAW,CAAC,OAAK,aAAa,CAAC,iBAAiB,CAAC,CAAC;gBAEhF,OAAK,UAAU,GAAG,WAAW,CAAC,YAAY,CAAC,CAAC,EAAE,mBAAmB,EAAE,KAAK,CAAC,CAAC;gBAE1E,OAAK,YAAY,CAAC;oBAChB,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;oBAEvC,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,WAAS,MAAQ,CAAC,CAAC,MAAM,GAAG,KAAK,CAAA;oBAE/F,YAAU,CAAC,YAAY,CAAC,CAAC,EAAE,qBAAqB,EAAE,KAAK,CAAC,CAAC;gBAC3D,CAAC,EAAE,CAAC,CAAC,CAAC;gBAEN,OAAK,gBAAgB,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;aAC3C;;;QArCH,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,MAAM,EAAE,KAAK,EAAE;oBAAjE,KAAK;SAsCb;IACH,CAAC;IAGO,mCAAgB,GAAxB,UAAyB,WAAwB,EAAE,KAAa;QAAhE,iBASC;QARC,WAAW,CAAC,mBAAmB,CAAC,UAAC,KAA0B;YACzD,IAAG,KAAK,CAAC,SAAS,CAAC,IAAI,KAAK,mBAAmB,EAAE;gBAE/C,KAAI,CAAC,aAAa,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBAEhD,KAAI,CAAC,yBAAyB,EAAE,CAAC;aAClC;QACH,CAAC,CAAC,CAAA;IACJ,CAAC;IAGO,kCAAe,GAAvB;QAAA,iBAYC;QAXC,IAAI,CAAC,YAAY,CAAC;YAChB,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,qBAAS,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;QACjE,CAAC,EAAE,CAAC,CAAC,CAAA;QAEL,IAAI,CAAC,YAAY,CAAC;YAChB,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,qBAAS,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;QACjE,CAAC,EAAE,GAAG,CAAC,CAAA;QAEP,IAAI,CAAC,YAAY,CAAC;YAChB,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,qBAAS,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;QAChE,CAAC,EAAE,CAAC,CAAC,CAAA;IACP,CAAC;IAGO,uCAAoB,GAA5B;QAEE,wBAAwB;QACxB,yEAAyE;QACzE,wCAAwC;QACxC,6CAA6C;QAC7C,wDAAwD;QACxD,sEAAsE;QACtE,MAAM;QAEN,yEAAyE;QACzE,wCAAwC;QACxC,6CAA6C;QAC7C,sEAAsE;QACtE,MAAM;QAEN,uEAAuE;QACvE,wCAAwC;QACxC,6CAA6C;QAC7C,sEAAsE;QACtE,MAAM;QAEN,2CAA2C;QAC3C,wCAAwC;QACxC,sEAAsE;QACtE,MAAM;QACN,IAAI;IACN,CAAC;IAGO,4CAAyB,GAAjC;QAAA,iBAcC;QAbC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,qBAAS,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;QAChE,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAEtD,IAAG,qBAAS,CAAC,WAAW,EAAE;YACxB,IAAI,CAAC,YAAY,CAAC;gBAChB,KAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,CAAC,EAAE,CAAC,CAAC,CAAA;YACL,OAAM;SACP;QAAA,CAAC;QAEF,IAAI,CAAC,YAAY,CAAC;YAChB,KAAI,CAAC,SAAS,CAAC,KAAI,CAAC,aAAa,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;QACvD,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IAGO,4BAAS,GAAjB;QACE,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,qBAAqB,CAAC,CAAC,gBAAgB,EAAE,CAAC;QAEtE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QACzD,qBAAS,CAAC,UAAU,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,aAAa,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC;QAE5D,gCAAgC;QAChC,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,OAAO,EAAE,KAAK,CAAC,CAAA;IAC9F,CAAC;IAGO,gCAAa,GAArB;QACE,IAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,KAAK,EAAE;YAErD,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,qBAAS,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;YAEhE,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,KAAK,CAAC;YAEhC,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,GAAG,KAAK,CAAC;YAE7C,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,MAAM,GAAG,KAAK,CAAC;YAElD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAE9B,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAEtD,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,qBAAS,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;YAEhE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;YAE3C,IAAI,CAAC,kBAAkB,EAAE,CAAC;SAC3B;IACH,CAAC;IAGO,qCAAkB,GAA1B;QAAA,iBAkBC;QAjBC,IAAI,CAAC,YAAY,CAAC;YAChB,KAAI,CAAC,aAAa,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC;YAE9C,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAA;QAC9D,CAAC,EAAE,CAAC,CAAC,CAAA;QAEL,IAAI,CAAC,YAAY,CAAC;YAChB,EAAE,CAAC,KAAK,CAAC,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC;iBACrC,EAAE,CAAC,CAAC,EAAE,EAAC,OAAO,EAAE,CAAC,EAAC,CAAC;iBACnB,IAAI,CAAC,cAAM,OAAA,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,qBAAS,CAAC,UAAU,CAAC,QAAQ,CAAC,EAA1D,CAA0D,CAAC;iBACtE,KAAK,EAAE,CAAC;QACX,CAAC,EAAE,CAAC,CAAC,CAAC;QAEN,IAAI,CAAC,YAAY,CAAC;YAChB,KAAI,CAAC,aAAa,CAAC,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC;QACvC,CAAC,EAAE,GAAG,CAAC,CAAA;IAET,CAAC;IAGS,yBAAM,GAAhB,UAAiB,EAAU;QACzB,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;QAChD,6DAA6D;IAC/D,CAAC;IA3XD;QADC,QAAQ,CAAC,sBAAY,CAAC;kDACW;IAElC;QADC,QAAQ,CAAC,+BAAc,CAAC;oDACa;IAEtC;QADC,QAAQ,CAAC,uBAAa,CAAC;mDACY;IAGpC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;0CACG;IAErB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;+CACQ;IAI1B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;0CACG;IAErB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACU;IAjBT,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA+X5B;IAAD,eAAC;CA/XD,AA+XC,CA/XqC,EAAE,CAAC,SAAS,GA+XjD;kBA/XoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["import { Constants } from \"../Data/constants\";\r\nimport AudioManager from \"../Plugin/AudioManager\";\r\nimport { GameController } from \"./GameController\";\r\nimport NodeContainer from \"./NodeContanier\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GamePlay extends cc.Component {\r\n  @property(AudioManager)\r\n  AudioManager: AudioManager = null;\r\n  @property(GameController)\r\n  GameController: GameController = null;\r\n  @property(NodeContainer)\r\n  NodeContainer: NodeContainer = null;\r\n\r\n  @property(cc.Node)\r\n  star: cc.Node = null;\r\n  @property(cc.Node)\r\n  touchArea: cc.Node = null;\r\n\r\n  // Tools\r\n  @property(cc.Node)\r\n  hand: cc.Node = null;\r\n  @property(cc.Node)\r\n  scratchAble: cc.Node = null;\r\n\r\n\r\n  // state\r\n  trackEnTry: sp.spine.TrackEntry = null;\r\n\r\n  isDoneScratchAble: boolean = false;\r\n\r\n  activeCTA: boolean = false;\r\n  CTA_steps: number = 0;\r\n  CTA_thumbnail: cc.Node = null;\r\n  CTA_isBtn: boolean = false;\r\n  CTA_anyThumbnail: boolean = true;\r\n\r\n\r\n  protected onLoad(): void {\r\n  }\r\n\r\n\r\n  protected start(): void {\r\n    this.NodeContainer.CTA.active = false;\r\n    \r\n    this.AudioManager.playSound(Constants.SoundTrack.bgSound);\r\n    this.scaleToDollNose();\r\n  }\r\n\r\n\r\n  private scaleToDollNose(): void {\r\n    const DollCurrentPos = this.NodeContainer.Doll.getPosition();\r\n\r\n    this.scheduleOnce(() => {\r\n      cc.tween(this.NodeContainer.Doll)\r\n      .to(1, {y: DollCurrentPos.y - 100, scale: 1.4})\r\n      .call(() => {\r\n        Constants.isCanTouch = true;\r\n\r\n        this.showTools(this.NodeContainer.Flow1_Tool, false)\r\n      })\r\n      .start();\r\n    }, 1.5)\r\n  }\r\n\r\n\r\n  private scaleOutToDollFace(): void {\r\n    const DollCurrentPos = this.NodeContainer.Doll.getPosition();\r\n\r\n    cc.tween(this.NodeContainer.Doll)\r\n    .to(1, {y: DollCurrentPos.y + 40, scale: 1.2})\r\n    .call(() => {\r\n      Constants.isCanTouch = true;\r\n\r\n      this.showTools(this.NodeContainer.Flow2_spineTool, true);\r\n\r\n      this.showTowel();\r\n\r\n\r\n\r\n    })\r\n    .start();\r\n  }\r\n\r\n\r\n    private showHint(): void {\r\n      this.NodeContainer.Hand.active = true;\r\n      this.NodeContainer.Hand.getComponent(cc.Animation).play();\r\n    }  \r\n\r\n\r\n  private debug(): void {\r\n    // flow 2\r\n    this.showTools(this.NodeContainer.Flow2_spineTool, true);\r\n\r\n    this.NodeContainer.ToolArea = this.NodeContainer.Flow2_Tool;\r\n    Constants.isDoneStep1 = true;\r\n    this.NodeContainer.Flow2_spineTool.getComponent(sp.Skeleton).setAnimation(0, \"Intro\", false)\r\n\r\n    // hide tear\r\n    // this.NodeContainer.Tears.forEach(node => this.hideAnim(node))\r\n\r\n    // show tools\r\n    // this.showTools(this.NodeContainer.Tool, true);\r\n\r\n    // CTA anim\r\n    // this.activeCTAAnim();\r\n  }\r\n\r\n\r\n  private hideTears(): void {\r\n    // this.AudioManager.playSound(Constants.SoundTrack.crySound);\r\n    // this.scheduleOnce(() => {this.NodeContainer.Tears.forEach(node => this.hideAnim(node));}, 1.5);\r\n    // this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.screamHoooSound);}, 2.5);\r\n  }\r\n\r\n\r\n  private activeCTAAnim(): void {\r\n    this.NodeContainer.CTA.active = true;\r\n    this.CTA_thumbnail = this.NodeContainer.CTA_logo;\r\n    \r\n    cc.tween(this.NodeContainer.CTA_overlay)\r\n      .to(0.5, { opacity: 150 })\r\n      .call(() => {        \r\n        this.showThumbnailTween(this.CTA_thumbnail, this.CTA_anyThumbnail, this.CTA_isBtn);\r\n      })\r\n      .start()\r\n  }\r\n\r\n\r\n  private showThumbnailTween(thumbnail: cc.Node, anyThumbnail: boolean, isBtn: boolean): void {\r\n    switch (this.CTA_steps) {\r\n      case 0:\r\n        this.CTA_thumbnail = this.NodeContainer.CTA_logo;\r\n        break;\r\n      case 1:\r\n        this.CTA_thumbnail = this.NodeContainer.CTA_icon;\r\n        break;\r\n      case 2:\r\n        this.CTA_thumbnail = this.NodeContainer.CTA_Btn;\r\n        this.CTA_anyThumbnail = false;\r\n        this.CTA_isBtn = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.CTA_steps += 1;\r\n\r\n    cc.tween(thumbnail)\r\n      .to(0.5, { opacity: 255 })\r\n      .call(() => {\r\n        anyThumbnail && this.showThumbnailTween(this.CTA_thumbnail, this.CTA_anyThumbnail, this.CTA_isBtn)\r\n        isBtn && this.activeBtnTween(this.CTA_thumbnail)\r\n      }\r\n      ).start();\r\n  }\r\n\r\n\r\n  private activeBtnTween(btn: cc.Node): void {\r\n    cc.tween(btn)\r\n      .repeatForever(\r\n        cc.tween(btn)\r\n          .to(0.5, { scale: 0.45 })\r\n          .to(0.5, { scale: 0.5 }, { easing: cc.easing.elasticOut })\r\n      ).start();\r\n  }\r\n\r\n\r\n  private hideAnim(node: cc.Node) {\r\n    cc.tween(node)\r\n      .to(0.5, { opacity: 0 })\r\n      .start();\r\n  }\r\n\r\n\r\n  private showTools(tool: cc.Node, isActive: boolean): void {\r\n\r\n    tool.opacity = 0;\r\n\r\n    if (!isActive) tool.active = true;\r\n\r\n    Constants.isCanTouch = true;\r\n\r\n    this.AudioManager.playSound(Constants.SoundTrack.moveItemSound);\r\n\r\n    let position = tool.getPosition();\r\n\r\n    tool.setPosition(position.x - 30, position.y);\r\n\r\n    cc.tween(tool)\r\n      .to(0.5, { x: position.x, opacity: 255 })\r\n      .call(() => {\r\n        Constants.isDoneStep1\r\n        ? this.scheduleOnce(() => {this.showHint()}, 1)\r\n        : this.showHint()\r\n\r\n        this.NodeContainer.Hint_Circle.active = true;\r\n        \r\n        this.NodeContainer.Hint_Circle.getComponent(cc.Animation).play();\r\n        }\r\n      )\r\n      .start();\r\n\r\n    // this.showHint();\r\n  }\r\n\r\n\r\n  public checkCollideAcne(): void {\r\n    let toolHead = this.NodeContainer.Flow1_ToolHead.getBoundingBox();\r\n\r\n    for (let index = 0; index < this.NodeContainer.Flow1_Areas.length; index++) {\r\n      const area = this.NodeContainer.Flow1_Areas[index];\r\n      const areaBdx = area.getBoundingBox();\r\n\r\n      if ( areaBdx.intersects(toolHead) ) {\r\n\r\n        this.playNhoMunSound();\r\n\r\n        Constants.isCanTouch = false;\r\n\r\n        Constants.AcneRemoved += 1; \r\n\r\n        if(Constants.AcneRemoved >= 4) Constants.isDoneStep1 = true;\r\n\r\n        const removeSpine = area.getChildByName(\"Remove_spine\").getComponent(sp.Skeleton);\r\n\r\n        const spineCream = area.getChildByName(\"cream\").getComponent(sp.Skeleton);\r\n\r\n        removeSpine.node.active = true;\r\n\r\n        this.NodeContainer.Flow1_Tool.active = false;\r\n\r\n        this.NodeContainer.Flow1_Tool.opacity = 0;\r\n\r\n        this.NodeContainer.Flow1_Tool.setPosition(this.NodeContainer.initPosTool_Flow1);\r\n\r\n        this.trackEnTry = removeSpine.setAnimation(0, \"action01_squeze02\", false);\r\n\r\n        this.scheduleOnce(() => {\r\n          let number = area.name.match(/\\d+/)[0]; \r\n\r\n          this.NodeContainer.Doll.getChildByName(\"Nose\").getChildByName(`4acne_${number}`).active = false\r\n\r\n          spineCream.setAnimation(0, \"action02_cream_scar\", false);\r\n        }, 2);\r\n\r\n        this.setCompleteSpine(removeSpine, index);\r\n      }\r\n    }\r\n  }\r\n  \r\n\r\n  private setCompleteSpine(removeSpine: sp.Skeleton, index: number): void {\r\n    removeSpine.setCompleteListener((track: sp.spine.TrackEntry) => {\r\n      if(track.animation.name === \"action01_squeze02\") {\r\n\r\n        this.NodeContainer.Flow1_Areas.splice(index, 1);\r\n\r\n        this.doneFlowAndShowNextOption();\r\n      }\r\n    })\r\n  } \r\n\r\n\r\n  private playNhoMunSound(): void {\r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.nhoMun1Sound);\r\n    }, 1)\r\n\r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound);\r\n    }, 1.5)\r\n\r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.spiderSound);\r\n    }, 2)\r\n  }\r\n\r\n\r\n  private getCurentTimeOfTrack(): void {\r\n\r\n    // if(this.trackEnTry) {\r\n    //   if(this.trackEnTry.trackTime >= 1.2 && !this.isActiveRemoveSound1) {\r\n    //     this.isActiveRemoveSound1 = true;\r\n    //     this.NodeContainer.Fly.active = false;\r\n    //     this.NodeContainer.Delight_EyeFly.active = false;\r\n    //     this.AudioManager.playSound(Constants.SoundTrack.nhoMun1Sound);\r\n    //   }\r\n\r\n    //   if(this.trackEnTry.trackTime >= 1.5 && !this.isActiveRemoveSound2) {\r\n    //     this.isActiveRemoveSound2 = true;\r\n    //     this.NodeContainer.Fly.active = false;\r\n    //     this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound);\r\n    //   }\r\n\r\n    //   if(this.trackEnTry.trackTime >= 2 && !this.isActiveRemoveSound3) {\r\n    //     this.isActiveRemoveSound3 = true;\r\n    //     this.NodeContainer.Fly.active = false;\r\n    //     this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound);\r\n    //   }\r\n\r\n    //   if(this.trackEnTry.trackTime >= 2.5) {\r\n    //     this.isActiveRemoveSound4 = true;\r\n    //     this.AudioManager.playSound(Constants.SoundTrack.gapRuoiSound);\r\n    //   }\r\n    // }\r\n  }\r\n\r\n\r\n  private doneFlowAndShowNextOption(): void {\r\n    this.AudioManager.playSound(Constants.SoundTrack.DoneStepSound);\r\n    this.star.getComponent(cc.Animation).play(\"StarAnim\");\r\n    \r\n    if(Constants.isDoneStep1) {\r\n      this.scheduleOnce(() => {\r\n        this.scaleOutToDollFace();\r\n      }, 2)\r\n      return\r\n    };\r\n\r\n    this.scheduleOnce(() => {\r\n      this.showTools(this.NodeContainer.Flow1_Tool, false);\r\n    }, 1.5);\r\n  }\r\n\r\n\r\n  private showTowel(): void {\r\n    this.touchArea.getComponent(\"TouchAreaController\").registerNewEvent();\r\n\r\n    this.showTools(this.NodeContainer.Flow2_spineTool, true);\r\n    Constants.isCanTouch = true;\r\n    this.NodeContainer.ToolArea = this.NodeContainer.Flow2_Tool;\r\n    \r\n    // Constants.isDoneStep1 = true;\r\n    this.NodeContainer.Flow2_spineTool.getComponent(sp.Skeleton).setAnimation(0, \"Intro\", false)\r\n  }\r\n\r\n\r\n  private checkDoneMask(): void {\r\n    if(this.scratchAble.getComponent(\"Scratchable\").isWin) {\r\n\r\n      this.AudioManager.stopSound(Constants.SoundTrack.FaceWashSound);\r\n\r\n      this.scratchAble.active = false;\r\n\r\n      this.NodeContainer.Flow2_Tool.active = false;\r\n\r\n      this.NodeContainer.Flow2_spineTool.active = false;\r\n\r\n      this.isDoneScratchAble = true;\r\n\r\n      this.star.getComponent(cc.Animation).play(\"StarAnim\");\r\n\r\n      this.AudioManager.playSound(Constants.SoundTrack.DoneStepSound);\r\n\r\n      this.NodeContainer.Doll_Mask.active = true;\r\n\r\n      this.showDollBeautyFace();\r\n    }\r\n  }\r\n\r\n\r\n  private showDollBeautyFace(): void {\r\n    this.scheduleOnce(() => {\r\n      this.NodeContainer.Doll_Bandage.active = true;\r\n\r\n      this.NodeContainer.Doll_Face.setAnimation(0, \"idle03\", true)\r\n    }, 1)\r\n\r\n    this.scheduleOnce(() => {\r\n      cc.tween(this.NodeContainer.Doll_Mask)\r\n      .to(1, {opacity: 0})\r\n      .call(() => this.AudioManager.playSound(Constants.SoundTrack.hmmSound))\r\n      .start();\r\n    }, 3);\r\n\r\n    this.scheduleOnce(() => {\r\n      this.NodeContainer.CTA.active = true;\r\n    }, 5.5)\r\n    \r\n  }\r\n\r\n\r\n  protected update(dt: number): void {\r\n    !this.isDoneScratchAble && this.checkDoneMask();\r\n    // !this.isActiveRemoveSound4 && this.getCurentTimeOfTrack();\r\n  }\r\n\r\n}\r\n"]}