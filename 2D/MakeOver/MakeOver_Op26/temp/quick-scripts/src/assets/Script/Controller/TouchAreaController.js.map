{"version":3,"sources":["assets\\Script\\Controller\\TouchAreaController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Ultils } from \"../Data/Ultils\";\r\nimport { Constants } from \"../Data/constants\";\r\nimport AudioManager from \"../Plugin/AudioManager\";\r\nimport { GameController } from \"./GameController\";\r\nimport GamePlay from \"./GamePlay\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport class TouchAreaController extends cc.Component {\r\n\r\n  // Component\r\n  @property(AudioManager)\r\n  AudioManager: AudioManager = null;\r\n  @property(GameController)\r\n  GameController: GameController = null;\r\n  @property(GamePlay)\r\n  GamePlay: GamePlay = null;\r\n\r\n\r\n  // node\r\n  @property(cc.Node)\r\n  HideMask: cc.Node = null;\r\n  @property(cc.Node)\r\n  Point_maggot: cc.Node = null;\r\n  @property(cc.Node)\r\n  Point_tweezers: cc.Node = null;\r\n  @property(cc.Node)\r\n  Head_tweezers: cc.Node = null;\r\n  @property(cc.Node)\r\n  CTA: cc.Node = null;\r\n\r\n\r\n  @property(sp.Skeleton)\r\n  spine_CleanHair: sp.Skeleton = null;\r\n  @property([cc.Node])\r\n  bubblePoints: cc.Node[] = [];\r\n  @property([sp.Skeleton])\r\n  spine_Bubbles: sp.Skeleton[] = [];\r\n  @property(sp.Skeleton)\r\n  spine_Tweezers: sp.Skeleton = null;\r\n  @property(sp.Skeleton)\r\n  spine_Maggot: sp.Skeleton = null;\r\n\r\n\r\n  // state\r\n  activeBubbleFlag: boolean = false;\r\n  isTouchCleanHairFlag: boolean = false;\r\n  isTouchSpineMaggotFlag: boolean = false;\r\n  registerEventStep2Flag: boolean = false;\r\n\r\n\r\n  protected onLoad() {\r\n    this.CTA.active = false;\r\n    Constants.cleanHair_Points = this.bubblePoints;\r\n    Constants.spine_Bubbles = this.spine_Bubbles;\r\n\r\n    // mtg & applovin\r\n    // this.HideMask.on(cc.Node.EventType.TOUCH_START, () => {\r\n    //   Constants.step === 3 && this.GameController.installHandle();\r\n    // }, this);\r\n     \r\n    // ironsource\r\n    this.HideMask.on(cc.Node.EventType.TOUCH_START, this.handleIronSourcePlaySound, this);\r\n  }\r\n\r\n\r\n  protected start() {\r\n    // this.AudioManager.playSound(Constants.SoundTrack.bgSound);\r\n    this.registerEvent(Constants.step);\r\n  }\r\n\r\n\r\n  private registerEvent(step: number): void {\r\n    switch (step) {\r\n      case 1:\r\n        this.spine_CleanHair.node.on(cc.Node.EventType.TOUCH_START, this.touchStart, this);\r\n        this.spine_CleanHair.node.on(cc.Node.EventType.TOUCH_MOVE, this.touchMove, this);\r\n        this.spine_CleanHair.node.on(cc.Node.EventType.TOUCH_END, this.touchEnd, this);\r\n        this.spine_CleanHair.node.on(cc.Node.EventType.TOUCH_CANCEL, this.touchEnd, this);\r\n        break;\r\n      case 2:\r\n        if (this.registerEventStep2Flag) {\r\n          return;\r\n        }\r\n\r\n        this.registerEventStep2Flag = true;\r\n        this.Point_tweezers.on(cc.Node.EventType.TOUCH_START, this.touchStart, this);\r\n        this.Point_tweezers.on(cc.Node.EventType.TOUCH_MOVE, this.touchMove, this);\r\n        this.Point_tweezers.on(cc.Node.EventType.TOUCH_END, this.touchEnd, this);\r\n        this.Point_tweezers.on(cc.Node.EventType.TOUCH_CANCEL, this.touchEnd, this);\r\n        break;\r\n      case 3:\r\n        this.CTA.on(cc.Node.EventType.TOUCH_START, this.touchStart, this);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n\r\n  private offEvent(step: number): void {\r\n    switch (step) {\r\n      case 1:\r\n        this.spine_CleanHair.node.off(cc.Node.EventType.TOUCH_START);\r\n        this.spine_CleanHair.node.off(cc.Node.EventType.TOUCH_MOVE,);\r\n        this.spine_CleanHair.node.off(cc.Node.EventType.TOUCH_END);\r\n        this.spine_CleanHair.node.off(cc.Node.EventType.TOUCH_CANCEL);\r\n        break;\r\n      case 2:\r\n        this.Point_tweezers.off(cc.Node.EventType.TOUCH_START);\r\n        this.Point_tweezers.off(cc.Node.EventType.TOUCH_MOVE);\r\n        this.Point_tweezers.off(cc.Node.EventType.TOUCH_END);\r\n        this.Point_tweezers.off(cc.Node.EventType.TOUCH_CANCEL);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n\r\n  public handleIronSourcePlaySound(): void {\r\n    if (Constants.ironSource.isPlayBgSound) {\r\n      return;\r\n    }\r\n\r\n    if (Constants.ironSource.SoundState) {\r\n      this.AudioManager.playSound(Constants.SoundTrack.bgSound);\r\n    }\r\n\r\n    Constants.ironSource.isPlayBgSound = true;\r\n  }\r\n\r\n\r\n  private touchStart(event: cc.Touch): void {\r\n    this.handleIronSourcePlaySound();\r\n\r\n    if (!Constants.isCanTouch) {\r\n      return;\r\n    }\r\n\r\n    if(Constants.step === 1) {\r\n      this.AudioManager.playSound(Constants.SoundTrack.conClearSound);\r\n    }\r\n\r\n    Constants.step === 3 && this.GameController.installHandle();\r\n\r\n    this.GamePlay.getComponent(cc.Animation).stop(\"GamePlay_TutorialStep3Anim\");\r\n    this.GamePlay.getComponent(cc.Animation).stop(\"GamePlay_TutorialStep2Anim\");\r\n    this.GamePlay.getComponent(cc.Animation).stop(\"GamePlay_TutorialAnim\");\r\n    \r\n    Constants.isTouch = true;\r\n    this.GamePlay.hair_tut.active = false;\r\n    this.spine_CleanHair.setAnimation(0, \"action\", true);\r\n    this.GamePlay.hand.active = false;\r\n    this.GamePlay.hand.opacity = 0;\r\n    this.GamePlay.overlay.opacity = 0;\r\n  }\r\n\r\n\r\n  private touchMove(event: cc.Touch): void {\r\n    if (!Constants.isCanTouch) {\r\n      return;\r\n    }\r\n\r\n    this.GamePlay.hair_tut.active = false;\r\n    this.GamePlay.hand.active = false;\r\n    this.GamePlay.overlay.opacity = 0;\r\n\r\n    // step 1\r\n    if (Constants.step === 1) {\r\n      Constants.currentPosition = this.node.convertToNodeSpaceAR(event.getLocation());\r\n\r\n      let bdx = this.spine_CleanHair.node.getBoundingBox();\r\n      Ultils.TouchArea.checkCollideBubblePoints(bdx);\r\n      this.spine_CleanHair.node.setPosition(\r\n        Constants.currentPosition.x + Constants.Responsive.calculatedX,\r\n        Constants.currentPosition.y + Constants.Responsive.calculatedY\r\n      );\r\n      if(!this.isTouchCleanHairFlag && Constants.isTouchCleanHair) {\r\n        this.isTouchCleanHairFlag = true;\r\n        this.AudioManager.playSound(Constants.SoundTrack.conClearSound);\r\n      }\r\n    }\r\n\r\n\r\n    // step 2\r\n    if (Constants.step === 2) {\r\n      Constants.currentPosition = new cc.Vec2(\r\n        event.getLocation().x - cc.winSize.width / 2,\r\n        event.getLocation().y - cc.winSize.height / 2\r\n      );\r\n\r\n      this.Point_tweezers.setPosition(\r\n        Constants.currentPosition.x + Constants.Responsive.calculatedX,\r\n        Constants.currentPosition.y + Constants.Responsive.calculatedY\r\n      );\r\n      this.Head_tweezers.setPosition(\r\n        Constants.currentPosition.x - 45 + Constants.Responsive.calculatedX,\r\n        Constants.currentPosition.y - 60 + Constants.Responsive.calculatedY\r\n      );\r\n      this.spine_Tweezers.node.setPosition(\r\n        Constants.currentPosition.x - 50 + Constants.Responsive.calculatedX,\r\n        Constants.currentPosition.y - 70 + Constants.Responsive.calculatedY\r\n      );\r\n\r\n      let bdx = this.Head_tweezers.getBoundingBox();\r\n      let maggot = this.Point_maggot.getBoundingBox();\r\n      Ultils.TouchArea.checkCollideMaggot(bdx, maggot);\r\n    }\r\n  }\r\n\r\n\r\n  private touchEnd(event: cc.Touch) {\r\n    if (!Constants.isCanTouch) {\r\n      return;\r\n    }\r\n\r\n    this.scheduleOnce(() => {\r\n      if (Constants.step === 1 && !Constants.isDoneCleanHair) {\r\n        this.GamePlay.hair_tut.active = true;\r\n      }\r\n    }, 3);\r\n\r\n    this.isTouchCleanHairFlag = false;\r\n    Constants.isTouchCleanHair = false;\r\n    Constants.isTouch = true; \r\n    this.spine_CleanHair.setAnimation(0, \"idle\", false);\r\n    this.AudioManager.stopSound(Constants.SoundTrack.conClearSound);\r\n  }\r\n\r\n\r\n  private handleMuteSoundIronSource(): void {\r\n    Constants.ironSource.State = parseInt(localStorage.getItem(\"cocosSoundState\"), 10)\r\n\r\n    if (Constants.ironSource.State) {\r\n      if (Constants.ironSource.State === 1 && !Constants.ironSource.SoundState && !Constants.ironSource.isEndGame) {\r\n        Constants.ironSource.SoundState = true;\r\n        this.AudioManager.playSound(Constants.SoundTrack.bgSound);\r\n      }\r\n\r\n      if (Constants.ironSource.State === 2 && Constants.ironSource.SoundState) {\r\n        Constants.ironSource.SoundState = false;\r\n        this.AudioManager.stopAllSound();\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  private handleActiveBubbles(): void {\r\n    this.activeBubbleFlag = true;\r\n    this.spine_Bubbles.forEach(bubble => bubble.setAnimation(0, \"idle03_bubble\", false));\r\n    this.offEvent(Constants.step);\r\n  }\r\n\r\n\r\n  private handleActiveSpineMaggot(): void {\r\n    this.GamePlay.circle.active = false;\r\n    this.isTouchSpineMaggotFlag = true;\r\n    this.spine_Maggot.setAnimation(0, \"action03_squeze_big\", false);\r\n    this.setCompleteSpine();\r\n\r\n    this.spine_Tweezers.node.active = false;\r\n    this.offEvent(Constants.step);\r\n\r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.nhoMun1Sound);\r\n    }, 0.5);\r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound);\r\n    }, 1);\r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound);\r\n    }, 1.5);\r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound);\r\n    }, 2);\r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound);\r\n    }, 2.5);\r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.nhoMun3Sound);\r\n    }, 3.2);\r\n  }\r\n\r\n\r\n  private setCompleteSpine(): void {\r\n    this.spine_Maggot.setCompleteListener((trackEntry: sp.spine.TrackEntry) => {\r\n      if (trackEntry.animation.name === \"action03_squeze_big\") {\r\n        this.AudioManager.playSound(Constants.SoundTrack.completeSound);\r\n\r\n        this.scheduleOnce(() => {\r\n          Constants.step = 3;\r\n          this.CTA.active = true;\r\n          this.GamePlay.getComponent(cc.Animation).play(\"GamePlay_TutorialStep3Anim\");\r\n          this.registerEvent(3);\r\n        }, 0.5)\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  protected update(dt: number): void {\r\n    !this.activeBubbleFlag && Constants.isDoneCleanHair && this.handleActiveBubbles();\r\n    !this.isTouchSpineMaggotFlag && Constants.isTouchMaggot && this.handleActiveSpineMaggot();\r\n    Constants.isDoneStep1 && !this.registerEventStep2Flag && this.registerEvent(2);\r\n\r\n    this.handleMuteSoundIronSource();\r\n  }\r\n}\r\n"]}