{"version":3,"sources":["assets\\Script\\Controller\\GamePlay.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Constants } from \"../Data/constants\";\r\nimport AudioManager from \"../Plugin/AudioManager\";\r\nimport { GameController } from \"./GameController\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GamePlay extends cc.Component {\r\n\r\n  @property(AudioManager)\r\n  AudioManager: AudioManager = null;\r\n  @property(GameController)\r\n  GameController: GameController = null;\r\n\r\n\r\n  @property(cc.Node)\r\n  background: cc.Node = null;\r\n  @property([sp.Skeleton])\r\n  spine_Bubbles: sp.Skeleton[] = [];\r\n  @property(cc.Node)\r\n  hair_tut: cc.Node = null;\r\n  @property(cc.Node)\r\n  hand: cc.Node = null;\r\n  @property(cc.Node)\r\n  overlay: cc.Node = null;\r\n  @property(cc.Node)\r\n  circle: cc.Node = null;\r\n  @property(cc.Node)\r\n  dirty: cc.Node = null;\r\n\r\n  @property(cc.Node)\r\n  character: cc.Node = null;\r\n  @property(cc.Node)\r\n  character_dirtyHair: cc.Node = null;\r\n\r\n\r\n  @property([cc.ParticleSystem])\r\n  Effect_Blinks: cc.ParticleSystem[] = [];\r\n\r\n  doneStep1Flag: boolean = false;\r\n\r\n\r\n  protected onLoad(): void {\r\n    this.hair_tut.active = false;\r\n    this.circle.active = false;\r\n    this.hand.active = false;\r\n  }\r\n\r\n\r\n  protected start(): void {\r\n    this.handleGamePlay();\r\n  }\r\n\r\n\r\n  private handleGamePlay(): void {\r\n    this.getComponent(cc.Animation).play(\"GamePlay_TutorialAnim\");\r\n\r\n    this.scheduleOnce(() => {\r\n      // ironsource\r\n      // this.AudioManager.playSound(Constants.SoundTrack.moveItemSound)\r\n    }, 0.5);\r\n\r\n    this.scheduleOnce(() => {\r\n      this.hair_tut.active = true;\r\n      this.hand.active = true;\r\n    }, 1);\r\n    \r\n    this.scheduleOnce(() => {\r\n      Constants.isCanTouch = true;\r\n    }, 2)\r\n  }\r\n\r\n\r\n  private runDoneStep1Anim(): void {\r\n    this.doneStep1Flag = true;\r\n    this.AudioManager.stopSound(Constants.SoundTrack.conClearSound);\r\n    this.getComponent(cc.Animation).play(\"GamePlay_DoneStep1Anim\");\r\n    \r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.moveItemSound)\r\n    }, 0.8)\r\n\r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.showerSound);\r\n    }, 1.5)\r\n\r\n    this.scheduleOnce(() => {\r\n      this.spine_Bubbles[0].setAnimation(0, \"action04_bubble_clean\", false);\r\n      this.spine_Bubbles[1].setAnimation(0, \"action04_bubble_clean\", false);\r\n      this.spine_Bubbles[2].setAnimation(0, \"action04_bubble_clean\", false);\r\n      this.spine_Bubbles[3].setAnimation(0, \"action04_bubble_clean\", false);\r\n    }, 1.9);\r\n\r\n    this.scheduleOnce(() => {\r\n      this.spine_Bubbles[4].setAnimation(0, \"action04_bubble_clean\", false);\r\n      this.spine_Bubbles[5].setAnimation(0, \"action04_bubble_clean\", false);\r\n      this.spine_Bubbles[6].setAnimation(0, \"action04_bubble_clean\", false);\r\n      this.spine_Bubbles[7].setAnimation(0, \"action04_bubble_clean\", false);\r\n    }, 2.3);\r\n\r\n    this.scheduleOnce(() => {\r\n      this.spine_Bubbles[8].setAnimation(0, \"action04_bubble_clean\", false);\r\n      this.spine_Bubbles[9].setAnimation(0, \"action04_bubble_clean\", false);\r\n      this.spine_Bubbles[10].setAnimation(0, \"action04_bubble_clean\", false);\r\n    }, 2.7);\r\n\r\n    this.scheduleOnce(() => {\r\n      this.spine_Bubbles[11].setAnimation(0, \"action04_bubble_clean\", false);\r\n      this.spine_Bubbles[12].setAnimation(0, \"action04_bubble_clean\", false);\r\n      this.spine_Bubbles[13].setAnimation(0, \"action04_bubble_clean\", false);\r\n    }, 3.1);\r\n\r\n    this.scheduleOnce(() => {\r\n      Constants.step = 2;\r\n      Constants.isDoneStep1 = true;\r\n    }, 3.5);\r\n\r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.completeSound);\r\n      this.Effect_Blinks.forEach(effect => effect.resetSystem());\r\n\r\n      cc.tween(this.character)\r\n      .to(1, {scale: 0.85})\r\n      .start();\r\n      cc.tween(this.character_dirtyHair)\r\n      .to(1, {opacity: 0})\r\n      .start();\r\n      cc.tween(this.dirty)\r\n      .to(1, {opacity: 0})\r\n      .start();\r\n    }, 4.3)\r\n\r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.woaAnimeSound);\r\n    }, 5.3)\r\n\r\n    this.scheduleOnce(() => {\r\n      this.getComponent(cc.Animation).play(\"GamePlay_TutorialStep2Anim\");\r\n      this.circle.active = true;\r\n    }, 6.5)\r\n\r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.moveItemSound)\r\n    }, 7);\r\n    \r\n    this.scheduleOnce(() => {\r\n      this.hand.active = true;\r\n    }, 7.5)\r\n  }\r\n\r\n\r\n  protected update(dt: number): void {\r\n      !this.doneStep1Flag && Constants.isDoneCleanHair && this.runDoneStep1Anim();\r\n  }\r\n\r\n}\r\n"]}