{"version":3,"sources":["assets\\Script\\Controller\\GamePlay.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Constants } from \"../Data/constants\";\r\nimport AudioManager from \"../Plugin/AudioManager\";\r\nimport { GameController } from \"./GameController\";\r\nimport NodeContainer from \"./NodeContanier\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GamePlay extends cc.Component {\r\n  @property(AudioManager)\r\n  AudioManager: AudioManager = null;\r\n  @property(GameController)\r\n  GameController: GameController = null;\r\n  @property(NodeContainer)\r\n  NodeContainer: NodeContainer = null;\r\n\r\n\r\n  // state\r\n  tweezersStartPos: cc.Vec2 = null;\r\n  tweezersPointStartPos: cc.Vec2 = null;\r\n  isRunFlow1: boolean = false;\r\n  checkCleanserFlag: boolean = false;\r\n  checkshowTweezersFlag: boolean = false;\r\n  isRemovingMaggot: boolean = false;\r\n\r\n\r\n  protected onLoad(): void {\r\n    this.NodeContainer.Text_Jimin.opacity = 0;\r\n    this.NodeContainer.Text_Drag.opacity = 0;\r\n    this.NodeContainer.sp_Cleanser.node.active = false;\r\n    this.NodeContainer.Cleanser.opacity = 0;\r\n    this.NodeContainer.tweezers.opacity = 0;\r\n    this.tweezersStartPos = this.NodeContainer.sp_Tweezers.node.getPosition();\r\n    this.tweezersPointStartPos = this.NodeContainer.Point_Tweezers.getPosition();\r\n\r\n    this.NodeContainer.Acne1_1.active = false;\r\n    this.NodeContainer.Acne1_2.active = false;\r\n    this.NodeContainer.Acne2_1.active = false;\r\n    this.NodeContainer.Acne2_2.active = false;\r\n  }\r\n\r\n\r\n  protected start(): void {\r\n    this.handleGamePlay();\r\n  }\r\n\r\n\r\n\r\n\r\n  private handleGamePlay(): void {\r\n    this.AudioManager.playSound(Constants.SoundTrack.bgSound);\r\n    this.scheduleOnce(() => { this.NodeContainer.Text_Jimin.getComponent(cc.Animation).play(\"ShowAnim\") }, 1);\r\n    this.scheduleOnce(() => {\r\n      this.NodeContainer.Bg_2.getComponent(cc.Animation).play(\"ShowAnim\");\r\n      this.NodeContainer.Doll.getComponent(cc.Animation).play(\"Doll_ScaleAnim\");\r\n      this.NodeContainer.Doll.getChildByName(\"JiminBase\").getComponent(cc.Animation).stop();\r\n      this.hideUIFirstStep();\r\n    }, 2);\r\n\r\n    this.scheduleOnce(() => {\r\n      this.NodeContainer.Cleanser.getComponent(cc.Animation).play(\"ShowAnim\");\r\n      this.NodeContainer.sp_Cleanser.node.active = true;\r\n      this.showTools(this.NodeContainer.sp_Cleanser);\r\n    }, 3.5);\r\n    this.scheduleOnce(() => {\r\n      this.NodeContainer.Text_Drag.getComponent(cc.Animation).play(\"ShowAnim\");\r\n    }, 4.5);\r\n    this.scheduleOnce(() => {\r\n      this.AudioManager.playSound(Constants.SoundTrack.xitNuocSound);\r\n    }, 4.8)\r\n    this.scheduleOnce(() => { cc.tween(this.NodeContainer.Hand_1).to(0.5, { opacity: 255 }).start(); Constants.isCanTouch = true; }, 6)\r\n  }\r\n\r\n\r\n  private hideUIFirstStep(): void {\r\n    cc.tween(this.NodeContainer.Text_Jimin)\r\n      .to(0.5, { opacity: 0 })\r\n      .start();\r\n\r\n    cc.tween(this.NodeContainer.sp_tearsLeft.node)\r\n      .to(0.5, { opacity: 0 })\r\n      .start();\r\n\r\n    cc.tween(this.NodeContainer.sp_tearsRight.node)\r\n      .to(0.5, { opacity: 0 })\r\n      .start();\r\n  }\r\n\r\n  private hideAnim(node: cc.Node) {\r\n    cc.tween(node)\r\n      .to(0.5, { opacity: 0 })\r\n      .start();\r\n  }\r\n\r\n  private showTools(tool: sp.Skeleton): void {\r\n    this.AudioManager.playSound(Constants.SoundTrack.moveItemSound);\r\n    let node = tool.node;\r\n    let position = node.getPosition();\r\n    node.setPosition(position.x - 30, position.y);\r\n    cc.tween(node)\r\n      .to(0.5, { x: position.x })\r\n      .start();\r\n  }\r\n\r\n\r\n  public activeCleanSound(): void {\r\n    this.AudioManager.playSound(Constants.SoundTrack.cleanSound)\r\n    this.AudioManager.cleanSound.loop = true;\r\n  }\r\n\r\n\r\n  public stopCleanSound(): void {\r\n    this.AudioManager.stopSound(Constants.SoundTrack.cleanSound)\r\n    this.AudioManager.cleanSound.loop = false;\r\n  }\r\n\r\n\r\n  public handleDoneCleanser(): void {\r\n    if (this.NodeContainer.Scratchable.getComponent(\"Scratchable\").isWin) {\r\n      Constants.isTouch = false;\r\n      Constants.isCanTouch = true;\r\n      this.stopCleanSound();\r\n      this.checkCleanserFlag = true;\r\n      this.NodeContainer.Scratchable.active = false;\r\n      this.hideAnim(this.NodeContainer.Cleanser);\r\n      this.AudioManager.playSound(Constants.SoundTrack.completeSound);\r\n      this.NodeContainer.Star_1.getComponent(cc.Animation).play(\"Star_BlinkAnim\");\r\n    }\r\n  }\r\n\r\n\r\n  private showTweezers(): void {\r\n    this.checkshowTweezersFlag = true;\r\n    this.scheduleOnce(() => {\r\n      Constants.isDoneCleanser = true;\r\n      this.NodeContainer.tweezers.getComponent(cc.Animation).play(\"ShowAnim\");\r\n      this.showTools(this.NodeContainer.sp_Tweezers);\r\n      this.scheduleOnce(() => {\r\n        this.NodeContainer.Hand_2.active = true;\r\n        Constants.isRotate\r\n          ? this.NodeContainer.Hand_2.getComponent(cc.Animation).play(\"Hand_HrzAnim\")\r\n          : this.NodeContainer.Hand_2.getComponent(cc.Animation).play(\"Hand_HintAnim\");\r\n        cc.tween(this.NodeContainer.Hand_2)\r\n          .to(0.5, { opacity: 255 })\r\n          .start();\r\n        Constants.isCanTouch = true;\r\n      }, 0.5);\r\n    }, 1.5)\r\n  }\r\n\r\n\r\n  public handleCheckRemoveMaggots(): void {\r\n    let tweezersBdx = this.NodeContainer.Point_Tweezer_Head.getBoundingBox();\r\n    let points = [this.NodeContainer.Tweezers_InteractPoint1, this.NodeContainer.Tweezers_InteractPoint2];\r\n    for (let i = 0; i < points.length; i++) {\r\n      let PointBdx = points[i].getBoundingBox();\r\n      let pointName = points[i].name;\r\n      if (tweezersBdx.intersects(PointBdx)) {\r\n        this.handleRemoveMaggot(pointName)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public handleRemoveMaggot(maggotName: string): void {\r\n    this.NodeContainer.tweezers.opacity = 0;\r\n    this.isRemovingMaggot = true;\r\n    Constants.maggotRemoved += 1;\r\n    console.log(maggotName);\r\n\r\n    switch (maggotName) {\r\n      case \"Point_Mg1\":\r\n        this.NodeContainer.Acne1_2.active = true;\r\n        this.NodeContainer.Spine_Maggot1.setAnimation(0, \"idle01\", false);\r\n        this.NodeContainer.Spine_RMMG1.node.active = true;\r\n        this.scheduleOnce(() => { this.NodeContainer.Spine_Maggot1.node.active = false }, 0.75);\r\n        this.activeRemoveMaggotSound();\r\n        this.scheduleOnce(() => {\r\n          this.NodeContainer.Acne1_1.active = true;\r\n        }, 3.6)\r\n        this.setCompleteSpine(this.NodeContainer.Spine_RMMG1, maggotName);\r\n        break;\r\n      case \"Point_Mg3\":\r\n        this.NodeContainer.Acne2_2.active = true;\r\n        this.NodeContainer.Spine_Maggot2.setAnimation(0, \"idle01\", false);\r\n        this.NodeContainer.Spine_RMMG2.node.active = true;\r\n        this.scheduleOnce(() => { this.NodeContainer.Spine_Maggot2.node.active = false }, 0.75);\r\n        this.activeRemoveMaggotSound();\r\n        this.scheduleOnce(() => {\r\n          this.NodeContainer.Acne2_1.active = true;\r\n        }, 3.6)\r\n        this.setCompleteSpine(this.NodeContainer.Spine_RMMG2, maggotName);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n\r\n  private activeRemoveMaggotSound(): void {\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.nhoMun1Sound) }, 0.75);\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound) }, 1.5);\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound) }, 2.2);\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.nhoMun2Sound) }, 2.8);\r\n    this.scheduleOnce(() => { this.AudioManager.playSound(Constants.SoundTrack.nhoMun3Sound) }, 3.6);\r\n  }\r\n\r\n\r\n  public setCompleteSpine(spine: sp.Skeleton, name: string): void {\r\n    spine.setCompleteListener((trackEntry: sp.spine.TrackEntry) => {\r\n      if (trackEntry.animation.name === \"Action\") {\r\n        this.showTweezers();\r\n        this.AudioManager.playSound(Constants.SoundTrack.completeSound);\r\n        this.NodeContainer.sp_Tweezers.node.setPosition(this.tweezersStartPos);\r\n        this.NodeContainer.Point_Tweezers.setPosition(this.tweezersPointStartPos);\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n\r\n  protected update(dt: number): void {\r\n    !this.checkCleanserFlag && this.handleDoneCleanser();\r\n    this.checkCleanserFlag && !this.checkshowTweezersFlag && this.showTweezers();\r\n    this.checkshowTweezersFlag && !this.isRemovingMaggot && this.handleCheckRemoveMaggots();\r\n  }\r\n\r\n}\r\n"]}