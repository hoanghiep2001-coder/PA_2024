{"version":3,"sources":["assets\\Script\\Controller\\RopePart.js"],"names":["cc","Class","Component","properties","Anchor_Position","range","notify","CC_EDITOR","Update_Anchor","Pos_Short","Pos_Long","onLoad","Joints","node","getComponentsInChildren","RevoluteJoint","reverse","i","length","part_count","ap","misc","clamp01","anchor","lerp","name","startsWith","x","connectedAnchor","apply","height","y"],"mappings":";;;;;;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,eAAe,EAAE;AACb,iBAAS,CADI;AAEbC,MAAAA,KAAK,EAAE,CAAC,CAAD,EAAI,CAAJ,CAFM;AAGbC,MAAAA,MAHa,oBAGJ;AACL,YAAIC,SAAJ,EAAe;AACf,aAAKC,aAAL;AACH;AANY,KADT;AASRC,IAAAA,SAAS,EAAE,CATH;AAURC,IAAAA,QAAQ,EAAE;AAVF,GAHP;AAgBLC,EAAAA,MAhBK,oBAgBI;AACL,SAAKC,MAAL,GAAc,KAAKC,IAAL,CAAUC,uBAAV,CAAkCd,EAAE,CAACe,aAArC,CAAd;AACA,SAAKH,MAAL,CAAYI,OAAZ;AACH,GAnBI;AAqBLR,EAAAA,aArBK,2BAqBW;AAEZ,SAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKL,MAAL,CAAYM,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AACzC,UAAIE,UAAU,GAAG,KAAKP,MAAL,CAAYM,MAA7B;AAEA,UAAIE,EAAE,GAAGpB,EAAE,CAACqB,IAAH,CAAQC,OAAR,CAAgB,CAAC,KAAKlB,eAAL,GAAuBa,CAAC,IAAI,IAAIE,UAAR,CAAzB,IAAgDA,UAAhE,CAAT;AAEA,UAAII,MAAM,GAAGvB,EAAE,CAACqB,IAAH,CAAQG,IAAR,CAAa,KAAKf,SAAlB,EAA6B,KAAKC,QAAlC,EAA4CU,EAA5C,CAAb;;AACA,UAAI,KAAKR,MAAL,CAAYK,CAAZ,EAAeQ,IAAf,CAAoBC,UAApB,CAA+B,UAA/B,CAAJ,EAAgD;AAC5C,aAAKd,MAAL,CAAYK,CAAZ,EAAeM,MAAf,CAAsBI,CAAtB,GAA0BJ,MAA1B;AACA,aAAKX,MAAL,CAAYK,CAAZ,EAAeW,eAAf,CAA+BD,CAA/B,GAAmC,CAACJ,MAApC;AACA,aAAKX,MAAL,CAAYK,CAAZ,EAAeY,KAAf;AACA,aAAKjB,MAAL,CAAYK,CAAZ,EAAeJ,IAAf,CAAoBiB,MAApB,GAA6B9B,EAAE,CAACqB,IAAH,CAAQG,IAAR,CAAaD,MAAM,GAAG,CAAtB,EAAyB,KAAKb,QAAL,GAAgB,CAAhB,GAAoB,EAA7C,EAAiD,GAAjD,CAA7B;AACH;;AAED,UAAI,KAAKE,MAAL,CAAYK,CAAZ,EAAeQ,IAAf,CAAoBC,UAApB,CAA+B,gBAA/B,CAAJ,EAAsD;AAClD,aAAKd,MAAL,CAAYK,CAAZ,EAAeM,MAAf,CAAsBQ,CAAtB,GAA0BR,MAA1B;AACA,aAAKX,MAAL,CAAYK,CAAZ,EAAeW,eAAf,CAA+BD,CAA/B,GAAmC,CAACJ,MAApC;AACA,aAAKX,MAAL,CAAYK,CAAZ,EAAeY,KAAf;AACA,aAAKjB,MAAL,CAAYK,CAAZ,EAAeJ,IAAf,CAAoBiB,MAApB,GAA6B9B,EAAE,CAACqB,IAAH,CAAQG,IAAR,CAAaD,MAAM,GAAG,CAAtB,EAAyB,KAAKb,QAAL,GAAgB,CAAhB,GAAoB,EAA7C,EAAiD,GAAjD,CAA7B;AACA;AACH,OAnBwC,CAqBzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACH;AAEJ;AAtDI,CAAT","sourceRoot":"/","sourcesContent":["\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Anchor_Position: {\r\n            default: 1,\r\n            range: [0, 1],\r\n            notify() {\r\n                if (CC_EDITOR) return;\r\n                this.Update_Anchor();\r\n            }\r\n        },\r\n        Pos_Short: 0,\r\n        Pos_Long: 24,\r\n    },\r\n\r\n    onLoad() {\r\n        this.Joints = this.node.getComponentsInChildren(cc.RevoluteJoint);\r\n        this.Joints.reverse();\r\n    },\r\n\r\n    Update_Anchor() {\r\n\r\n        for (let i = 1; i < this.Joints.length; i++) {\r\n            let part_count = this.Joints.length;\r\n\r\n            let ap = cc.misc.clamp01((this.Anchor_Position - i * (1 / part_count)) * part_count);\r\n\r\n            let anchor = cc.misc.lerp(this.Pos_Short, this.Pos_Long, ap);\r\n            if (this.Joints[i].name.startsWith(\"RopeItem\")) {\r\n                this.Joints[i].anchor.x = anchor;\r\n                this.Joints[i].connectedAnchor.x = -anchor;\r\n                this.Joints[i].apply();\r\n                this.Joints[i].node.height = cc.misc.lerp(anchor * 2, this.Pos_Long * 2 + 12, 0.8);\r\n            }\r\n\r\n            if (this.Joints[i].name.startsWith(\"RopeItem_First\")) {\r\n                this.Joints[i].anchor.y = anchor;\r\n                this.Joints[i].connectedAnchor.x = -anchor;\r\n                this.Joints[i].apply();\r\n                this.Joints[i].node.height = cc.misc.lerp(anchor * 2, this.Pos_Long * 2 + 12, 0.8);\r\n                break;\r\n            }\r\n\r\n            // if (this.Joints[i].name.startsWith(\"RopeItem_Last\")) {\r\n            //     console.log(this.Joints[i].name);\r\n            //     this.Joints[i].anchor.y = anchor;\r\n            //     this.Joints[i].connectedAnchor.x = -anchor;\r\n            //     this.Joints[i].apply();\r\n            //     this.Joints[i].node.height = cc.misc.lerp(anchor * 2, this.Pos_Long * 2 + 40, 0.8);\r\n            //     break;\r\n            // }\r\n        }\r\n\r\n    }\r\n\r\n\r\n});\r\n"]}