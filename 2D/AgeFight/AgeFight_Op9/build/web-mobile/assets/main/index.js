window.__require=function t(e,n,o){function r(s,a){if(!n[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var u="function"==typeof __require&&__require;if(!a&&u)return u(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){return r(e[s][1][t]||t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<o.length;s++)r(o[s]);return r}({Army:[function(t,e,n){"use strict";cc._RF.push(e,"e890fnTUplJe5ZAPuR2b1Xy","Army");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Controller/KingController"),a=t("../Data/constants"),c=t("../Plugin/AudioManager"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.HealthBar=null,e.AudioManager=null,e.spine=null,e.collider=null,e.skin="",e.speed=25,e.canRun=!0,e.isBase=!1,e.isLive=!0,e.isAttacking=!1,e.isReadyToFight=!1,e.pauseFlag=!1,e.rigidbody=null,e.collisionCount=0,e}var n;return r(e,t),n=e,e.prototype.start=function(){this.AudioManager=this.node.parent.parent.parent.parent.parent.parent.getChildByName("AudioManager").getComponent(c.default),this.spine=this.node.getChildByName("Spine").getComponent(sp.Skeleton),this.collider=this.getComponent(cc.BoxCollider)},e.prototype.onCollisionEnter=function(t,e){return"enemy"===this.skin&&7===t.tag?(this.collisionCount++,this.setCollisionForEnemy(t),void(this.canRun=!1)):1!==t.tag&&0!==t.tag&&2!==t.tag||9===e.tag?(9===t.tag&&(this.isReadyToFight=!0),void(this.collisionCount<0&&(this.collisionCount=0))):(this.collisionCount++,this.skin===a.Constants.ArmySkin.Ally&&this.setCollisionForAlly(t),this.skin===a.Constants.ArmySkin.Enemy&&this.setCollisionForEnemy(t),void(this.canRun=!1))},e.prototype.onCollisionStay=function(t,e){1!==t.tag&&0!==t.tag||9===e.tag||(this.canRun=!1)},e.prototype.onCollisionExit=function(t){9===t.tag&&(this.isReadyToFight=!1),this.isLive&&((1===t.tag||0===t.tag||2===t.tag||"enemy"===this.skin&&7===t.tag&&!this.isAttacking)&&(this.collisionCount--,0===this.collisionCount&&(this.canRun=!0,this.spine.setAnimation(0,a.Constants.ArmyAnim.Run,!0))),this.collisionCount<0&&(this.collisionCount=0))},e.prototype.setCollisionForAlly=function(t){0!==t.tag&&2!==t.tag||(this.canRun=!1,"Attack"!==this.spine.animation&&this.spine.setAnimation(0,a.Constants.ArmyAnim.Attack,!0),"Army_Lv2"===this.node.name&&this.AudioManager.playSound(a.Constants.SoundTrack.ArmyLv2HitSound),this.checkDoneAttackAnim(!1,t)),0===t.tag&&(this.isBase=!0)},e.prototype.setCollisionForEnemy=function(t){1!==t.tag&&2!==t.tag||(this.canRun=!1,"Attack"!==this.spine.animation&&this.spine.setAnimation(0,a.Constants.ArmyAnim.Attack,!0),this.checkDoneAttackAnim(!1,t)),7===t.tag&&(this.isAttacking=!0,this.canRun=!1,"Attack"!==this.spine.animation&&this.spine.setAnimation(0,a.Constants.ArmyAnim.Attack,!0),this.checkDoneAttackAnim(!0,t)),1===t.tag&&(this.isBase=!0)},e.prototype.checkDoneAttackAnim=function(t,e){var n=this;this.spine.setCompleteListener(function(o){if("Attack"===o.animation.name){if(t&&e.getComponent(s.default))return e.getComponent(s.default).decreaseHealth(),n.isAttacking=!1,n.collisionCount--,void(0===n.collisionCount&&(n.canRun=!0,n.spine.setAnimation(0,a.Constants.ArmyAnim.Run,!0)));e&&e.node.getChildByName("Spine").getChildByName("Vfx_1").getComponent(cc.Animation).play(),n.isBase?n.handleDecreaseHealthBase():n.handleDecreaseHealthArmy()}})},e.prototype.handleDecreaseHealthBase=function(){if("ally"===this.skin&&"Army_Lv3"===this.node.name)return a.Constants.EnemyBaseHeal-=.1,void this.AudioManager.playSound(a.Constants.SoundTrack.ArmyLv3HitSound);if("Army2_Lv3"===this.node.name){this.AudioManager.playSound(a.Constants.SoundTrack.Lv2_Tank);var t=this.node.getChildByName("Blast").getComponent(sp.Skeleton);return t.node.active=!0,t.setAnimation(0,"2",!1),void(a.Constants.EnemyBaseHeal-=.2)}return"Army2_Lv2"===this.node.name?(a.Constants.EnemyBaseHeal-=.1,void this.AudioManager.playSound(a.Constants.SoundTrack.Lv2_Gun)):"ally"===this.skin&&"Army_Lv2"===this.node.name?(this.AudioManager.playSound(a.Constants.SoundTrack.ArmyLv1HitSound),void(a.Constants.EnemyBaseHeal-=.08)):("ally"===this.skin&&(this.AudioManager.playSound(a.Constants.SoundTrack.ArmyLv1HitSound),a.Constants.EnemyBaseHeal-=.05),void("enemy"===this.skin&&(a.Constants.AllyBaseHeal-=.05,this.AudioManager.playSound(a.Constants.SoundTrack.ArmyLv1HitSound))))},e.prototype.handleDecreaseHealthArmy=function(){if("ally"===this.skin){if("Army_Lv3"===this.node.name)return a.Constants.enemyArmies[0].getComponent(n).HealthBar.scaleX-=.5,void this.AudioManager.playSound(a.Constants.SoundTrack.ArmyLv3HitSound);if("Army2_Lv3"===this.node.name){this.AudioManager.playSound(a.Constants.SoundTrack.Lv2_Tank);var t=this.node.getChildByName("Blast").getComponent(sp.Skeleton);return t.node.active=!0,t.setAnimation(0,"2",!1),void(a.Constants.enemyArmies[0].getComponent(n).HealthBar.scaleX-=1)}return"Army2_Lv2"===this.node.name?(a.Constants.enemyArmies[0].getComponent(n).HealthBar.scaleX-=.5,void this.AudioManager.playSound(a.Constants.SoundTrack.Lv2_Gun)):"Army_Lv2"===this.node.name?(a.Constants.enemyArmies[0].getComponent(n).HealthBar.scaleX-=.2,void this.AudioManager.playSound(a.Constants.SoundTrack.ArmyLv1HitSound)):"Army2_Lv1"===this.node.name?(a.Constants.enemyArmies[0].getComponent(n).HealthBar.scaleX-=.3,void this.AudioManager.playSound(a.Constants.SoundTrack.Lv2_Kinife)):(a.Constants.enemyArmies[0].getComponent(n).HealthBar.scaleX-=.2,void this.AudioManager.playSound(a.Constants.SoundTrack.ArmyLv1HitSound))}a.Constants.allyArmies[0]&&(this.AudioManager.playSound(a.Constants.SoundTrack.ArmyLv1HitSound),a.Constants.allyArmies[0].getComponent(n).HealthBar.scaleX-=.2)},e.prototype.die=function(){this.node.getComponent(cc.Collider).enabled=!1,this.node.getComponent(cc.Collider).destroy(),this.node.getComponent(n).enabled=!1,"enemy"===this.skin?(a.Constants.enemyDie+=1,a.Constants.enemyArmies.splice(0,1)):a.Constants.allyArmies.splice(0,1)},e.prototype.checkDie=function(){var t=this;this.isLive=!1,this.spine.timeScale=.3,this.spine.setAnimation(0,a.Constants.ArmyAnim.Die,!1),this.HealthBar.active=!1,cc.tween(this.node).to(1,{opacity:0}).call(function(){return t.node.destroy()}).start(),this.die()},e.prototype.checkRun=function(){if(this.isLive){var t=null,e=null;if("ally"===this.skin&&this.canRun){var n=this.node.getPosition();if(t=this.isReadyToFight?this.roadToEnemyPos(n,"ally"):n,"Army_Lv3"===this.node.name||"Army2_Lv3"===this.node.name)return e=new cc.Vec2(n.x+25+a.Constants.Responsive.speedCalculated,t.y),void this.node.setPosition(n.lerp(e,.02,n));"Army"!==this.node.name&&"Army2_Lv2"!==this.node.name&&"Army2_Lv1"!==this.node.name&&"Army_Lv2"!==this.node.name||(e=new cc.Vec2(n.x+10+a.Constants.Responsive.speedCalculated,t.y),this.node.setPosition(n.lerp(e,.02,n)))}"enemy"===this.skin&&this.canRun&&(n=this.node.getPosition(),t=this.isReadyToFight?this.roadToEnemyPos(n,"enemy"):n,e=a.Constants.isRotate?new cc.Vec2(n.x-30-a.Constants.Responsive.speedCalculated,t.y):new cc.Vec2(n.x-20-a.Constants.Responsive.speedCalculated,t.y),this.node.setPosition(n.lerp(e,.02,n)))}},e.prototype.roadToEnemyPos=function(t,e){return"ally"===e?a.Constants.enemyArmies[0]?a.Constants.enemyArmies[0].getPosition():t:a.Constants.allyArmies[0]?a.Constants.allyArmies[0].getPosition():t},e.prototype.checkPause=function(){if(a.Constants.isPauseGame&&(this.canRun=!1),a.Constants.isPauseGame&&!this.pauseFlag)return this.canRun=!1,this.collider.enabled=!1,this.pauseFlag=!0,void this.spine.setAnimation(0,a.Constants.ArmyAnim.Run,!0);a.Constants.isPauseGame||(this.pauseFlag=!1)},e.prototype.update=function(){this.checkPause(),this.HealthBar.scaleX<=.1&&this.isLive&&this.checkDie(),this.checkRun()},i([d(cc.Node)],e.prototype,"HealthBar",void 0),n=i([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../Controller/KingController":"KingController","../Data/constants":"constants","../Plugin/AudioManager":"AudioManager"}],AudioManager:[function(t,e,n){"use strict";cc._RF.push(e,"4c7cf9rDSJL36cJtz1lUze/","AudioManager");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Data/constants"),a=cc._decorator,c=a.ccclass,u=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgSound=null,e.ArmyLv1HitSound=null,e.ArmyLv2HitSound=null,e.ArmyLv3HitSound=null,e.earthQuakeSound=null,e.clickSound=null,e.buySound=null,e.coinSound=null,e.failSound=null,e.winSound=null,e.heliSound=null,e.UpgradeSound=null,e.HelpMe=null,e.Lv2_Kinife=null,e.Lv2_Gun=null,e.Lv2_Tank=null,e}return r(e,t),e.prototype.playSound=function(t){this.normalNetwork(t)},e.prototype.normalNetwork=function(t){if(s.Constants.ironSource.SoundState&&!s.Constants.ironSource.isEndGame)switch(t){case"bgSound":this.bgSound.play();break;case"HelpMe":this.HelpMe.play();break;case"earthQuakeSound":this.earthQuakeSound.play();break;case"UpgradeSound":this.UpgradeSound.play();break;case"heliSound":this.heliSound.play();break;case"ArmyLv1HitSound":this.ArmyLv1HitSound.play();break;case"ArmyLv2HitSound":this.ArmyLv2HitSound.play();break;case"ArmyLv3HitSound":this.ArmyLv3HitSound.play();break;case"clickSound":this.clickSound.play();break;case"buySound":this.buySound.play();break;case"coinSound":this.coinSound.play();break;case"failSound":this.failSound.play();break;case"winSound":this.winSound.play();break;case"UpgradeSound":this.UpgradeSound.play();break;case"Lv2_Kinife":this.Lv2_Kinife.play();break;case"Lv2_Gun":this.Lv2_Gun.play();break;case"Lv2_Tank":this.Lv2_Tank.play()}},e.prototype.stopSound=function(t){switch(t){case"bgSound":this.bgSound.stop();break;case"HelpMe":this.HelpMe.stop();break;case"UpgradeSound":this.UpgradeSound.stop();break;case"earthQuakeSound":this.earthQuakeSound.stop();break;case"heliSound":this.heliSound.stop();break;case"ArmyLv1HitSound":this.ArmyLv1HitSound.stop();break;case"ArmyLv2HitSound":this.ArmyLv2HitSound.stop();break;case"ArmyLv3HitSound":this.ArmyLv3HitSound.stop();break;case"clickSound":this.clickSound.stop();break;case"buySound":this.buySound.stop();break;case"coinSound":this.coinSound.stop();break;case"failSound":this.failSound.stop();break;case"winSound":this.winSound.stop();break;case"UpgradeSound":this.UpgradeSound.stop();break;case"Lv2_Kinife":this.Lv2_Kinife.stop();break;case"Lv2_Gun":this.Lv2_Gun.stop();break;case"Lv2_Tank":this.Lv2_Tank.stop()}},e.prototype.stopAllSound=function(){this.UpgradeSound.stop(),this.Lv2_Kinife.stop(),this.Lv2_Gun.stop(),this.Lv2_Tank.stop(),this.HelpMe.stop(),this.bgSound.stop(),this.ArmyLv1HitSound.stop(),this.ArmyLv2HitSound.stop(),this.ArmyLv3HitSound.stop(),this.earthQuakeSound.stop(),this.clickSound.stop(),this.buySound.stop(),this.coinSound.stop(),this.heliSound.stop(),this.UpgradeSound.stop()},i([u(cc.AudioSource)],e.prototype,"bgSound",void 0),i([u(cc.AudioSource)],e.prototype,"ArmyLv1HitSound",void 0),i([u(cc.AudioSource)],e.prototype,"ArmyLv2HitSound",void 0),i([u(cc.AudioSource)],e.prototype,"ArmyLv3HitSound",void 0),i([u(cc.AudioSource)],e.prototype,"earthQuakeSound",void 0),i([u(cc.AudioSource)],e.prototype,"clickSound",void 0),i([u(cc.AudioSource)],e.prototype,"buySound",void 0),i([u(cc.AudioSource)],e.prototype,"coinSound",void 0),i([u(cc.AudioSource)],e.prototype,"failSound",void 0),i([u(cc.AudioSource)],e.prototype,"winSound",void 0),i([u(cc.AudioSource)],e.prototype,"heliSound",void 0),i([u(cc.AudioSource)],e.prototype,"UpgradeSound",void 0),i([u(cc.AudioSource)],e.prototype,"HelpMe",void 0),i([u(cc.AudioSource)],e.prototype,"Lv2_Kinife",void 0),i([u(cc.AudioSource)],e.prototype,"Lv2_Gun",void 0),i([u(cc.AudioSource)],e.prototype,"Lv2_Tank",void 0),i([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../Data/constants":"constants"}],BaseController:[function(t,e,n){"use strict";cc._RF.push(e,"ff0ebeMo+dPNqttw4fwK25C","BaseController");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Data/constants"),a=t("../Plugin/AudioManager"),c=t("./GamePlay"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AudioManager=null,e.GamePlay=null,e.baseLose=null,e.HealthBar=null,e.baseSide="",e.baseLv2=null,e.rigidbody=null,e.collider=null,e.isUpgrade=!1,e}return r(e,t),e.prototype.start=function(){"Player"===this.baseSide&&(this.baseLv2=this.node.getChildByName("base").getChildByName("baseLv2"))},e.prototype.update=function(){"Player"!==this.baseSide||s.Constants.isHasResult||(this.HealthBar.scaleX<.05&&(s.Constants.isHasResult=!0,s.Constants.isPauseGame=!0,s.Constants.isLoose=!0,this.HealthBar.active=!1,this.baseLose.active=!0,this.AudioManager.playSound(s.Constants.SoundTrack.earthQuakeSound),this.node.getChildByName("base").getComponent(cc.Sprite).enabled=!1,this.node.getChildByName("base").getChildByName("HealBar").active=!1,this.GamePlay.CTA.active=!0),this.HealthBar.scaleX=s.Constants.AllyBaseHeal),"Enemy"!==this.baseSide||s.Constants.isHasResult||(this.HealthBar.scaleX<.05&&(s.Constants.isHasResult=!0,s.Constants.isPauseGame=!0,this.baseLose.active=!0,this.HealthBar.active=!1,this.AudioManager.playSound(s.Constants.SoundTrack.earthQuakeSound),this.node.getChildByName("base").getComponent(cc.Sprite).enabled=!1,this.node.getChildByName("base").getChildByName("HealBar").active=!1,this.GamePlay.CTA.active=!0),this.HealthBar.scaleX=s.Constants.EnemyBaseHeal),"Player"===this.baseSide&&s.Constants.isUpgrade&&!this.isUpgrade&&(this.isUpgrade=!0,this.node.getChildByName("base").getComponent(cc.Sprite).enabled=!1,this.baseLv2.active=!0)},i([d(a.default)],e.prototype,"AudioManager",void 0),i([d(c.default)],e.prototype,"GamePlay",void 0),i([d(cc.Node)],e.prototype,"baseLose",void 0),i([d(cc.Node)],e.prototype,"HealthBar",void 0),i([d(cc.String)],e.prototype,"baseSide",void 0),i([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager","./GamePlay":"GamePlay"}],BossController:[function(t,e,n){"use strict";cc._RF.push(e,"4c056/xdspPmoaGSWmCeGgR","BossController");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Data/constants"),a=t("../Plugin/AudioManager"),c=cc._decorator,u=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AudioManager=null,e.blast1=null,e.blast2=null,e.blast3=null,e}return r(e,t),e.prototype.start=function(){var t=this;this.AudioManager.playSound(s.Constants.SoundTrack.heliSound),this.scheduleOnce(function(){t.blast1.node.active=!0,t.AudioManager.playSound(s.Constants.SoundTrack.earthQuakeSound)},.5),this.scheduleOnce(function(){t.blast2.node.active=!0,t.AudioManager.playSound(s.Constants.SoundTrack.earthQuakeSound)},.7),this.scheduleOnce(function(){t.blast3.node.active=!0,t.AudioManager.playSound(s.Constants.SoundTrack.earthQuakeSound)},1),cc.tween(this.node).to(1,{scale:s.Constants.scaleBoss,x:-40,y:-30}).call(function(){s.Constants.isWin=!0,s.Constants.isPauseGame=!0}).start()},i([l(a.default)],e.prototype,"AudioManager",void 0),i([l(sp.Skeleton)],e.prototype,"blast1",void 0),i([l(sp.Skeleton)],e.prototype,"blast2",void 0),i([l(sp.Skeleton)],e.prototype,"blast3",void 0),i([u],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager"}],CTA:[function(t,e,n){"use strict";cc._RF.push(e,"71158ED8B1KhJK96FnjvNWK","CTA");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Controller/GameController"),a=t("../Data/constants"),c=t("../Plugin/AudioManager"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GameController=null,e.AudioManager=null,e.btn=null,e.overlay=null,e.PS=null,e.Next=null,e.tryAgain=null,e}return r(e,t),e.prototype.start=function(){var t=this;this.activeTweenForBtn(),a.Constants.isLoose?(this.tryAgain.active=!0,this.Next.active=!1):(this.tryAgain.active=!1,this.Next.active=!0,this.PS.resetSystem()),this.scheduleOnce(function(){a.Constants.isLoose?t.AudioManager.playSound(a.Constants.SoundTrack.failSound):t.AudioManager.playSound(a.Constants.SoundTrack.winSound)},1.5),this.btn.on(cc.Node.EventType.TOUCH_START,this.GameController.installHandle,this),this.overlay.on(cc.Node.EventType.TOUCH_START,this.GameController.installHandle,this)},e.prototype.activeTweenForBtn=function(){cc.tween(this.btn).repeatForever(cc.tween(this.btn).to(.5,{scale:.45}).to(.5,{scale:.5},{easing:cc.easing.elasticOut})).start()},i([d(s.GameController)],e.prototype,"GameController",void 0),i([d(c.default)],e.prototype,"AudioManager",void 0),i([d(cc.Node)],e.prototype,"btn",void 0),i([d(cc.Node)],e.prototype,"overlay",void 0),i([d(cc.ParticleSystem)],e.prototype,"PS",void 0),i([d(cc.Node)],e.prototype,"Next",void 0),i([d(cc.Node)],e.prototype,"tryAgain",void 0),i([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../Controller/GameController":"GameController","../Data/constants":"constants","../Plugin/AudioManager":"AudioManager"}],CoinController:[function(t,e,n){"use strict";cc._RF.push(e,"f60c4CpqFlH750A1K4ORO4l","CoinController");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Data/constants"),a=t("../Plugin/AudioManager"),c=cc._decorator,u=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AudioManager=null,e.frameUnlockArmies=[],e.frameUpgrade=null,e.label=null,e.tempEnemyDie=0,e.isTweenRunning=!1,e}return r(e,t),e.prototype.start=function(){},e.prototype.increaseCoin=function(t,e){var n=this;this.isTweenRunning||(this.AudioManager.playSound(s.Constants.SoundTrack.coinSound),this.label.string=String(t),cc.tween(s.Constants).to(.5,{currentCoin:e},{progress:function(t,e,o,r){var i=Math.floor(cc.misc.lerp(t,e,r));return n.label.string=i.toString(),i}}).call(function(){n.isTweenRunning=!1}).start())},e.prototype.checkUnlockArmy=function(){for(var t=0;t<this.frameUnlockArmies.length;t++){var e=this.frameUnlockArmies[t],n=e.getChildByName("Label").getComponent(cc.Label);s.Constants.currentCoin<Number(n.string)?e.color=cc.color(113,113,113,255):e.color=cc.color(255,255,255,255)}},e.prototype.checkEnableFrameUpgrade=function(){var t=this.frameUpgrade;if(t){var e=t.getChildByName("Label").getComponent(cc.Label);s.Constants.currentCoin<Number(e.string)?t.color=cc.color(113,113,113,255):t.color=cc.color(255,255,255,255)}},e.prototype.update=function(){if(this.checkUnlockArmy(),this.tempEnemyDie!==s.Constants.enemyDie){var t=30*s.Constants.enemyDie;this.increaseCoin(s.Constants.currentCoin,t)}this.tempEnemyDie=s.Constants.enemyDie},i([l(a.default)],e.prototype,"AudioManager",void 0),i([l([cc.Node])],e.prototype,"frameUnlockArmies",void 0),i([l(cc.Node)],e.prototype,"frameUpgrade",void 0),i([l(cc.Label)],e.prototype,"label",void 0),i([u],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager"}],GameController:[function(t,e,n){"use strict";cc._RF.push(e,"459a6fkmHFH5Z+5+z1O55SB","GameController");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.GameController=void 0;var s=t("../Data/constants"),a=t("../Plugin/AudioManager"),c=cc._decorator,u=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AudioManager=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){window.gameReady&&window.gameReady()},e.prototype.installHandle=function(){if(console.log("install"),s.Constants.ironSource.isEndGame=!0,this.AudioManager.stopAllSound(),window.gameEnd&&window.gameEnd(),"undefined"==typeof playableSDK)if("undefined"==typeof ExitApi){if("undefined"==typeof dapi)return"undefined"!=typeof mraid?(cc.sys.os==cc.sys.OS_ANDROID||(cc.sys.os,cc.sys.ANDROID),void mraid.open("https://play.google.com/store/apps/details?id=com.an.epicwarrior.stoneage")):void(window.install&&window.install());dapi.openStoreUrl()}else ExitApi.exit();else window.playableSDK.openAppStore()},i([l(a.default)],e.prototype,"AudioManager",void 0),i([u],e)}(cc.Component);n.GameController=d,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager"}],GamePlay:[function(t,e,n){"use strict";cc._RF.push(e,"b1d34srP15JNoxtzOCtQ0oZ","GamePlay");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Data/constants"),a=t("../Plugin/AudioManager"),c=t("./GameController"),u=t("./LoadFoodController"),l=t("./SpawnController"),d=cc._decorator,p=d.ccclass,h=d.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AudioManager=null,e.GameController=null,e.LoadFoodController=null,e.SpawnController=null,e.CTA=null,e.isCollideBaseFlag=!1,e}return r(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0;var t=cc.director.getCollisionManager();t.enabled=!0,t.enabledDrawBoundingBox=!0},e.prototype.resetGame=function(){s.Constants.allyArmies.forEach(function(t){return t.destroy()}),s.Constants.enemyArmies.forEach(function(t){return t.destroy()}),s.Constants.isStartGame=!1,s.Constants.isPauseGame=!1,s.Constants.isCanBuyArmyLv2=!1,s.Constants.isCanBuyArmyLv3=!1,s.Constants.isUpgrade=!1,s.Constants.isWin=!1,s.Constants.isLoose=!1,s.Constants.isCollideBase=!1,s.Constants.food=6,s.Constants.enemyDie=0,s.Constants.currentCoin=0,s.Constants.EnemyBaseHeal=1,s.Constants.AllyBaseHeal=1,s.Constants.allyArmies=[],s.Constants.enemyArmies=[],cc.director.loadScene("game")},e.prototype.initGame=function(){s.Constants.allyArmies.forEach(function(t){return t.destroy()}),s.Constants.enemyArmies.forEach(function(t){return t.destroy()}),s.Constants.isStartGame=!1,s.Constants.isPauseGame=!1,s.Constants.isCanBuyArmyLv2=!1,s.Constants.isCanBuyArmyLv3=!1,s.Constants.isUpgrade=!1,s.Constants.isWin=!1,s.Constants.isLoose=!1,s.Constants.isCollideBase=!1,s.Constants.food=6,s.Constants.enemyDie=0,s.Constants.currentCoin=0,s.Constants.EnemyBaseHeal=1,s.Constants.AllyBaseHeal=1,s.Constants.allyArmies=[],s.Constants.enemyArmies=[]},e.prototype.start=function(){var t=this;this.AudioManager.playSound(s.Constants.SoundTrack.bgSound),this.AudioManager.bgSound.volume=.5,this.initGame(),cc.view.setResizeCallback(function(){s.Constants.ironSource.isEndGame||t.resetGame()})},e.prototype.spawnArmy=function(t){switch(s.Constants.isPauseGame=!1,!s.Constants.isStartGame&&this.LoadFoodController.increaseFood(),!s.Constants.isStartGame&&this.SpawnController.SpawnEnemies(),s.Constants.isStartGame=!0,t){case 1:s.Constants.food>=3&&(s.Constants.food-=3,this.SpawnController.SpawnPlayerArmy(s.Constants.ArmySkin.Ally,1));break;case 2:s.Constants.food>=4&&s.Constants.isCanBuyArmyLv2&&(s.Constants.food-=4,this.SpawnController.SpawnPlayerArmy(s.Constants.ArmySkin.Ally,2));break;case 3:s.Constants.food>=5&&s.Constants.isCanBuyArmyLv3&&(s.Constants.food-=5,this.SpawnController.SpawnPlayerArmy(s.Constants.ArmySkin.Ally,3));break;default:console.log("can not spawn")}},i([h(a.default)],e.prototype,"AudioManager",void 0),i([h(c.GameController)],e.prototype,"GameController",void 0),i([h(u.default)],e.prototype,"LoadFoodController",void 0),i([h(l.default)],e.prototype,"SpawnController",void 0),i([h(cc.Node)],e.prototype,"CTA",void 0),i([p],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager","./GameController":"GameController","./LoadFoodController":"LoadFoodController","./SpawnController":"SpawnController"}],IronSource:[function(t,e,n){"use strict";cc._RF.push(e,"49c0ang8TBDWqCvjXG1XKDi","IronSource");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Data/constants"),a=t("../Plugin/AudioManager"),c=cc._decorator,u=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AudioManager=null,e}return r(e,t),e.prototype.handleIronSourcePlaySound=function(){s.Constants.ironSource.isPlayBgSound||(s.Constants.ironSource.isPlayBgSound=!0,s.Constants.ironSource.SoundState&&this.AudioManager.playSound(s.Constants.SoundTrack.bgSound))},e.prototype.handleMuteSoundIronSource=function(){s.Constants.ironSource.State=parseInt(localStorage.getItem("cocosSoundState"),10),s.Constants.ironSource.State&&(1!==s.Constants.ironSource.State||s.Constants.ironSource.SoundState||s.Constants.ironSource.isEndGame||(s.Constants.ironSource.SoundState=!0,this.AudioManager.playSound(s.Constants.SoundTrack.bgSound)),2===s.Constants.ironSource.State&&s.Constants.ironSource.SoundState&&(s.Constants.ironSource.SoundState=!1,this.AudioManager.stopAllSound()))},i([l(a.default)],e.prototype,"AudioManager",void 0),i([u],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager"}],KingController:[function(t,e,n){"use strict";cc._RF.push(e,"de5b51lmitFXq1nuMymTFt2","KingController");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Data/constants"),a=t("../Plugin/AudioManager"),c=t("../Plugin/Responsive"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Base=null,e.HealthBar=null,e.CTA=null,e.Responsive=null,e.AudioManager=null,e.spine=null,e.collider=null,e.skin="",e.speed=25,e.canRun=!0,e.isBase=!1,e.isLive=!0,e.isAttacking=!1,e.isReadyToFight=!1,e.pauseFlag=!1,e.rigidbody=null,e}var n;return r(e,t),n=e,e.prototype.start=function(){var t=this;this.AudioManager=this.node.parent.parent.parent.parent.getChildByName("AudioManager").getComponent(a.default),this.spine=this.node.getChildByName("Spine").getComponent(sp.Skeleton),this.collider=this.getComponent(cc.BoxCollider),this.scheduleOnce(function(){t.AudioManager.playSound(s.Constants.SoundTrack.HelpMe),t.runToBase(),t.spine.setAnimation(0,s.Constants.ArmyAnim.Run,!0)},.2),this.schedule(function(){s.Constants.isLoose||s.Constants.isWin||t.playSoundHelpMe()},2)},e.prototype.playSoundHelpMe=function(){this.AudioManager.playSound(s.Constants.SoundTrack.HelpMe)},e.prototype.runToBase=function(){var t=this,e=this.Base.getPosition(),n=null;switch(this.Responsive.device){case"horizontal_IPX":n=23;break;case"horizontal_Tablet":n=13.5;break;case"vertical_IPX":case"vertical_Mobile":n=13}cc.tween(this.node).to(n,{x:e.x},{easing:cc.easing.smooth}).call(function(){cc.tween(t.node).to(.5,{opacity:0}).start(),t.isLive&&(s.Constants.isPauseGame=!0,s.Constants.isWin=!0,t.CTA.active=!0)}).start()},e.prototype.die=function(){s.Constants.isLoose=!0,s.Constants.isPauseGame=!0,this.CTA.active=!0,this.node.getComponent(cc.Collider).enabled=!1,this.node.getComponent(cc.Collider).destroy(),this.node.getComponent(n).enabled=!1},e.prototype.checkDie=function(){var t=this;this.isLive=!1,this.spine.timeScale=.3,this.spine.setAnimation(0,s.Constants.ArmyAnim.Die,!1),this.HealthBar.active=!1,cc.tween(this.node).to(1,{opacity:0}).call(function(){return t.node.destroy()}).start(),this.die()},e.prototype.decreaseHealth=function(){switch(cc.math.randomRangeInt(0,4)){case 0:this.spine.node.getChildByName("Vfx_1").getComponent(cc.Animation).play("VFx_Bleeding");break;case 1:this.spine.node.getChildByName("Vfx_2").getComponent(cc.Animation).play("VFx_Bleeding");break;case 2:this.spine.node.getChildByName("Vfx_3").getComponent(cc.Animation).play("VFx_Bleeding");break;case 3:this.spine.node.getChildByName("Vfx_4").getComponent(cc.Animation).play("VFx_Bleeding")}this.HealthBar.scaleX-=.05,this.AudioManager.playSound(s.Constants.SoundTrack.ArmyLv1HitSound)},e.prototype.update=function(){this.HealthBar.scaleX<=.1&&this.isLive&&this.checkDie()},i([d(cc.Node)],e.prototype,"Base",void 0),i([d(cc.Node)],e.prototype,"HealthBar",void 0),i([d(cc.Node)],e.prototype,"CTA",void 0),i([d(c.default)],e.prototype,"Responsive",void 0),n=i([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager","../Plugin/Responsive":"Responsive"}],LoadFoodController:[function(t,e,n){"use strict";cc._RF.push(e,"8aaf1Qac2lG3aTwixhAfLvl","LoadFoodController");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Data/constants"),a=cc._decorator,c=a.ccclass,u=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.overlay=null,e.label=null,e.unitCosts=[],e.unitFrames=[],e}return r(e,t),e.prototype.start=function(){},e.prototype.increaseFood=function(){var t=this;this.overlay.scaleX=0,s.Constants.isPauseGame||cc.tween(this.overlay).to(1.2,{scaleX:1}).call(function(){s.Constants.food+=1,t.increaseFood()}).start()},e.prototype.checkEnableCost=function(){for(var t=0;t<this.unitCosts.length;t++){var e=this.unitCosts[t];Number(this.label.string)>=Number(e.string)?(0===t&&(this.unitFrames[t].opacity=255,e.node.color=cc.Color.WHITE),1===t&&s.Constants.isCanBuyArmyLv2&&(this.unitFrames[t].opacity=255,e.node.color=cc.Color.WHITE),2===t&&s.Constants.isCanBuyArmyLv3&&(this.unitFrames[t].opacity=255,e.node.color=cc.Color.WHITE)):(e.node.color=cc.Color.RED,1===t&&s.Constants.isCanBuyArmyLv2&&(this.unitFrames[t].opacity=255),2===t&&s.Constants.isCanBuyArmyLv3&&(this.unitFrames[t].opacity=255),this.unitFrames[t].opacity=0)}},e.prototype.update=function(){this.label.string=String(s.Constants.food),this.checkEnableCost()},i([u(cc.Node)],e.prototype,"overlay",void 0),i([u(cc.Label)],e.prototype,"label",void 0),i([u([cc.Label])],e.prototype,"unitCosts",void 0),i([u([cc.Node])],e.prototype,"unitFrames",void 0),i([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../Data/constants":"constants"}],NeutrinoAssemblerJSB:[function(t,e,n){"use strict";cc._RF.push(e,"908f2U8uBBKHLoXjGNOOkv8","NeutrinoAssemblerJSB");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),cc.renderer;var i=[0,1,3,1,2,3],s=512*i.length,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._currentVertex=0,e._renderStyleIndex=null,e._worldScale=new cc.Vec3,e}return r(e,t),e._checkAndCreateCurrentBuffer=function(){var t=e._bufferIndex;e._vertexBuffers[t]||(e._vertexBuffers[t]=new ArrayBuffer(2048*e._vertexFormat._bytes),e._vertexFloatBuffers[t]=new Float32Array(e._vertexBuffers[t]),e._vertexUint32Buffers[t]=new Uint32Array(e._vertexBuffers[t])),e._indexBuffers[t]||(e._indexBuffers[t]=new Uint16Array(s))},e._incBuffer=function(){++e._bufferIndex,e._numBufferVertices=0,e._numBufferIndices=0,e._startBufferVertex=0,e._startBufferIndex=0,e._checkAndCreateCurrentBuffer()},e.prototype._prepareForGeometry=function(t,n){e._numBufferVertices,(e._numBufferVertices+t>2048||e._numBufferIndices+n>s)&&(this._finishDrawCall(),e._incBuffer())},e.prototype._commitGeometry=function(t,n){e._numBufferVertices+=t,e._numBufferIndices+=n},e._resetGeometryBuffers=function(){this._bufferIndex=0,this._numBufferVertices=0,this._numBufferIndices=0,this._startBufferVertex=0,this._startBufferIndex=0,this._checkAndCreateCurrentBuffer()},e.prototype._finishDrawCall=function(){if(e._startBufferIndex!==e._numBufferIndices){var t=e._bufferIndex,n=new Float32Array(e._vertexBuffers[t],e._startBufferVertex*e._vertexFormat._bytes,(e._numBufferVertices-e._startBufferVertex)*e._vertexFormat._bytes/4),o=new Uint16Array(e._indexBuffers[t].buffer,2*e._startBufferIndex,e._numBufferIndices-e._startBufferIndex);this.updateIAData(this._drawCallIndex,e._vertexFormat._nativeObj,n,o);var r=this._renderComp.materials[this._renderStyleIndex].effect;this.updateEffect(this._drawCallIndex,r._nativeObj),e._startBufferVertex=e._numBufferVertices,e._startBufferIndex=e._numBufferIndices,++this._drawCallIndex}},e.prototype.updateRenderData=function(t){this.fillBuffers(t),t.node._renderFlag|=cc.RenderFlow.FLAG_UPDATE_RENDER_DATA},e.prototype.fillBuffers=function(t){t._neutrinoEffect&&t.context.loaded()&&(this.reset(),e._resetGeometryBuffers(),this._drawCallIndex=0,this._currentVertex=0,this._renderStyleIndex=null,this._worldScale=t._worldScale,t._neutrinoEffect.fillGeometryBuffers([1,0,0],[0,1,0],[0,0,-1]),this._finishDrawCall())},e.prototype.initialize=function(){},e.prototype.beforeQuad=function(t){this._renderStyleIndex!==t&&(this._finishDrawCall(),this._renderStyleIndex=t),this._prepareForGeometry(4,i.length)},e.prototype.pushVertex=function(t){var n=e._bufferIndex,o=e._vertexFormat._bytes/4,r=e._vertexFloatBuffers[n],s=e._vertexUint32Buffers[n],a=(e._numBufferVertices+this._currentVertex)*o,c=t.position[0]*this._worldScale.x,u=t.position[1]*this._worldScale.y,l=t.position[2]*this._worldScale.z;if(r[a++]=c,r[a++]=u,r[a++]=l,r[a++]=t.texCoords[0][0],r[a++]=1-t.texCoords[0][1],s[a++]=t.color[0]|t.color[1]<<8|t.color[2]<<16|t.color[3]<<24,++this._currentVertex,4==this._currentVertex){for(var d=e._indexBuffers[n],p=0;p<i.length;++p)d[e._numBufferIndices+p]=e._numBufferVertices-e._startBufferVertex+i[p];this._commitGeometry(4,i.length),this._currentVertex=0}},e.prototype.pushRenderCall=function(){},e.prototype.cleanup=function(){},e._vertexFormat=cc.gfx.VertexFormat.XYZ_UV_Color,e._vertexBuffers=[],e._vertexFloatBuffers=[],e._vertexUint32Buffers=[],e._indexBuffers=[],e}(cc.MeshRenderer.__assembler__);n.default=a,cc._RF.pop()},{}],NeutrinoAssemblerWebGL:[function(t,e,n){"use strict";cc._RF.push(e,"32e92P2G2hLrY8BaVp0+NVh","NeutrinoAssemblerWebGL");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=[0,1,3,1,2,3],s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._initialized=!1,e._currentVertex=0,e._renderStyleIndex=null,e._vertexFormat=cc.gfx.VertexFormat.XYZ_UV_Color,e._buffer=null,e._bufferOffsetInfo=null,e._modelBatcher=null,e._worldScale=new cc.Vec3,e}return r(e,t),e.prototype.fillBuffers=function(t,e){t._neutrinoEffect&&t.context.loaded()&&(this._initialized||(this._buffer=e.getBuffer("mesh",this._vertexFormat),this._initialized=!0),this._modelBatcher=e,this._renderStyleIndex=null,this._worldScale=t._worldScale,t._neutrinoEffect.fillGeometryBuffers([1,0,0],[0,1,0],[0,0,-1]))},e.prototype.initialize=function(){},e.prototype.beforeQuad=function(t){if(this._renderStyleIndex!==t){var e=this._renderComp.materials[t];e&&e.getHash()!==this._modelBatcher.material.getHash()&&(this._modelBatcher._flush(),this._modelBatcher.material=e),this._renderStyleIndex=t}this._bufferOffsetInfo=this._buffer.request(4,i.length)},e.prototype.pushVertex=function(t){var e=this._bufferOffsetInfo,n=this._vertexFormat._bytes/4,o=this._buffer,r=o._vData,s=o._uintVData,a=e.byteOffset/4+this._currentVertex*n,c=t.position[0]*this._worldScale.x,u=t.position[1]*this._worldScale.y,l=t.position[2]*this._worldScale.z;if(r[a+0]=c,r[a+1]=u,r[a+2]=l,r[a+3]=t.texCoords[0][0],r[a+4]=1-t.texCoords[0][1],s[a+5]=t.color[0]|t.color[1]<<8|t.color[2]<<16|t.color[3]<<24,++this._currentVertex,4==this._currentVertex){for(var d=o._iData,p=0;p<i.length;++p)d[e.indiceOffset+p]=e.vertexOffset+i[p];this._currentVertex=0}},e.prototype.pushRenderCall=function(){},e.prototype.cleanup=function(){},e}(cc.Assembler);n.default=s,cc._RF.pop()},{}],NeutrinoAssembler:[function(t,e,n){"use strict";cc._RF.push(e,"7dd47KelZZLyadMohM05ouJ","NeutrinoAssembler"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./NeutrinoAssemblerWebGL"),r=(t("./NeutrinoAssemblerJSB"),o.default);n.default=r,cc._RF.pop()},{"./NeutrinoAssemblerJSB":"NeutrinoAssemblerJSB","./NeutrinoAssemblerWebGL":"NeutrinoAssemblerWebGL"}],NeutrinoComponent:[function(t,e,n){"use strict";cc._RF.push(e,"fe372iH4fZOBLxITCZbQxJ2","NeutrinoComponent");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("./NeutrinoSettings"),a=t("./NeutrinoContext"),c=cc._decorator,u=c.ccclass,l=c.property,d=new cc.Mat4,p=new cc.Mat4,h=new cc.Quat,f=new cc.Vec3,y=new cc.Mat4,_=[0,0,0,0],m=[0,0,0,0];function v(t){return t instanceof cc.Vec2?[t.x,t.y]:t instanceof cc.Vec3?[t.x,t.y,t.z]:t}var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.context=null,e._neutrinoEffectModel=null,e._neutrinoEffect=null,e._spriteFrames=null,e._emitterPropsOnStart={},e._texturesRemap=null,e._waitingForContext=!1,e._resetInProgress=!1,e._numTexturesLoading=0,e._errorOnLoad=!1,e._worldScale=new cc.Vec3,e._destructed=!1,e._serialized=!1,e._worldParentId="",e._texturesPrefixPath="",e._spriteAtlas=null,e._pausedOnStart=!1,e._pausedGeneratorsOnStart=!1,e.destroyWhenEmpty=!1,e.destroyNodeWhenEmpty=!1,e}return r(e,t),Object.defineProperty(e.prototype,"worldParent",{get:function(){return this._findWorldParent()},set:function(t){this._worldParentId=t?t.uuid:"",this._waitForContextAndReset()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texturesPrefixPath",{get:function(){return this._texturesPrefixPath},set:function(t){this._texturesPrefixPath=t,this._waitForContextAndReset()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spriteAtlas",{get:function(){return this._spriteAtlas},set:function(t){this._spriteAtlas=t,this._waitForContextAndReset()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pausedOnStart",{get:function(){return this._pausedOnStart},set:function(t){this._pausedOnStart=t,this._waitForContextAndReset()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pausedGeneratorsOnStart",{get:function(){return this._pausedGeneratorsOnStart},set:function(t){this._pausedGeneratorsOnStart=t,this._waitForContextAndReset()},enumerable:!1,configurable:!0}),e.prototype.resetInEditor=function(){this._waitForContextAndReset()},e.prototype.onLoad=function(){if(this.context=a.default.instance(),this.context.ensureNoiseTextureIsGenerated(),!this._serialized){this._serialized=!0;var t=s.default.instance();t&&(this._texturesPrefixPath=t.defaultTexturesPrefixPath,this._spriteAtlas=t.defaultSpriteAtlas,t.defaultWorldParent&&(this._worldParentId=t.defaultWorldParent.uuid))}this._waitForContextAndReset()},e.prototype.onDestroy=function(){this._spriteFrames&&(this._spriteFrames.forEach(function(t){t&&t.decRef()}),this._spriteFrames.length=0),this._waitingForContext&&this.context.off("loaded",this._reset,this),this._destructed=!0},e.prototype.update=function(t){if(this._neutrinoEffect){this._getNeutrinoWorldPositionRotation(_,m),this._neutrinoEffect.update(t,_,m);var e=this.worldParent;e?(e.getWorldMatrix(y),this.materials.forEach(function(t){t.setProperty("worldParentMat",y)})):this.materials.forEach(function(t){t.setProperty("worldParentMat",cc.Mat4.IDENTITY)}),this.paused()||(this.destroyWhenEmpty||this.destroyNodeWhenEmpty)&&0===this.getNumParticles()&&(this.destroyNodeWhenEmpty?this.node.destroy():this.destroy())}},e.prototype.ready=function(){return null!==this._neutrinoEffect},e.prototype.restart=function(){this._getNeutrinoWorldPositionRotation(_,m),this._neutrinoEffect.restart(_,m)},e.prototype.resetPositionRotation=function(){this._getNeutrinoWorldPositionRotation(_,m),this._neutrinoEffect.resetPosition(_,m)},e.prototype.pause=function(){this.ready()&&this._neutrinoEffect.pauseAllEmitters(),this._pausedOnStart=!0},e.prototype.unpause=function(){this.ready()&&this._neutrinoEffect.unpauseAllEmitters(),this._pausedOnStart=!1},e.prototype.paused=function(){return this.ready()?this._neutrinoEffect.areAllEmittersPaused():this._pausedOnStart},e.prototype.pauseGenerators=function(){this.ready()&&this._neutrinoEffect.pauseGeneratorsInAllEmitters(),this._pausedGeneratorsOnStart=!0},e.prototype.unpauseGenerators=function(){this.ready()&&this._neutrinoEffect.unpauseGeneratorsInAllEmitters(),this._pausedGeneratorsOnStart=!1},e.prototype.generatorsPaused=function(){return this.ready()?this._neutrinoEffect.areGeneratorsInAllEmittersPaused():this._pausedGeneratorsOnStart},e.prototype.setPropertyInAllEmitters=function(t,e){var n=v(e);this.ready()?this._neutrinoEffect.setPropertyInAllEmitters(t,n):this._emitterPropsOnStart[t]=n},e.prototype.getNumParticles=function(){return this._neutrinoEffect?this._neutrinoEffect.getNumParticles():0},e.prototype._checkBacth=function(t,e){t.cullingMask!==e&&(t._flush(),t.cullingMask=e)},e.prototype._waitForContextAndReset=function(){if(this.context)return this.context.loaded()?void this._reset():(this._waitingForContext=!0,void this.context.once("loaded",this._reset,this))},e.prototype._reset=function(){if(!this._resetInProgress&&!this._destructed){this._waitingForContext=!1;var t=this.getEffectClass();if(t){this._resetInProgress=!0,this._errorOnLoad=!1,this._neutrinoEffectModel=new t(this.context.neutrinoContext),this._neutrinoEffect=null;var e=this._neutrinoEffectModel.textures.length;this._spriteFrames=new Array(e),this._numTexturesLoading=this._spriteFrames.length;for(var n=0;n<e;++n){var o=(this._texturesPrefixPath+this._neutrinoEffectModel.textures[n]).replace(/\.[^/.]+$/,"");if(this.spriteAtlas){var r=this.spriteAtlas.getSpriteFrame(o);r?(r.addRef(),this._spriteFrames[n]=r,--this._numTexturesLoading):(cc.warn(this.__classname__+": Can't load sprite '"+o+"' from sprite atlas. Will try to load single texture."),this._loadTexture(n,o))}else this._loadTexture(n,o)}0===this._numTexturesLoading&&this._onTexturesLoaded()}else cc.error(this.__classname__+": you shouldn't use NeutrinoComponent by itself. Use generated effect classes instead.")}},e.prototype._loadTexture=function(t,e){var n=this,o=this,r=this.getTexturesDatabase().find(function(t){return t.path===e}),i=function(){--o._numTexturesLoading,0===o._numTexturesLoading&&o._onTexturesLoaded()};if(!r)return cc.error(this.__classname__+": Can't find texture '"+e+"."),this._errorOnLoad=!0,void i();this.context.texturesBundle().load(r.path,cc.SpriteFrame,function(r,s){n._destructed||(r?(cc.error(o.__classname__+": Can't load sprite frame '"+e+"'. "+r),o._errorOnLoad=!0):(s.addRef(),o._spriteFrames[t]=s),i())})},e.prototype._onTexturesLoaded=function(){var t=this;if(this._errorOnLoad)this._resetInProgress=!1;else{this.materials.length=0;var e=!1;if(this._neutrinoEffectModel.renderStyles.forEach(function(n,o){var r=n.textureIndices[0],i=t._spriteFrames[r];if(!i)return cc.warn(t.__classname__+": Loading flow wrong behavior found #3 (don't worry about it)"),void(e=!0);var s=i.getTexture();if(!s)return cc.warn(t.__classname__+": Loading flow wrong behavior found #4 (don't worry about it)"),void(e=!0);var a=t._neutrinoEffectModel.materials[n.materialIndex],c=t.context.materials[2*a+(s.hasPremultipliedAlpha()?1:0)];if(!c)return cc.warn(t.__classname__+": Loading flow wrong behavior found #5 (don't worry about it)"),void(e=!0);t.setMaterial(o,c).setProperty("texture",s)},this),e)this._resetInProgress=!1;else{for(var n in this._initTexturesRemap(),this._getNeutrinoWorldPositionRotation(_,m),this._neutrinoEffect=this._neutrinoEffectModel.createWGLInstance(_,m,this._assembler,{paused:this._pausedOnStart,generatorsPaused:this._pausedGeneratorsOnStart}),this._neutrinoEffect.texturesRemap=this._texturesRemap,this._emitterPropsOnStart)this._neutrinoEffect.setPropertyInAllEmitters(n,this._emitterPropsOnStart[n]);this._emitterPropsOnStart={},this._resetInProgress=!1}}},e.prototype._initTexturesRemap=function(){for(var t=!1,e=0;e<this._spriteFrames.length;++e)if(1!==(n=this._spriteFrames[e]).uv[6]||0!==n.uv[0]||0!==n.uv[7]||1!==n.uv[1]){t=!0;break}if(t)for(this._texturesRemap=new Array(this._spriteFrames.length),e=0;e<this._spriteFrames.length;++e){var n=this._spriteFrames[e];this._texturesRemap[e]=new this.context.neutrinoContext.SubRect(n.uv[0],1-n.uv[1],n.uv[6]-n.uv[0],n.uv[1]-n.uv[7])}else this._texturesRemap=[]},e.prototype._getNeutrinoWorldPositionRotation=function(t,e){var n=d,o=h,r=f,i=this._worldScale;this.node.getWorldMatrix(n);var s=this.worldParent;if(s){var a=p;s.getWorldMatrix(a),cc.Mat4.invert(a,a),cc.Mat4.multiply(n,a,n)}cc.Mat4.getRotation(o,n),n.getTranslation(r),n.getScale(i),t[0]=r.x/i.x,t[1]=r.y/i.y,t[2]=r.z/i.z,e[0]=o.x,e[1]=o.y,e[2]=o.z,e[3]=o.w},e.prototype._findWorldParent=function(){var t=this.node;do{if(t.uuid==this._worldParentId)return t;t=t.parent}while(t);return null},i([l],e.prototype,"_serialized",void 0),i([l],e.prototype,"_worldParentId",void 0),i([l(cc.Node)],e.prototype,"worldParent",null),i([l],e.prototype,"_texturesPrefixPath",void 0),i([l],e.prototype,"texturesPrefixPath",null),i([l(cc.SpriteAtlas)],e.prototype,"_spriteAtlas",void 0),i([l(cc.SpriteAtlas)],e.prototype,"spriteAtlas",null),i([l],e.prototype,"_pausedOnStart",void 0),i([l],e.prototype,"pausedOnStart",null),i([l],e.prototype,"_pausedGeneratorsOnStart",void 0),i([l],e.prototype,"pausedGeneratorsOnStart",null),i([l],e.prototype,"destroyWhenEmpty",void 0),i([l],e.prototype,"destroyNodeWhenEmpty",void 0),i([u],e)}(cc.RenderComponent);n.default=g,cc._RF.pop()},{"./NeutrinoContext":"NeutrinoContext","./NeutrinoSettings":"NeutrinoSettings"}],NeutrinoContext:[function(t,e,n){"use strict";cc._RF.push(e,"c5500GPiiNIKKYfuHMFpUCR","NeutrinoContext");var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./neutrinoparticles.js/neutrinoparticles.umd"),i=cc._decorator,s=i.ccclass,a=i.mixins,c=[{uuid:"97KN8e0flOjpWQPC0zIOoR",name:"NeutrinoNormal"},{uuid:"c5T9A8r8FHY5DeeJSjTP0k",name:"NeutrinoNormalPremul"},{uuid:"369MNzEcVL3Jj5UF9gvCfR",name:"NeutrinoAdd"},{uuid:"baTMgpxLlFqrJF04VcDxPF",name:"NeutrinoAddPremul"},{uuid:"a74/Nyb0dDYrv5zAZoAlVP",name:"NeutrinoMultiply"},{uuid:"04mmqJExZKjqgZH4ovqGK7",name:"NeutrinoMultiplyPremul"}],u=function(){function t(){this.neutrinoContext=new r.Context,this.materials=new Array(c.length),this._materialsLeftToLoad=this.materials.length,this._bundlesLeftToLoad=0,this._noiseGenerationStep=null,this._noiseGenerated=!1,this._texturesBundle=null,cc.EventTarget.call(this),this._startLoadingForBuild()}var e;return e=t,t.instance=function(){return this._singleInstance||(this._singleInstance=new e),this._singleInstance},t.prototype.loaded=function(){return 0===this._materialsLeftToLoad&&0===this._bundlesLeftToLoad},t.prototype.startNoiseTextureGeneration=function(){if(!this._noiseGenerated){var t,e=this,n=new this.neutrinoContext.NoiseGenerator;this._noiseGenerationStep=function(){for(var o=0;o<100;++o)if(n.step()){clearInterval(t),e._noiseGenerationStep=null,e._noiseGenerated=!0,n=null;break}},t=setInterval(this._noiseGenerationStep,0)}},t.prototype.ensureNoiseTextureIsGenerated=function(){if(!this._noiseGenerated)for(this._noiseGenerationStep||this.startNoiseTextureGeneration();this._noiseGenerationStep;)this._noiseGenerationStep()},t.prototype.texturesBundle=function(){return this._texturesBundle},t.prototype._startLoadingForDev=function(){for(var t=this,e=function(e){var n=e;cc.assetManager.loadAny(c[e].uuid,function(e,o){e?cc.error("NeutrinoContext: can't load material with UUID='"+c[n].uuid+"'. "+e):t._materialLoaded(o,n)})},n=0;n<this.materials.length;++n)e(n)},t.prototype._startLoadingForBuild=function(){var t=this,e=this;++this._bundlesLeftToLoad,cc.assetManager.loadBundle("neutrinoparticles-materials",function(n,o){if(n)cc.error("NeutrinoContext: failed to load bundle 'neutrinoparticles-materials'. "+n);else{--t._bundlesLeftToLoad;for(var r=function(t){var n=t;o.load(c[t].name,function(t,o){t?cc.error("NeutrinoContext: can't load material '"+c[n].name+"'. "+t):e._materialLoaded(o,n)})},i=0;i<t.materials.length;++i)r(i)}}),++this._bundlesLeftToLoad,cc.assetManager.loadBundle("neutrinoparticles/textures",function(e,n){e?cc.error("NeutrinoContext: failed to load bundle 'neutrinoparticles/textures'"):(cc.log("NeutrinoContext: Loaded bundle neutrinoparticles/textures"),--t._bundlesLeftToLoad,t._texturesBundle=n,t._checkAndEmitLoadedStatus())})},t.prototype._materialLoaded=function(t,e){this.materials[e]=t,--this._materialsLeftToLoad,this._checkAndEmitLoadedStatus()},t.prototype._checkAndEmitLoadedStatus=function(){this.loaded()&&this.emit("loaded")},e=o([s("NeutrinoContext"),a(cc.EventTarget)],t)}();n.default=u,cc.game.once(cc.game.EVENT_GAME_INITED,function(){u.instance().startNoiseTextureGeneration()}),cc._RF.pop()},{"./neutrinoparticles.js/neutrinoparticles.umd":"neutrinoparticles.umd"}],NeutrinoSettings:[function(t,e,n){"use strict";cc._RF.push(e,"fbcd0MmKjROJoyVC6K9nt1e","NeutrinoSettings");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultWorldParent=null,e.defaultTexturesPrefixPath="",e.defaultSpriteAtlas=null,e}var n;return r(e,t),n=e,e.instance=function(){var t=cc.find("Canvas");if(!t)return null;var e=t.getComponent(n);return e||((e=t.addComponent(n)).defaultWorldParent=t),e},i([c(cc.Node)],e.prototype,"defaultWorldParent",void 0),i([c],e.prototype,"defaultTexturesPrefixPath",void 0),i([c(cc.SpriteAtlas)],e.prototype,"defaultSpriteAtlas",void 0),n=i([a],e)}(cc.Component);n.default=u,cc.NeutrinoSettings=u,cc._RF.pop()},{}],Responsive:[function(t,e,n){"use strict";cc._RF.push(e,"d3abaWwEQhAi5Yf4wF9VZxN","Responsive");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Controller/BaseController"),a=t("../Controller/CoinController"),c=t("../Data/constants"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enemyBase=null,e.allyBase=null,e.CoinController=null,e.King=null,e.Environment=null,e.Options=null,e.CTA_logo=null,e.Bg_Hor=null,e.Bg_Ver=null,e.FrameFood=null,e.LoadFood=null,e.Options_Layout=null,e.device="",e.isRotate=!1,e.HORIZONTAL_IPX="horizontal_IPX",e.HORIZONTAL_TABLET="horizontal_Tablet",e.VERTICAL_IPX="vertical_IPX",e.VERTICAL_MOBILE="vertical_Mobile",e}return r(e,t),e.prototype.start=function(){this.Bg_Hor=this.Environment.getChildByName("Bg_Hor"),this.Bg_Ver=this.Environment.getChildByName("Bg_Ver"),this.FrameFood=this.Options.getChildByName("Framefood"),this.LoadFood=this.Options.getChildByName("LoadFoodController"),this.Options_Layout=this.Options.getChildByName("Layout")},e.prototype.handleRotate=function(){cc.view.getFrameSize().width>cc.view.getFrameSize().height?(c.Constants.isRotate=!0,this.setHorizontal()):(c.Constants.isRotate=!1,this.setVertical())},e.prototype.setHorizontal=function(){var t=cc.view.getFrameSize().width;cc.view.getFrameSize().height/t<.65?this.setHorizontalForIpX():this.setHorizontalForTablet()},e.prototype.setHorizontalForIpX=function(){if(this.HORIZONTAL_IPX!==this.device){this.device=this.HORIZONTAL_IPX,c.Constants.Responsive.speedCalculated=20,c.Constants.scaleArmy=.5,this.Bg_Hor.active=!0,this.Bg_Ver.active=!1,this.CoinController.node.scale=1,this.allyBase.node.scale=1,this.allyBase.getComponent(cc.Widget).top=210,this.allyBase.getComponent(cc.Widget).left=80,this.allyBase.node.getChildByName("base").setScale(.4,.4),this.enemyBase.node.scale=1,this.enemyBase.getComponent(cc.Widget).top=210,this.enemyBase.getComponent(cc.Widget).right=80,this.enemyBase.node.getChildByName("base").setScale(-.4,.4),this.FrameFood.setScale(10,.3),this.FrameFood.getComponent(cc.Widget).bottom=-5,this.LoadFood.setScale(.316,.316),this.LoadFood.getComponent(cc.Widget).left=-5,this.LoadFood.getComponent(cc.Widget).bottom=-10,this.Options_Layout.setScale(1,1);var t=this.Options_Layout.getComponent(cc.Widget),e=this.Options_Layout.getComponent(cc.Layout),n=this.Options_Layout.children;t.isAlignLeft=!0,t.isAlignRight=!0,t.isAlignHorizontalCenter=!1,t.left=30,t.right=-130,t.bottom=65,e.spacingX=140,n.forEach(function(t){t.scale=1.15}),this.King.scaleX=-.5,this.King.scaleY=.5,this.CTA_logo.scale=.4}},e.prototype.setHorizontalForTablet=function(){if(this.HORIZONTAL_TABLET!==this.device){this.device=this.HORIZONTAL_TABLET,c.Constants.Responsive.speedCalculated=10,c.Constants.scaleArmy=.5,this.Bg_Hor.active=!0,this.Bg_Ver.active=!1,this.CoinController.node.scale=1,this.allyBase.node.scale=1,this.allyBase.getComponent(cc.Widget).top=210,this.allyBase.getComponent(cc.Widget).left=80,this.allyBase.node.getChildByName("base").setScale(.4,.4),this.enemyBase.node.scale=1,this.enemyBase.getComponent(cc.Widget).top=210,this.enemyBase.getComponent(cc.Widget).right=80,this.enemyBase.node.getChildByName("base").setScale(-.4,.4),this.FrameFood.setScale(10,.3),this.FrameFood.getComponent(cc.Widget).bottom=-5,this.LoadFood.setScale(.316,.316),this.LoadFood.getComponent(cc.Widget).left=-5,this.LoadFood.getComponent(cc.Widget).bottom=-10,this.Options_Layout.setScale(1,1);var t=this.Options_Layout.getComponent(cc.Widget),e=this.Options_Layout.getComponent(cc.Layout),n=this.Options_Layout.children;t.isAlignLeft=!0,t.isAlignRight=!0,t.isAlignHorizontalCenter=!1,t.left=30,t.right=-130,t.bottom=65,e.spacingX=120,n.forEach(function(t){t.name.includes("Op")?t.scale=1.15:t.scale=.41}),this.King.scaleX=-.5,this.King.scaleY=.5,this.CTA_logo.scale=.4}},e.prototype.setVertical=function(){cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5?this.setIphoneX():this.setMobile()},e.prototype.setIphoneX=function(){if(this.VERTICAL_IPX!==this.device){this.device=this.VERTICAL_IPX,c.Constants.Responsive.speedCalculated=0,c.Constants.scaleArmy=.25,this.Bg_Hor.active=!1,this.Bg_Ver.active=!0,this.CoinController.node.scale=.8,this.allyBase.node.scale=.85,this.allyBase.getComponent(cc.Widget).top=220,this.allyBase.getComponent(cc.Widget).left=30,this.allyBase.node.getChildByName("base").setScale(.25,.25),this.enemyBase.node.scale=.85,this.enemyBase.getComponent(cc.Widget).top=220,this.enemyBase.getComponent(cc.Widget).right=30,this.enemyBase.node.getChildByName("base").setScale(-.25,.25),this.FrameFood.setScale(10,.25),this.FrameFood.getComponent(cc.Widget).bottom=-5,this.LoadFood.setScale(.22,.24),this.LoadFood.getComponent(cc.Widget).left=-2,this.LoadFood.getComponent(cc.Widget).bottom=-2,this.Options_Layout.setScale(1,1);var t=this.Options_Layout.getComponent(cc.Widget),e=this.Options_Layout.getComponent(cc.Layout),n=this.Options_Layout.children;t.isAlignHorizontalCenter=!1,t.isAlignRight=!0,t.isAlignLeft=!0,t.right=67,t.left=177,t.bottom=34,e.spacingX=55,n.forEach(function(t){t.scale=.6}),this.CTA_logo.scale=.3,this.King.scaleX=-.25,this.King.scaleY=.25}},e.prototype.setMobile=function(){if(this.VERTICAL_MOBILE!==this.device){this.device=this.VERTICAL_MOBILE,cc.view.getFrameSize().width,cc.view.getFrameSize().height,c.Constants.Responsive.speedCalculated=0,c.Constants.scaleArmy=.25,this.Bg_Hor.active=!1,this.Bg_Ver.active=!0,this.CoinController.node.scale=.8,this.allyBase.node.scale=.85,this.allyBase.getComponent(cc.Widget).top=220,this.allyBase.getComponent(cc.Widget).left=30,this.allyBase.node.getChildByName("base").setScale(.25,.25),this.enemyBase.node.scale=.85,this.enemyBase.getComponent(cc.Widget).top=220,this.enemyBase.getComponent(cc.Widget).right=30,this.enemyBase.node.getChildByName("base").setScale(-.25,.25),this.FrameFood.setScale(10,.25),this.FrameFood.getComponent(cc.Widget).bottom=-5,this.LoadFood.setScale(.22,.24),this.LoadFood.getComponent(cc.Widget).left=-2,this.LoadFood.getComponent(cc.Widget).bottom=-2,this.Options_Layout.setScale(1,1);var t=this.Options_Layout.getComponent(cc.Widget),e=this.Options_Layout.getComponent(cc.Layout),n=this.Options_Layout.children;t.isAlignHorizontalCenter=!1,t.isAlignRight=!0,t.isAlignLeft=!0,t.right=67,t.left=177,t.bottom=34,e.spacingX=55,this.King.scaleX=-.25,this.King.scaleY=.25,n.forEach(function(t){t.scale=.6}),this.CTA_logo.scale=.3}},e.prototype.update=function(){this.handleRotate()},i([d(s.default)],e.prototype,"enemyBase",void 0),i([d(s.default)],e.prototype,"allyBase",void 0),i([d(a.default)],e.prototype,"CoinController",void 0),i([d(cc.Node)],e.prototype,"King",void 0),i([d(cc.Node)],e.prototype,"Environment",void 0),i([d(cc.Node)],e.prototype,"Options",void 0),i([d(cc.Node)],e.prototype,"CTA_logo",void 0),i([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../Controller/BaseController":"BaseController","../Controller/CoinController":"CoinController","../Data/constants":"constants"}],Singleton:[function(t,e,n){"use strict";cc._RF.push(e,"e2ee0thttREWqwEqyE59c5l","Singleton");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.Instance=function(t){return null==this._instance&&(this._instance=new t),this._instance},e._instance=null,i([a],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],SpawnController:[function(t,e,n){"use strict";cc._RF.push(e,"fe46aRT4+tC+aNQcYlNw6Y+","SpawnController");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Data/constants"),a=t("../Other/Army"),c=cc._decorator,u=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Base=null,e.AllyPoints=[],e.EnemyPoints=[],e.Army_Lv1=null,e.Army_Lv2=null,e.Army_Lv3=null,e.Army2_Lv1=null,e.Army2_Lv2=null,e.Army2_Lv3=null,e.enemySpawnTime=1,e}return r(e,t),e.prototype.start=function(){this.spawnTroopsCatchKing()},e.prototype.spawnTroopsCatchKing=function(){var t=this;this.scheduleOnce(function(){t.SpawnEnemyArmy(s.Constants.ArmySkin.Enemy,2),t.SpawnEnemyArmy(s.Constants.ArmySkin.Enemy,2)},.5)},e.prototype.SpawnEnemies=function(){var t=this;this.schedule(function(){var e=cc.math.randomRangeInt(1,3);s.Constants.isPauseGame||t.SpawnEnemyArmy(s.Constants.ArmySkin.Enemy,e)},this.enemySpawnTime,cc.macro.REPEAT_FOREVER,.2)},e.prototype.SpawnEnemyArmy=function(t,e){(s.Constants.isCanBuyArmyLv3||s.Constants.isUpgrade)&&.3===this.enemySpawnTime&&(console.log("up spawn time"),this.enemySpawnTime=1.5);var n=cc.math.randomRangeInt(0,5),o=null;switch(e){case 1:o=cc.instantiate(this.Army_Lv1);break;case 2:o=cc.instantiate(this.Army_Lv2)}s.Constants.enemyArmies.push(o),o.scaleX=-s.Constants.scaleArmy,o.scaleY=s.Constants.scaleArmy;var r=this.EnemyPoints[n],i=o.getComponent(a.default);r.parent.addChild(o),o.setSiblingIndex(0),o.setPosition(r.getPosition()),i.skin=t,o.group="Enemy",o.getChildByName("Spine").getComponent(sp.Skeleton).setSkin(t)},e.prototype.SpawnPlayerArmy=function(t,e){var n,o=cc.math.randomRangeInt(0,5);if(s.Constants.isUpgrade)switch(e){case 1:n=cc.instantiate(this.Army2_Lv1);break;case 2:n=cc.instantiate(this.Army2_Lv2);break;case 3:n=cc.instantiate(this.Army2_Lv3)}else switch(e){case 1:n=cc.instantiate(this.Army_Lv1);break;case 2:n=cc.instantiate(this.Army_Lv2);break;case 3:n=cc.instantiate(this.Army_Lv3)}s.Constants.allyArmies.push(n),console.log("Allies:"+s.Constants.allyArmies.length),n.scale=s.Constants.scaleArmy;var r=this.AllyPoints[o],i=n.getComponent(a.default);r.parent.addChild(n),n.setSiblingIndex(0),n.setPosition(r.getPosition()),i.skin=t,n.group="Ally";var c=n.getChildByName("Spine").getComponent(sp.Skeleton);c.setSkin(t),c.timeScale=.9},i([l(cc.Node)],e.prototype,"Base",void 0),i([l([cc.Node])],e.prototype,"AllyPoints",void 0),i([l([cc.Node])],e.prototype,"EnemyPoints",void 0),i([l(cc.Prefab)],e.prototype,"Army_Lv1",void 0),i([l(cc.Prefab)],e.prototype,"Army_Lv2",void 0),i([l(cc.Prefab)],e.prototype,"Army_Lv3",void 0),i([l(cc.Prefab)],e.prototype,"Army2_Lv1",void 0),i([l(cc.Prefab)],e.prototype,"Army2_Lv2",void 0),i([l(cc.Prefab)],e.prototype,"Army2_Lv3",void 0),i([u],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../Data/constants":"constants","../Other/Army":"Army"}],TouchAreaController:[function(t,e,n){"use strict";cc._RF.push(e,"85711X2lIBGPIPjaJXFSYaE","TouchAreaController");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.TouchAreaController=void 0;var s=t("../Data/constants"),a=t("../Data/IronSource"),c=t("../Plugin/AudioManager"),u=t("./GameController"),l=t("./GamePlay"),d=cc._decorator,p=d.ccclass,h=d.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.IronSource=null,e.AudioManager=null,e.GameController=null,e.GamePlay=null,e.CTA=null,e.hidemask=null,e.hand=null,e.btn_SpawnArmys=[],e.btn_install=null,e.btn_upgrade=null,e.btn_BuyArmys=[],e.ps_upgrade=[],e.Lv1Troops=[],e.Lv2Troops=[],e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.registerEvent()},e.prototype.registerEvent=function(){for(var t=this,e=function(e){n.btn_SpawnArmys[e].on(cc.Node.EventType.TOUCH_START,function(){s.Constants.isToStore?t.GameController.installHandle():s.Constants.isLoose||s.Constants.isWin||t.CTA.active||(t.AudioManager.playSound(s.Constants.SoundTrack.clickSound),t.GamePlay.spawnArmy(e+1),t.hand.active=!1)},n)},n=this,o=0;o<this.btn_SpawnArmys.length;o++)e(o);var r=function(e){var n=i.btn_BuyArmys[e];n.on(cc.Node.EventType.TOUCH_START,function(){s.Constants.isToStore?t.GameController.installHandle():0===e?s.Constants.currentCoin>=60?(t.AudioManager.playSound(s.Constants.SoundTrack.buySound),console.log("buyed"),s.Constants.isCanBuyArmyLv2=!0,s.Constants.enemyDie-=2,t.btn_SpawnArmys[e+1].getChildByName("frame").active=!0,n.active=!1):console.log("-- can not buy"):s.Constants.currentCoin>=90?(t.AudioManager.playSound(s.Constants.SoundTrack.buySound),console.log("buyed"),s.Constants.isCanBuyArmyLv3=!0,s.Constants.enemyDie-=3,t.btn_SpawnArmys[e+1].getChildByName("frame").active=!0,n.active=!1):console.log("-- can not buy")},i)},i=this;for(o=0;o<this.btn_BuyArmys.length;o++)r(o)},i([h(a.default)],e.prototype,"IronSource",void 0),i([h(c.default)],e.prototype,"AudioManager",void 0),i([h(u.GameController)],e.prototype,"GameController",void 0),i([h(l.default)],e.prototype,"GamePlay",void 0),i([h(cc.Node)],e.prototype,"CTA",void 0),i([h(cc.Node)],e.prototype,"hidemask",void 0),i([h(cc.Node)],e.prototype,"hand",void 0),i([h([cc.Node])],e.prototype,"btn_SpawnArmys",void 0),i([h(cc.Node)],e.prototype,"btn_install",void 0),i([h(cc.Node)],e.prototype,"btn_upgrade",void 0),i([h([cc.Node])],e.prototype,"btn_BuyArmys",void 0),i([h([cc.ParticleSystem])],e.prototype,"ps_upgrade",void 0),i([h([cc.Node])],e.prototype,"Lv1Troops",void 0),i([h([cc.Node])],e.prototype,"Lv2Troops",void 0),i([p],e)}(cc.Component);n.TouchAreaController=f,cc._RF.pop()},{"../Data/IronSource":"IronSource","../Data/constants":"constants","../Plugin/AudioManager":"AudioManager","./GameController":"GameController","./GamePlay":"GamePlay"}],Ultils:[function(t,e,n){"use strict";cc._RF.push(e,"03f2ceupvBEfa9putmH215T","Ultils"),Object.defineProperty(n,"__esModule",{value:!0}),n.Ultils=void 0;var o=cc._decorator,r=(o.ccclass,o.property,{}),i=function(){function t(){}return t.TouchArea=r,t}();n.Ultils=i,cc._RF.pop()},{}],constants:[function(t,e,n){"use strict";cc._RF.push(e,"eaccb/69FZDu6rC4YmR+uAW","constants"),Object.defineProperty(n,"__esModule",{value:!0}),n.Constants=void 0;var o,r,i,s=cc._decorator;s.ccclass,s.property,function(t){t.touchStart="touchstart",t.touchMove="touchmove",t.touchEnd="touchend",t.touchCancel="touchcancel"}(o||(o={})),function(t){t.Ally="ally",t.Enemy="enemy"}(r||(r={})),function(t){t.Attack="Attack",t.Die="Die",t.Hurt="Hurt",t.Run="Run"}(i||(i={}));var a,c={SoundState:!0,State:1,isEndGame:!1,isPlayBgSound:!1},u={calculatedY:0,calculatedX:0,currentDevice:"",isHor:!1,isVer:!1,speedCalculated:0};(function(t){t.bgSound="bgSound",t.ArmyLv1HitSound="ArmyLv1HitSound",t.ArmyLv2HitSound="ArmyLv2HitSound",t.ArmyLv3HitSound="ArmyLv3HitSound",t.clickSound="clickSound",t.buySound="buySound",t.coinSound="coinSound",t.failSound="failSound",t.winSound="winSound",t.earthQuakeSound="earthQuakeSound",t.heliSound="heliSound",t.UpgradeSound="UpgradeSound",t.Lv2_Kinife="Lv2_Kinife",t.Lv2_Gun="Lv2_Gun",t.Lv2_Tank="Lv2_Tank",t.HelpMe="HelpMe"})(a||(a={}));var l=function(){function t(){}return t.isRotate=!1,t.isTouch=!1,t.isCanTouch=!1,t.isToStore=!1,t.isStartGame=!1,t.isHasResult=!1,t.isGainCoin=!1,t.isPauseGame=!1,t.isWin=!1,t.isLoose=!1,t.isCollideBase=!1,t.isCanBuyArmyLv2=!1,t.isCanBuyArmyLv3=!1,t.isUpgrade=!1,t.currentCoin=0,t.increaseCoin=10,t.enemyDie=0,t.food=6,t.EnemyBaseHeal=1,t.AllyBaseHeal=1,t.scaleBoss=.5,t.scaleArmy=0,t.enemyArmies=[],t.allyArmies=[],t.Event=o,t.SoundTrack=a,t.ironSource=c,t.Responsive=u,t.ArmySkin=r,t.ArmyAnim=i,t}();n.Constants=l,cc._RF.pop()},{}],"neutrinoparticles.umd":[function(require,module,exports){"use strict";var global,factory;cc._RF.push(module,"ab558HOKv9Bq5K2NwBWDZL+","neutrinoparticles.umd"),global=void 0,factory=function(exports){function Context(){var ctx=this;function colorCompToHex_(t){return t<16?"0"+t.toString(16):t.toString(16)}this.equalv3_=function(t,e){return t[0]==e[0]&&t[1]==e[1]&&t[2]==e[2]},this.equalq_=function(t,e){return t[0]==e[0]&&t[1]==e[1]&&t[2]==e[2]&&t[3]==e[3]},this.a=function(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1]},this.b=function(t,e){return[t[0]+e[0],t[1]+e[1]]},this.y=function(t,e,n){t[0]=e[0]+n,t[1]=e[1]+n},this.z=function(t,e){return[t[0]+e,t[1]+e]},this.c=function(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2]},this.d=function(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]},this.C=function(t,e,n){t[0]=e[0]+n,t[1]=e[1]+n,t[2]=e[2]+n},this.D=function(t,e){return[t[0]+e,t[1]+e,t[2]+e]},this.addq=function(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3]},this.addq_=function(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2],t[3]+e[3]]},this.e=function(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1]},this.f=function(t,e){return[t[0]-e[0],t[1]-e[1]]},this.A=function(t,e,n){t[0]=e[0]-n,t[1]=e[1]-n},this.B=function(t,e){return[t[0]-e,t[1]-e]},this.nf=function(t,e,n){t[0]=e-n[0],t[1]=e-n[1]},this.of=function(t,e){return[t-e[0],t-e[1]]},this.g=function(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]},this.h=function(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]},this.E=function(t,e,n){t[0]=e[0]-n,t[1]=e[1]-n,t[2]=e[2]-n},this.F=function(t,e){return[t[0]-e,t[1]-e,t[2]-e]},this.rf=function(t,e,n){t[0]=e-n[0],t[1]=e-n[1],t[2]=e-n[2]},this.sf=function(t,e){return[t-e[0],t-e[1],t-e[2]]},this.i=function(t,e,n){t[0]=e[0]*n[0],t[1]=e[1]*n[1]},this.j=function(t,e){return[t[0]*e[0],t[1]*e[1]]},this.k=function(t,e,n){t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2]},this.l=function(t,e){return[t[0]*e[0],t[1]*e[1],t[2]*e[2]]},this.m=function(t,e,n){t[0]=e[0]/n[0],t[1]=e[1]/n[1]},this.n=function(t,e){return[t[0]/e[0],t[1]/e[1]]},this.o=function(t,e,n){t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2]},this.p=function(t,e){return[t[0]/e[0],t[1]/e[1],t[2]/e[2]]},this.H=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},this.dotq_=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},this.q=function(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n},this.r=function(t,e){return[t[0]*e,t[1]*e]},this.s=function(t,e,n){t[0]=e[0]/n,t[1]=e[1]/n},this.t=function(t,e){return[t[0]/e,t[1]/e]},this.u=function(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n},this.v=function(t,e){return[t[0]*e,t[1]*e,t[2]*e]},this.w=function(t,e,n){t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n},this.x=function(t,e){return[t[0]/e,t[1]/e,t[2]/e]},this.y=function(t,e,n){t[0]=e[0]+n,t[1]=e[1]+n},this.z=function(t,e){return[t[0]+e,t[1]+e]},this.A=function(t,e,n){t[0]=e[0]-n,t[1]=e[1]-n},this.B=function(t,e){return[t[0]-e,t[1]-e]},this.G=function(t,e){return t[0]*e[0]+t[1]*e[1]},this.H=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},this.I=function(t,e,n){var o=e[0],r=e[1],i=e[2],s=n[0],a=n[1],c=n[2];t[0]=r*c-i*a,t[1]=i*s-o*c,t[2]=o*a-r*s},this.J=function(t,e){var n=t[0],o=t[1],r=t[2],i=e[0],s=e[1],a=e[2];return[o*a-r*s,r*i-n*a,n*s-o*i]},this.K=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},this.L=function(t){return t[0]*t[0]+t[1]*t[1]},this.M=function(t,e){ctx.q(t,e,1/ctx.K(e))},this.N=function(t){return ctx.r(t,1/ctx.K(t))},this.O=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},this.P=function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},this.Q=function(t,e){ctx.u(t,e,1/ctx.O(e))},this.R=function(t){return ctx.v(t,1/ctx.O(t))},this.S=function(t,e){t[0]=e[0],t[1]=e[1]},this.T=function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2]},this.U=function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]},this.V=function(t,e,n){t[0]=e,t[1]=n},this.W=function(t,e,n,o){t[0]=e,t[1]=n,t[2]=o},this.X=function(t,e,n){return t+(e-t)*n},this.Y=function(t,e,n,o){t[0]=e[0]+(n[0]-e[0])*o,t[1]=e[1]+(n[1]-e[1])*o},this.Z=function(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]},this.ab=function(t,e,n,o){t[0]=e[0]+(n[0]-e[0])*o,t[1]=e[1]+(n[1]-e[1])*o,t[2]=e[2]+(n[2]-e[2])*o},this.bb=function(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n,t[2]+(e[2]-t[2])*n]},this.slerpq=function(t,e,n,o){var r=ctx.dotq_(e,n),i=[];if(r<0?(ctx.negq(i,n),r=-r):ctx.U(i,n),1-r<Number.EPSILON)t[0]=ctx.X(e[0],n[0],o),t[1]=ctx.X(e[1],n[1],o),t[2]=ctx.X(e[2],n[2],o),t[3]=ctx.X(e[3],n[3],o);else{var s=ctx.acos_(r);ctx.mulqscalar(t,ctx.addq_(ctx.mulqscalar_(e,ctx.sin_((1-o)*s)),ctx.mulqscalar_(i,ctx.sin_(o*s))),1/ctx.sin_(s))}},this.slerpq_=function(t,e,n){var o=[];return slerpq(o,t,e,n),o},this.acos_=function(t){return Math.acos(t)},this.sin_=function(t){return Math.sin(t)},this.cos_=function(t){return Math.cos(t)},this.taus88=function(t){var e,n,o;t||(t=0),this.seed=function(t){e=(t&=4294967295)<2?t+2:t,n=t<8?t+8:t,o=t<16?t+16:t},this.rand=function(){var t=(4294967295&(e<<13^e))>>>19;return(((e=((4294967294&e)<<12^t)>>>0)^(n=((4294967288&n)<<4^(t=(4294967295&(n<<2^n))>>>25))>>>0)^(o=((4294967280&o)<<17^(t=(4294967295&(o<<3^o))>>>11))>>>0))>>>0)/4294967296},this.seed(t)},this.cb=function(t,e){this.randv2gen(t,e,function(){return Math.random()})},this.randv2gen=function(t,e,n){var o=n()*Math.PI*2;t[0]=e*ctx.cos_(o),t[1]=e*ctx.sin_(o)},this.db=function(t,e){this.randv3gen(t,e,function(){return Math.random()})},this.randv3gen=function(t,e,n){var o=n()*Math.PI*2,r=2*n()-1,i=e*Math.sqrt(1-r*r);t[0]=i*ctx.cos_(o),t[1]=i*ctx.sin_(o),t[2]=e*r},this.yb=function(t,e,n,o,r){var i=e+r()*o[0],s=n+r()*o[1];ctx.V(t,i,s)},this.eb=function(t,e){ctx.V(-e[0],-e[1])},this.fb=function(t){return[-t[0],-t[1]]},this.gb=function(t,e){ctx.W(-e[0],-e[1],-e[2])},this.hb=function(t){return[-t[0],-t[1],-t[2]]},this.negq=function(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3]},this.negq_=function(t){return[-t[0],-t[1],-t[2],-t[3]]},this.ib=function(t){return t/180*Math.PI},this.jb=function(t){return t/Math.PI*180},this.Ae=function(t){return t<0?-1:1},this.ob=function(t,e,n,o){var r=2*o[0]*o[0],i=2*o[1]*o[1],s=2*o[2]*o[2],a=2*o[0]*o[1],c=2*o[0]*o[2],u=2*o[1]*o[2],l=2*o[3]*o[2],d=2*o[3]*o[1],p=2*o[3]*o[0];t[0]=1-i-s,t[1]=a+l,t[2]=c-d,e[0]=a-l,e[1]=1-r-s,e[2]=u+p,n[0]=c+d,n[1]=u-p,n[2]=1-r-i},this.pb=function(t,e,n,o){var r=e[0]+n[1]+o[2];if(r>0){var i=2*Math.sqrt(r+1);t[3]=.25*i,t[0]=(n[2]-o[1])/i,t[1]=(o[0]-e[2])/i,t[2]=(e[1]-n[0])/i}else e[0]>n[1]&e[0]>o[2]?(i=2*Math.sqrt(1+e[0]-n[1]-o[2]),t[3]=(n[2]-o[1])/i,t[0]=.25*i,t[1]=(e[1]+n[0])/i,t[2]=(o[0]+e[2])/i):n[1]>o[2]?(i=2*Math.sqrt(1+n[1]-e[0]-o[2]),t[3]=(o[0]-e[2])/i,t[0]=(e[1]+n[0])/i,t[1]=.25*i,t[2]=(n[2]+o[1])/i):(i=2*Math.sqrt(1+o[2]-e[0]-n[1]),t[3]=(e[1]-n[0])/i,t[0]=(o[0]+e[2])/i,t[1]=(n[2]+o[1])/i,t[2]=.25*i)},this.axes2quat=this.pb,this.qb=function(t,e,n){var o=.5*ctx.ib(n),r=Math.sin(o);t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=Math.cos(o)},this.axisangle2quat=this.qb,this.axisangle2quat_=function(t,e){var n=.5*ctx.ib(e),o=Math.sin(n);return[t[0]*o,t[1]*o,t[2]*o,ctx.cos_(n)]},this.axisangle2quat_=this.axisangle2quat_,this.rb=function(t,e,n){var o=e[0],r=e[1],i=e[2],s=n[0],a=n[1],c=n[2],u=n[3],l=u*o+a*i-c*r,d=u*r+c*o-s*i,p=u*i+s*r-a*o,h=-s*o-a*r-c*i;t[0]=l*u+h*-s+d*-c-p*-a,t[1]=d*u+h*-a+p*-s-l*-c,t[2]=p*u+h*-c+l*-a-d*-s},this.sb=function(t,e,n){var o=e[0],r=e[1],i=e[2],s=e[3],a=n[0],c=n[1],u=n[2],l=n[3];t[0]=o*l+s*a+r*u-i*c,t[1]=r*l+s*c+i*a-o*u,t[2]=i*l+s*u+o*c-r*a,t[3]=s*l-o*a-r*c-i*u},this.mulqscalar=function(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n},this.mulqscalar_=function(t,e){return[t[0]*e,t[1]*e,t[2]*e,t[3]*e]},this.tb=function(t,e,n,o,r){var i=ctx.ib(n),s=Math.cos(i)*o,a=Math.sin(i)*o;t[0]=e[0]+s*r[0]-a*r[1],t[1]=e[1]+a*r[0]+s*r[1]},this.ub=function(t,e,n,o,r){var i=ctx.ib(n),s=Math.cos(i)/o,a=Math.sin(i)/o;t[0]=s*r[0]+a*r[1]-e[0]*s-e[1]*a,t[1]=s*r[1]-a*r[0]+e[0]*a-e[1]*s},this.vb=function(t){return t<0?Math.floor(ctx.yd-1+t%ctx.yd):Math.floor(t%ctx.yd)},this.ff=function(t){return"#"+colorCompToHex_(Math.floor(255*t[0]))+colorCompToHex_(Math.floor(255*t[1]))+colorCompToHex_(Math.floor(255*t[2]))},this.tf=function(t,e,n,o,r,i){var s=ctx.f(o,t),a=ctx.f(r,t),c=ctx.r(e,n);if(s[0]<-c[0]&&a[0]<-c[0]||s[0]>c[0]&&a[0]>c[0]||s[1]<-c[1]&&a[1]<-c[1]||s[1]>c[1]&&a[1]>c[1])return!1;if(s[0]<=c[0]&&s[0]>=-c[0]&&s[1]<=c[1]&&s[1]>=-c[1])return!0;if(i<1e-6)return!1;if(a[0]<=c[0]&&a[0]>=-c[0]&&a[1]<=c[1]&&a[1]>=-c[1])return!0;var u=ctx.f(r,o);ctx.s(u,u,i);var l=[-u[1],u[0]],d=Math.abs(ctx.G(l,a));if(Math.abs(ctx.G(l,c))>=d){var p=[-e[1],e[0]];if(ctx.G(p,s)*ctx.G(p,a)<=0)return!0}else if(Math.abs(ctx.G(l,[c[0],-c[1]]))>=d){var h=[e[1],e[0]];if(ctx.G(h,s)*ctx.G(h,a)<=0)return!0}return!1},this.uf=function(t,e,n,o,r,i,s){var a=ctx.f(o,t),c=ctx.f(r,t),u=ctx.r(e,n);if(i<1e-6)return!1;if(a[0]<-u[0]&&c[0]<-u[0]||a[0]>u[0]&&c[0]>u[0]||a[1]<-u[1]&&c[1]<-u[1]||a[1]>u[1]&&c[1]>u[1])return!1;var l=ctx.f(r,o);ctx.s(l,l,i);var d=[-l[1],l[0]],p=Math.abs(ctx.G(d,c));if(s){if(Math.abs(ctx.G(d,u))>=p){var h=[-e[1],e[0]];if(ctx.G(h,a)*ctx.G(h,c)<=0)return!0}}else if(Math.abs(ctx.G(d,[u[0],-u[1]]))>=p){var f=[e[1],e[0]];if(ctx.G(f,a)*ctx.G(f,c)<=0)return!0}return!1},this.wb=function(t,e,n,o){var r=3*(n*ctx.yd+e),i=ctx.zd[o];t[0]=i.getUint8(r),t[1]=i.getUint8(r+1),t[2]=i.getUint8(r+2)},this.xb=function(t,e){if(null!=ctx.zd){var n=e[0]*ctx.yd,o=e[1]*ctx.yd,r=e[2]*ctx.yd,i=Math.floor(n),s=Math.floor(o),a=Math.floor(r),c=n-i,u=o-s,l=r-a,d=ctx.vb(i),p=ctx.vb(i+1),h=ctx.vb(s),f=ctx.vb(s+1),y=ctx.vb(a),_=ctx.vb(a+1),m=[],v=[],g=[],C=[],A=[],S=[],b=[],x=[];ctx.wb(m,d,h,y),ctx.wb(v,d,h,_),ctx.wb(g,d,f,y),ctx.wb(C,d,f,_),ctx.wb(A,p,h,y),ctx.wb(S,p,h,_),ctx.wb(b,p,f,y),ctx.wb(x,p,f,_);var P=[],L=[],B=[],O=[];ctx.ab(P,m,v,l),ctx.ab(L,g,C,l),ctx.ab(B,A,S,l),ctx.ab(O,b,x,l);var w=[],R=[];ctx.ab(w,P,L,u),ctx.ab(R,B,O,u),ctx.ab(t,w,R,c)}else ctx.W(t,128,128,128)},this.ImageDesc=function(t,e,n,o,r){this.image=t,this.x=e,this.y=n,this.width=o,this.height=r},this.RenderCall=function(t,e,n){this.startIndex=t,this.numIndices=e,this.renderStyleIndex=n},this.SubRect=function(t,e,n,o){this.x=t,this.y=e,this.width=n,this.height=o},this.Camera2D=function(){},this.Camera2D.prototype.tb=function(){return!0},this.Camera3D=function(t,e){this.Qd=ctx.r(t,.5),this.z=-.5*t[0]/Math.tan(ctx.ib(.5*e))},this.Camera3D.prototype.transform=function(t,e){if(t[2]<this.z)return!1;var n=-this.z/(t[2]-this.z);return ctx.a(t,ctx.r(ctx.f(t,this.Qd),n),this.Qd),ctx.q(e,e,n),!0},this.zd=null,this.yd=0,this.initializeNoise=function(t,e,n){if(t||alert("path should be defined"),null==this.zd){null!=t&&null!=t||(t=this.defaultPath);var o=new XMLHttpRequest;o.open("GET",t+"neutrinoparticles.noise.bin",!0),o.responseType="arraybuffer",o.ctx=this,o.onreadystatechange=function(){if(4==o.readyState)if(o.status>=200&&o.status<300||304==o.status){var t=o.response,r=o.ctx,i=new DataView(t,0,4).getUint32(0,!0);r.zd=[],r.yd=i;for(var s=0;s<i;++s)r.zd[s]=new DataView(t,4+3*i*i*s);e&&e()}else n&&n()},o.send()}else e()},this.NoiseGenerator=function(){for(var t,e,n,o,r,i,s,a=function(t,e,n,o,r){return.5*(2*e+(-t+n)*r+(2*t-5*e+4*n-o)*r*r+(3*e-t-3*n+o)*r*r*r)},c=function(t,e,n,o,r){return[a(t[0],e[0],n[0],o[0],r),a(t[1],e[1],n[1],o[1],r),a(t[2],e[2],n[2],o[2],r)]},u=function(t,e,n){return t<e?e:t>n?n:t},l=[],d=[],p=new ctx.taus88(120),h=function(){return p.rand()},f=.7,y=64,_=0,m=0,v=y>>>1;v>0;v>>>=1){var g=Math.floor(64/v);_+=g*g}var C=0;this.progress=0;var A=function(){for(var t=0;t<64;++t)for(var e=l[t]=[],n=0;n<64;++n)for(var o=e[n]=[],r=0;r<64;++r)o[r]=[0,0,0];C=1,this.progress=.01},S=function(){t=y>>>1,e=Math.floor(64/t),n=e*e,o=Math.max(e-1,1),r=e*e*e,i=0,s=0;for(var a=0;a<r;++a)d[a]=[],d[a][2]=2*h()-1,d[a][1]=2*h()-1,d[a][0]=2*h()-1;C=2},b=function(){for(var r=0;r<e;++r)for(var a=i-1>>>0&o,p=i>>>0&o,h=i+1>>>0&o,v=i+2>>>0&o,g=s-1>>>0&o,A=s>>>0&o,S=s+1>>>0&o,b=s+2>>>0&o,x=r-1>>>0&o,P=r>>>0&o,L=r+1>>>0&o,B=r+2>>>0&o,O=[[[d[a*n+g*e+x],d[a*n+g*e+P],d[a*n+g*e+L],d[a*n+g*e+B]],[d[a*n+A*e+x],d[a*n+A*e+P],d[a*n+A*e+L],d[a*n+A*e+B]],[d[a*n+S*e+x],d[a*n+S*e+P],d[a*n+S*e+L],d[a*n+S*e+B]],[d[a*n+b*e+x],d[a*n+b*e+P],d[a*n+b*e+L],d[a*n+b*e+B]]],[[d[p*n+g*e+x],d[p*n+g*e+P],d[p*n+g*e+L],d[p*n+g*e+B]],[d[p*n+A*e+x],d[p*n+A*e+P],d[p*n+A*e+L],d[p*n+A*e+B]],[d[p*n+S*e+x],d[p*n+S*e+P],d[p*n+S*e+L],d[p*n+S*e+B]],[d[p*n+b*e+x],d[p*n+b*e+P],d[p*n+b*e+L],d[p*n+b*e+B]]],[[d[h*n+g*e+x],d[h*n+g*e+P],d[h*n+g*e+L],d[h*n+g*e+B]],[d[h*n+A*e+x],d[h*n+A*e+P],d[h*n+A*e+L],d[h*n+A*e+B]],[d[h*n+S*e+x],d[h*n+S*e+P],d[h*n+S*e+L],d[h*n+S*e+B]],[d[h*n+b*e+x],d[h*n+b*e+P],d[h*n+b*e+L],d[h*n+b*e+B]]],[[d[v*n+g*e+x],d[v*n+g*e+P],d[v*n+g*e+L],d[v*n+g*e+B]],[d[v*n+A*e+x],d[v*n+A*e+P],d[v*n+A*e+L],d[v*n+A*e+B]],[d[v*n+S*e+x],d[v*n+S*e+P],d[v*n+S*e+L],d[v*n+S*e+B]],[d[v*n+b*e+x],d[v*n+b*e+P],d[v*n+b*e+L],d[v*n+b*e+B]]]],w=0;w<t;++w)for(var R=w/t,M=i*t+w,F=[[c(O[0][0][0],O[1][0][0],O[2][0][0],O[3][0][0],R),c(O[0][0][1],O[1][0][1],O[2][0][1],O[3][0][1],R),c(O[0][0][2],O[1][0][2],O[2][0][2],O[3][0][2],R),c(O[0][0][3],O[1][0][3],O[2][0][3],O[3][0][3],R)],[c(O[0][1][0],O[1][1][0],O[2][1][0],O[3][1][0],R),c(O[0][1][1],O[1][1][1],O[2][1][1],O[3][1][1],R),c(O[0][1][2],O[1][1][2],O[2][1][2],O[3][1][2],R),c(O[0][1][3],O[1][1][3],O[2][1][3],O[3][1][3],R)],[c(O[0][2][0],O[1][2][0],O[2][2][0],O[3][2][0],R),c(O[0][2][1],O[1][2][1],O[2][2][1],O[3][2][1],R),c(O[0][2][2],O[1][2][2],O[2][2][2],O[3][2][2],R),c(O[0][2][3],O[1][2][3],O[2][2][3],O[3][2][3],R)],[c(O[0][2][0],O[1][3][0],O[2][3][0],O[3][3][0],R),c(O[0][2][1],O[1][3][1],O[2][3][1],O[3][3][1],R),c(O[0][2][2],O[1][3][2],O[2][3][2],O[3][3][2],R),c(O[0][2][3],O[1][3][3],O[2][3][3],O[3][3][3],R)]],k=0;k<t;++k)for(var T=k/t,N=s*t+k,E=c(F[0][0],F[1][0],F[2][0],F[3][0],T),G=c(F[0][1],F[1][1],F[2][1],F[3][1],T),H=c(F[0][2],F[1][2],F[2][2],F[3][2],T),j=c(F[0][3],F[1][3],F[2][3],F[3][3],T),I=0;I<t;++I){var D=r*t+I,V=c(E,G,H,j,I/t),W=ctx.d(ctx.v(V,f),l[M][N][D]),U=[u(W[0],-1,1),u(W[1],-1,1),u(W[2],-1,1)];l[M][N][D]=U}m++,this.progress=.01+m/_*.89,++s>=e&&(s=0,++i>=e&&(i=0,y=t,f=Math.pow(f,1.2),y<=1?(C=3,this.progress=.9):C=1))},x=function(){for(var t=[-1,-1,-1],e=[.5,.7,1],n=0;n<64;++n)for(var o=l[n],r=0;r<64;++r)for(var i=o[r],s=0;s<64;++s){var a=i[s];a[0]=ctx.X(t[0],e[0],.5*a[0]+.5),a[1]=ctx.X(t[1],e[1],.5*a[1]+.5),a[2]=ctx.X(t[2],e[2],.5*a[2]+.5)}C=4,this.progress=.95},P=function(){ctx.yd=64,ctx.zd=[];for(var t=0;t<64;++t){for(var e=l[t],n=new ArrayBuffer(12288),o=new DataView(n),r=0;r<64;++r)for(var i=e[r],s=0;s<64;++s){var a=i[s],c=3*(64*r+s);o.setUint8(c+0,Math.floor(u(256*(.5*a[0]+.5)-.5,0,255))),o.setUint8(c+1,Math.floor(u(256*(.5*a[1]+.5)-.5,0,255))),o.setUint8(c+2,Math.floor(u(256*(.5*a[2]+.5)-.5,0,255)))}ctx.zd[t]=o}C=5,this.progress=1};this.step=function(){switch(C){case 0:A.call(this);break;case 1:S.call(this);break;case 2:b.call(this);break;case 3:x.call(this);break;case 4:P.call(this)}return 5==C}},this.cf=document.createElement("canvas"),this.cf.width=0,this.cf.height=0,this.bf=this.cf.getContext("2d"),this.af=function(t,e){(this.cf.width<t||this.cf.height<e)&&(this.cf.width=t,this.cf.height=e,this.bf=this.cf.getContext("2d"))},this.effects=[],this.loadEffect=function(effectFilePath,onSuccessFunc,onFailFunc){if(null!=this.effects[effectFilePath]){var effectModel=this.effects[effectFilePath];return effectModel instanceof Array?void(effectModel[effectModel.length]=[onSuccessFunc,onFailFunc]):void onSuccessFunc(effectModel)}this.effects[effectFilePath]=[[onSuccessFunc,onFailFunc]];var request=new XMLHttpRequest;request.open("GET",effectFilePath,!0),request.responseType="text",request.ctx=this,request.onreadystatechange=function(){if(4==request.readyState){var callbacks=this.ctx.effects[effectFilePath];if(request.status>=200&&request.status<300||304==request.status){var evalText="(function(ctx) {\n"+request.responseText+"\nreturn new NeutrinoEffect(ctx);\n})(this.ctx);",effectModel=eval(evalText);this.ctx.effects[effectFilePath]=effectModel,callbacks.forEach(function(t){t[0](effectModel)})}else callbacks.forEach(function(t){t[1]()})}},request.send()},this.removeEffect=function(t){delete this.effects[t]}}exports.Context=Context,Object.defineProperty(exports,"__esModule",{value:!0})},"object"==typeof exports&&void 0!==module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory((global=global||self).Neutrino={}),cc._RF.pop()},{}],textures:[function(t,e,n){"use strict";cc._RF.push(e,"6e0b7pYCxFA27qiwxcad20V","textures"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=[{uuid:"a0b2248f-8fdf-4295-889a-38f2012cf28d",path:"textures"}],cc._RF.pop()},{}]},{},["BaseController","BossController","CoinController","GameController","GamePlay","KingController","LoadFoodController","SpawnController","TouchAreaController","IronSource","Ultils","constants","Army","CTA","AudioManager","Responsive","Singleton","textures","NeutrinoAssembler","NeutrinoAssemblerJSB","NeutrinoAssemblerWebGL","NeutrinoComponent","NeutrinoContext","NeutrinoSettings","neutrinoparticles.umd"]);