{"version":3,"sources":["assets\\Script\\Controller\\BaseController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Constants } from \"../Data/constants\";\r\nimport AudioManager from \"../Plugin/AudioManager\";\r\nimport GamePlay from \"./GamePlay\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BaseController extends cc.Component {\r\n    @property(AudioManager)\r\n    AudioManager: AudioManager = null;\r\n    @property(GamePlay)\r\n    GamePlay: GamePlay = null;\r\n    @property(cc.Node)\r\n    baseLose: cc.Node = null;\r\n    @property(cc.Node)\r\n    HealthBar: cc.Node = null;\r\n    @property(cc.String)\r\n    baseSide: String = \"\";\r\n\r\n    baseLv2: cc.Node = null;\r\n\r\n    rigidbody: cc.RigidBody = null;\r\n    collider: cc.PhysicsBoxCollider = null;\r\n\r\n    isUpgrade: boolean = false;\r\n\r\n\r\n    protected start(): void {\r\n        if (this.baseSide === \"Player\") {\r\n            this.baseLv2 = this.node.getChildByName(\"base\").getChildByName(\"baseLv2\");\r\n        }\r\n    }\r\n\r\n\r\n    protected update(dt: number): void {\r\n        if (this.baseSide === \"Player\" && !Constants.isHasResult) {\r\n            if (this.HealthBar.scaleX < 0.05) {\r\n                Constants.isHasResult = true;\r\n                Constants.isPauseGame = true;\r\n                Constants.isLoose = true;\r\n                this.HealthBar.active = false;\r\n                this.baseLose.active = true;\r\n                this.AudioManager.playSound(Constants.SoundTrack.earthQuakeSound);\r\n                this.node.getChildByName(\"base\").getComponent(cc.Sprite).enabled = false;\r\n                this.node.getChildByName(\"base\").getChildByName(\"HealBar\").active = false;\r\n                this.GamePlay.CTA.active = true;\r\n            }\r\n            this.HealthBar.scaleX = Constants.AllyBaseHeal;\r\n        }\r\n\r\n        if (this.baseSide === \"Enemy\" && !Constants.isHasResult) {\r\n            if (this.HealthBar.scaleX < 0.05) {\r\n                Constants.isHasResult = true;\r\n                Constants.isPauseGame = true;\r\n                this.baseLose.active = true;\r\n                this.HealthBar.active = false;\r\n                this.AudioManager.playSound(Constants.SoundTrack.earthQuakeSound);\r\n                this.node.getChildByName(\"base\").getComponent(cc.Sprite).enabled = false;\r\n                this.node.getChildByName(\"base\").getChildByName(\"HealBar\").active = false;\r\n                this.GamePlay.CTA.active = true;\r\n            }\r\n            this.HealthBar.scaleX = Constants.EnemyBaseHeal;\r\n        }\r\n\r\n        // upgradeBase\r\n        if (this.baseSide === \"Player\" && Constants.isUpgrade && !this.isUpgrade) {\r\n            this.isUpgrade = true;\r\n            this.node.getChildByName(\"base\").getComponent(cc.Sprite).enabled = false;\r\n            this.baseLv2.active = true;\r\n        }\r\n    }\r\n\r\n}\r\n"]}