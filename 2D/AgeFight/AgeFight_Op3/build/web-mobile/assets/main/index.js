window.__require=function t(e,o,n){function a(s,r){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){return a(e[s][1][t]||t)},u,u.exports,t,e,o,n)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)a(n[s]);return a}({Army:[function(t,e,o){"use strict";cc._RF.push(e,"e890fnTUplJe5ZAPuR2b1Xy","Army");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(i<3?a(s):i>3?a(e,o,s):a(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Data/constants"),r=t("../Plugin/AudioManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.HealthBar=null,e.AudioManager=null,e.spine=null,e.collider=null,e.skin="",e.speed=25,e.canRun=!0,e.isBase=!1,e.isLive=!0,e.isAttacking=!1,e.isReadyToFight=!1,e.pauseFlag=!1,e.rigidbody=null,e.collisionCount=0,e}var o;return a(e,t),o=e,e.prototype.start=function(){this.AudioManager=this.node.parent.parent.parent.parent.parent.parent.getChildByName("AudioManager").getComponent(r.default),this.spine=this.node.getChildByName("Spine").getComponent(sp.Skeleton),this.collider=this.getComponent(cc.BoxCollider)},e.prototype.onCollisionEnter=function(t,e){if((1===t.tag||0===t.tag||2===t.tag)&&9!==e.tag)return this.collisionCount++,this.skin===s.Constants.ArmySkin.Ally&&this.setCollisionForAlly(t),this.skin===s.Constants.ArmySkin.Enemy&&this.setCollisionForEnemy(t),void(this.canRun=!1);9===t.tag&&(this.isReadyToFight=!0),this.collisionCount<0&&(this.collisionCount=0)},e.prototype.onCollisionStay=function(t,e){1!==t.tag&&0!==t.tag||9===e.tag||(this.canRun=!1)},e.prototype.onCollisionExit=function(t){9===t.tag&&(this.isReadyToFight=!1),this.isLive&&(1!==t.tag&&0!==t.tag&&2!==t.tag||(this.collisionCount--,0===this.collisionCount&&(this.canRun=!0,this.spine.setAnimation(0,s.Constants.ArmyAnim.Run,!0))),this.collisionCount<0&&(this.collisionCount=0))},e.prototype.setCollisionForAlly=function(t){0!==t.tag&&2!==t.tag||(this.canRun=!1,"Attack"!==this.spine.animation&&this.spine.setAnimation(0,s.Constants.ArmyAnim.Attack,!0),"Army_Lv2"===this.node.name&&this.AudioManager.playSound(s.Constants.SoundTrack.ArmyLv2HitSound),this.checkDoneAttackAnim()),0===t.tag&&(this.isBase=!0)},e.prototype.setCollisionForEnemy=function(t){1!==t.tag&&2!==t.tag||(this.canRun=!1,"Attack"!==this.spine.animation&&this.spine.setAnimation(0,s.Constants.ArmyAnim.Attack,!0),this.checkDoneAttackAnim()),1===t.tag&&(this.isBase=!0)},e.prototype.checkDoneAttackAnim=function(){var t=this;this.spine.setCompleteListener(function(e){"Attack"===e.animation.name&&(t.isBase?t.handleDecreaseHealthBase():t.handleDecreaseHealthArmy())})},e.prototype.handleDecreaseHealthBase=function(){if("ally"===this.skin&&"Army_Lv3"===this.node.name)return s.Constants.EnemyBaseHeal-=.1,void this.AudioManager.playSound(s.Constants.SoundTrack.ArmyLv3HitSound);if("Army2_Lv3"===this.node.name){this.AudioManager.playSound(s.Constants.SoundTrack.Lv2_Tank);var t=this.node.getChildByName("Blast").getComponent(sp.Skeleton);return t.node.active=!0,t.setAnimation(0,"2",!1),void(s.Constants.EnemyBaseHeal-=.2)}return"Army2_Lv2"===this.node.name?(s.Constants.EnemyBaseHeal-=.1,void this.AudioManager.playSound(s.Constants.SoundTrack.Lv2_Gun)):"ally"===this.skin&&"Army_Lv2"===this.node.name?(this.AudioManager.playSound(s.Constants.SoundTrack.ArmyLv1HitSound),void(s.Constants.EnemyBaseHeal-=.08)):("ally"===this.skin&&(this.AudioManager.playSound(s.Constants.SoundTrack.ArmyLv1HitSound),s.Constants.EnemyBaseHeal-=.05),void("enemy"===this.skin&&(s.Constants.AllyBaseHeal-=.05,this.AudioManager.playSound(s.Constants.SoundTrack.ArmyLv1HitSound))))},e.prototype.handleDecreaseHealthArmy=function(){if("ally"===this.skin){if("Army_Lv3"===this.node.name)return s.Constants.enemyArmies[0].getComponent(o).HealthBar.scaleX-=.5,void this.AudioManager.playSound(s.Constants.SoundTrack.ArmyLv3HitSound);if("Army2_Lv3"===this.node.name){this.AudioManager.playSound(s.Constants.SoundTrack.Lv2_Tank);var t=this.node.getChildByName("Blast").getComponent(sp.Skeleton);return t.node.active=!0,t.setAnimation(0,"2",!1),void(s.Constants.enemyArmies[0].getComponent(o).HealthBar.scaleX-=1)}return"Army2_Lv2"===this.node.name?(s.Constants.enemyArmies[0].getComponent(o).HealthBar.scaleX-=.5,void this.AudioManager.playSound(s.Constants.SoundTrack.Lv2_Gun)):"Army_Lv2"===this.node.name?(s.Constants.enemyArmies[0].getComponent(o).HealthBar.scaleX-=.2,void this.AudioManager.playSound(s.Constants.SoundTrack.ArmyLv1HitSound)):"Army2_Lv1"===this.node.name?(s.Constants.enemyArmies[0].getComponent(o).HealthBar.scaleX-=.3,void this.AudioManager.playSound(s.Constants.SoundTrack.Lv2_Kinife)):(s.Constants.enemyArmies[0].getComponent(o).HealthBar.scaleX-=.2,void this.AudioManager.playSound(s.Constants.SoundTrack.ArmyLv1HitSound))}this.AudioManager.playSound(s.Constants.SoundTrack.ArmyLv1HitSound),s.Constants.allyArmies[0].getComponent(o).HealthBar.scaleX-=.2},e.prototype.die=function(){this.node.getComponent(cc.Collider).enabled=!1,this.node.getComponent(cc.Collider).destroy(),this.node.getComponent(o).enabled=!1,"enemy"===this.skin?(s.Constants.enemyDie+=1,s.Constants.enemyArmies.splice(0,1)):s.Constants.allyArmies.splice(0,1)},e.prototype.checkDie=function(){var t=this;this.isLive=!1,this.spine.timeScale=.3,this.spine.setAnimation(0,s.Constants.ArmyAnim.Die,!1),this.HealthBar.active=!1,cc.tween(this.node).to(1,{opacity:0}).call(function(){return t.node.destroy()}).start(),this.die()},e.prototype.checkRun=function(){if(this.isLive){var t=null,e=null;if("ally"===this.skin&&this.canRun){var o=this.node.getPosition();if(t=this.isReadyToFight?this.roadToEnemyPos(o,"ally"):o,"Army_Lv3"===this.node.name||"Army2_Lv3"===this.node.name)return e=new cc.Vec2(o.x+25+s.Constants.Responsive.speedCalculated,t.y),void this.node.setPosition(o.lerp(e,.02,o));"Army"!==this.node.name&&"Army2_Lv2"!==this.node.name&&"Army2_Lv1"!==this.node.name&&"Army_Lv2"!==this.node.name||(e=new cc.Vec2(o.x+10+s.Constants.Responsive.speedCalculated,t.y),this.node.setPosition(o.lerp(e,.02,o)))}"enemy"===this.skin&&this.canRun&&(o=this.node.getPosition(),t=this.isReadyToFight?this.roadToEnemyPos(o,"enemy"):o,e=new cc.Vec2(o.x-10-s.Constants.Responsive.speedCalculated,t.y),this.node.setPosition(o.lerp(e,.02,o)))}},e.prototype.roadToEnemyPos=function(t,e){return"ally"===e?s.Constants.enemyArmies[0]?s.Constants.enemyArmies[0].getPosition():t:s.Constants.allyArmies[0]?s.Constants.allyArmies[0].getPosition():t},e.prototype.checkPause=function(){if(s.Constants.isPauseGame&&(this.canRun=!1),s.Constants.isPauseGame&&!this.pauseFlag)return this.canRun=!1,this.collider.enabled=!1,this.pauseFlag=!0,void this.spine.setAnimation(0,s.Constants.ArmyAnim.Run,!0);s.Constants.isPauseGame||(this.pauseFlag=!1)},e.prototype.update=function(){this.checkPause(),this.HealthBar.scaleX<=.1&&this.isLive&&this.checkDie(),this.checkRun()},i([u(cc.Node)],e.prototype,"HealthBar",void 0),o=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager"}],AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"4c7cf9rDSJL36cJtz1lUze/","AudioManager");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(i<3?a(s):i>3?a(e,o,s):a(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Data/constants"),r=cc._decorator,c=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgSound=null,e.ArmyLv1HitSound=null,e.ArmyLv2HitSound=null,e.ArmyLv3HitSound=null,e.earthQuakeSound=null,e.clickSound=null,e.buySound=null,e.coinSound=null,e.failSound=null,e.winSound=null,e.heliSound=null,e.UpgradeSound=null,e.Lv2_Kinife=null,e.Lv2_Gun=null,e.Lv2_Tank=null,e}return a(e,t),e.prototype.playSound=function(t){this.normalNetwork(t)},e.prototype.normalNetwork=function(t){if(s.Constants.ironSource.SoundState&&!s.Constants.ironSource.isEndGame)switch(t){case"bgSound":this.bgSound.play();break;case"earthQuakeSound":this.earthQuakeSound.play();break;case"UpgradeSound":this.UpgradeSound.play();break;case"heliSound":this.heliSound.play();break;case"ArmyLv1HitSound":this.ArmyLv1HitSound.play();break;case"ArmyLv2HitSound":this.ArmyLv2HitSound.play();break;case"ArmyLv3HitSound":this.ArmyLv3HitSound.play();break;case"clickSound":this.clickSound.play();break;case"buySound":this.buySound.play();break;case"coinSound":this.coinSound.play();break;case"failSound":this.failSound.play();break;case"winSound":this.winSound.play();break;case"UpgradeSound":this.UpgradeSound.play();break;case"Lv2_Kinife":this.Lv2_Kinife.play();break;case"Lv2_Gun":this.Lv2_Gun.play();break;case"Lv2_Tank":this.Lv2_Tank.play()}},e.prototype.stopSound=function(t){switch(t){case"bgSound":this.bgSound.stop();break;case"UpgradeSound":this.UpgradeSound.stop();break;case"earthQuakeSound":this.earthQuakeSound.stop();break;case"heliSound":this.heliSound.stop();break;case"ArmyLv1HitSound":this.ArmyLv1HitSound.stop();break;case"ArmyLv2HitSound":this.ArmyLv2HitSound.stop();break;case"ArmyLv3HitSound":this.ArmyLv3HitSound.stop();break;case"clickSound":this.clickSound.stop();break;case"buySound":this.buySound.stop();break;case"coinSound":this.coinSound.stop();break;case"failSound":this.failSound.stop();break;case"winSound":this.winSound.stop();break;case"UpgradeSound":this.UpgradeSound.stop();break;case"Lv2_Kinife":this.Lv2_Kinife.stop();break;case"Lv2_Gun":this.Lv2_Gun.stop();break;case"Lv2_Tank":this.Lv2_Tank.stop()}},e.prototype.stopAllSound=function(){this.UpgradeSound.stop(),this.Lv2_Kinife.stop(),this.Lv2_Gun.stop(),this.Lv2_Tank.stop(),this.bgSound.stop(),this.ArmyLv1HitSound.stop(),this.ArmyLv2HitSound.stop(),this.ArmyLv3HitSound.stop(),this.earthQuakeSound.stop(),this.clickSound.stop(),this.buySound.stop(),this.coinSound.stop(),this.heliSound.stop(),this.UpgradeSound.stop()},i([l(cc.AudioSource)],e.prototype,"bgSound",void 0),i([l(cc.AudioSource)],e.prototype,"ArmyLv1HitSound",void 0),i([l(cc.AudioSource)],e.prototype,"ArmyLv2HitSound",void 0),i([l(cc.AudioSource)],e.prototype,"ArmyLv3HitSound",void 0),i([l(cc.AudioSource)],e.prototype,"earthQuakeSound",void 0),i([l(cc.AudioSource)],e.prototype,"clickSound",void 0),i([l(cc.AudioSource)],e.prototype,"buySound",void 0),i([l(cc.AudioSource)],e.prototype,"coinSound",void 0),i([l(cc.AudioSource)],e.prototype,"failSound",void 0),i([l(cc.AudioSource)],e.prototype,"winSound",void 0),i([l(cc.AudioSource)],e.prototype,"heliSound",void 0),i([l(cc.AudioSource)],e.prototype,"UpgradeSound",void 0),i([l(cc.AudioSource)],e.prototype,"Lv2_Kinife",void 0),i([l(cc.AudioSource)],e.prototype,"Lv2_Gun",void 0),i([l(cc.AudioSource)],e.prototype,"Lv2_Tank",void 0),i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Data/constants":"constants"}],BaseController:[function(t,e,o){"use strict";cc._RF.push(e,"ff0ebeMo+dPNqttw4fwK25C","BaseController");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(i<3?a(s):i>3?a(e,o,s):a(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Data/constants"),r=t("../Plugin/AudioManager"),c=t("./GamePlay"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AudioManager=null,e.GamePlay=null,e.baseLose=null,e.HealthBar=null,e.baseSide="",e.baseLv2=null,e.rigidbody=null,e.collider=null,e.isUpgrade=!1,e}return a(e,t),e.prototype.start=function(){"Player"===this.baseSide&&(this.baseLv2=this.node.getChildByName("base").getChildByName("baseLv2"))},e.prototype.update=function(){"Player"!==this.baseSide||s.Constants.isHasResult||(this.HealthBar.scaleX<.05&&(s.Constants.isHasResult=!0,s.Constants.isPauseGame=!0,s.Constants.isLoose=!0,this.HealthBar.active=!1,this.baseLose.active=!0,this.AudioManager.playSound(s.Constants.SoundTrack.earthQuakeSound),this.node.getChildByName("base").getComponent(cc.Sprite).enabled=!1,this.node.getChildByName("base").getChildByName("HealBar").active=!1,this.GamePlay.CTA.active=!0),this.HealthBar.scaleX=s.Constants.AllyBaseHeal),"Enemy"!==this.baseSide||s.Constants.isHasResult||(this.HealthBar.scaleX<.05&&(s.Constants.isHasResult=!0,s.Constants.isPauseGame=!0,this.baseLose.active=!0,this.HealthBar.active=!1,this.AudioManager.playSound(s.Constants.SoundTrack.earthQuakeSound),this.node.getChildByName("base").getComponent(cc.Sprite).enabled=!1,this.node.getChildByName("base").getChildByName("HealBar").active=!1,this.GamePlay.CTA.active=!0),this.HealthBar.scaleX=s.Constants.EnemyBaseHeal),"Player"===this.baseSide&&s.Constants.isUpgrade&&!this.isUpgrade&&(this.isUpgrade=!0,this.node.getChildByName("base").getComponent(cc.Sprite).enabled=!1,this.baseLv2.active=!0)},i([p(r.default)],e.prototype,"AudioManager",void 0),i([p(c.default)],e.prototype,"GamePlay",void 0),i([p(cc.Node)],e.prototype,"baseLose",void 0),i([p(cc.Node)],e.prototype,"HealthBar",void 0),i([p(cc.String)],e.prototype,"baseSide",void 0),i([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager","./GamePlay":"GamePlay"}],BossController:[function(t,e,o){"use strict";cc._RF.push(e,"4c056/xdspPmoaGSWmCeGgR","BossController");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(i<3?a(s):i>3?a(e,o,s):a(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Data/constants"),r=t("../Plugin/AudioManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AudioManager=null,e.blast1=null,e.blast2=null,e.blast3=null,e}return a(e,t),e.prototype.start=function(){var t=this;this.AudioManager.playSound(s.Constants.SoundTrack.heliSound),this.scheduleOnce(function(){t.blast1.node.active=!0,t.AudioManager.playSound(s.Constants.SoundTrack.earthQuakeSound)},.5),this.scheduleOnce(function(){t.blast2.node.active=!0,t.AudioManager.playSound(s.Constants.SoundTrack.earthQuakeSound)},.7),this.scheduleOnce(function(){t.blast3.node.active=!0,t.AudioManager.playSound(s.Constants.SoundTrack.earthQuakeSound)},1),cc.tween(this.node).to(1,{scale:s.Constants.scaleBoss,x:-40,y:-30}).call(function(){s.Constants.isWin=!0,s.Constants.isPauseGame=!0}).start()},i([u(r.default)],e.prototype,"AudioManager",void 0),i([u(sp.Skeleton)],e.prototype,"blast1",void 0),i([u(sp.Skeleton)],e.prototype,"blast2",void 0),i([u(sp.Skeleton)],e.prototype,"blast3",void 0),i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager"}],CTA:[function(t,e,o){"use strict";cc._RF.push(e,"71158ED8B1KhJK96FnjvNWK","CTA");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(i<3?a(s):i>3?a(e,o,s):a(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Controller/GameController"),r=t("../Data/constants"),c=t("../Plugin/AudioManager"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GameController=null,e.AudioManager=null,e.rect=null,e.btn=null,e.label=null,e.overlay=null,e.Next=null,e.tryAgain=null,e}return a(e,t),e.prototype.start=function(){var t=this;cc.tween(this.overlay).to(.5,{opacity:100}).start(),this.activeTweenForBtn(),this.tryAgain.opacity=0,this.Next.opacity=0,this.btn.opacity=0,r.Constants.isLoose?(this.tryAgain.active=!0,this.Next.active=!1):(this.tryAgain.active=!1,this.Next.active=!0),this.scheduleOnce(function(){t.btn.opacity=255,t.tryAgain.opacity=255,t.Next.opacity=255,r.Constants.isLoose?t.AudioManager.playSound(r.Constants.SoundTrack.failSound):t.AudioManager.playSound(r.Constants.SoundTrack.winSound)},1.5),this.btn.on(cc.Node.EventType.TOUCH_START,this.GameController.installHandle,this),this.overlay.on(cc.Node.EventType.TOUCH_START,this.GameController.installHandle,this)},e.prototype.activeTweenForBtn=function(){cc.tween(this.btn).repeatForever(cc.tween(this.btn).to(.5,{scale:.45}).to(.5,{scale:.5},{easing:"elasticOut"})).start()},i([p(s.GameController)],e.prototype,"GameController",void 0),i([p(c.default)],e.prototype,"AudioManager",void 0),i([p(cc.Node)],e.prototype,"rect",void 0),i([p(cc.Node)],e.prototype,"btn",void 0),i([p(cc.Label)],e.prototype,"label",void 0),i([p(cc.Node)],e.prototype,"overlay",void 0),i([p(cc.Node)],e.prototype,"Next",void 0),i([p(cc.Node)],e.prototype,"tryAgain",void 0),i([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Controller/GameController":"GameController","../Data/constants":"constants","../Plugin/AudioManager":"AudioManager"}],CoinController:[function(t,e,o){"use strict";cc._RF.push(e,"f60c4CpqFlH750A1K4ORO4l","CoinController");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(i<3?a(s):i>3?a(e,o,s):a(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Data/constants"),r=t("../Plugin/AudioManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AudioManager=null,e.frameUnlockArmies=[],e.frameUpgrade=null,e.label=null,e.tempEnemyDie=0,e.isTweenRunning=!1,e}return a(e,t),e.prototype.start=function(){},e.prototype.increaseCoin=function(t,e){var o=this;this.isTweenRunning||(this.AudioManager.playSound(s.Constants.SoundTrack.coinSound),this.label.string=String(t),cc.tween(s.Constants).to(.5,{currentCoin:e},{progress:function(t,e,n,a){var i=Math.floor(cc.misc.lerp(t,e,a));return o.label.string=i.toString(),i}}).call(function(){o.isTweenRunning=!1}).start())},e.prototype.checkUnlockArmy=function(){for(var t=0;t<this.frameUnlockArmies.length;t++){var e=this.frameUnlockArmies[t],o=e.getChildByName("Label").getComponent(cc.Label);s.Constants.currentCoin<Number(o.string)?e.color=cc.color(113,113,113,255):e.color=cc.color(255,255,255,255)}},e.prototype.checkEnableFrameUpgrade=function(){var t=this.frameUpgrade;if(t){var e=t.getChildByName("Label").getComponent(cc.Label);s.Constants.currentCoin<Number(e.string)?t.color=cc.color(113,113,113,255):t.color=cc.color(255,255,255,255)}},e.prototype.update=function(){if(this.checkUnlockArmy(),this.checkEnableFrameUpgrade(),this.tempEnemyDie!==s.Constants.enemyDie){var t=30*s.Constants.enemyDie;this.increaseCoin(s.Constants.currentCoin,t)}this.tempEnemyDie=s.Constants.enemyDie},i([u(r.default)],e.prototype,"AudioManager",void 0),i([u([cc.Node])],e.prototype,"frameUnlockArmies",void 0),i([u(cc.Node)],e.prototype,"frameUpgrade",void 0),i([u(cc.Label)],e.prototype,"label",void 0),i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager"}],GameController:[function(t,e,o){"use strict";cc._RF.push(e,"459a6fkmHFH5Z+5+z1O55SB","GameController");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(i<3?a(s):i>3?a(e,o,s):a(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.GameController=void 0;var s=t("../Data/constants"),r=t("../Plugin/AudioManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AudioManager=null,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){window.gameReady&&window.gameReady()},e.prototype.installHandle=function(){if(console.log("install"),s.Constants.ironSource.isEndGame=!0,this.AudioManager.stopAllSound(),window.gameEnd&&window.gameEnd(),"undefined"==typeof playableSDK)if("undefined"==typeof ExitApi){if("undefined"==typeof dapi)return"undefined"!=typeof mraid?(cc.sys.os==cc.sys.OS_ANDROID||(cc.sys.os,cc.sys.ANDROID),void mraid.open("https://play.google.com/store/apps/details?id=com.an.epicwarrior.stoneage")):void(window.install&&window.install());dapi.openStoreUrl()}else ExitApi.exit();else window.playableSDK.openAppStore()},i([u(r.default)],e.prototype,"AudioManager",void 0),i([l],e)}(cc.Component);o.GameController=p,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager"}],GamePlay:[function(t,e,o){"use strict";cc._RF.push(e,"b1d34srP15JNoxtzOCtQ0oZ","GamePlay");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(i<3?a(s):i>3?a(e,o,s):a(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Data/constants"),r=t("../Plugin/AudioManager"),c=t("./GameController"),l=t("./LoadFoodController"),u=t("./SpawnController"),p=cc._decorator,d=p.ccclass,y=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AudioManager=null,e.GameController=null,e.LoadFoodController=null,e.SpawnController=null,e.CTA=null,e.isCollideBaseFlag=!1,e}return a(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0},e.prototype.resetGame=function(){s.Constants.allyArmies.forEach(function(t){return t.destroy()}),s.Constants.enemyArmies.forEach(function(t){return t.destroy()}),s.Constants.isStartGame=!1,s.Constants.isPauseGame=!0,s.Constants.isCanBuyArmyLv2=!1,s.Constants.isCanBuyArmyLv3=!1,s.Constants.isUpgrade=!1,s.Constants.isWin=!1,s.Constants.isLoose=!1,s.Constants.isCollideBase=!1,s.Constants.food=3,s.Constants.enemyDie=0,s.Constants.currentCoin=0,s.Constants.EnemyBaseHeal=1,s.Constants.AllyBaseHeal=1,s.Constants.allyArmies=[],s.Constants.enemyArmies=[],cc.director.loadScene("game")},e.prototype.start=function(){var t=this;this.AudioManager.playSound(s.Constants.SoundTrack.bgSound),this.AudioManager.bgSound.volume=.5,cc.view.setResizeCallback(function(){s.Constants.ironSource.isEndGame||t.resetGame()})},e.prototype.spawnArmy=function(t){switch(s.Constants.isPauseGame=!1,!s.Constants.isStartGame&&this.LoadFoodController.increaseFood(),!s.Constants.isStartGame&&this.SpawnController.SpawnEnemies(),s.Constants.isStartGame=!0,t){case 1:s.Constants.food>=3&&(s.Constants.food-=3,this.SpawnController.SpawnPlayerArmy(s.Constants.ArmySkin.Ally,1));break;case 2:s.Constants.food>=4&&s.Constants.isCanBuyArmyLv2&&(s.Constants.food-=4,this.SpawnController.SpawnPlayerArmy(s.Constants.ArmySkin.Ally,2));break;case 3:s.Constants.food>=5&&s.Constants.isCanBuyArmyLv3&&(s.Constants.food-=5,this.SpawnController.SpawnPlayerArmy(s.Constants.ArmySkin.Ally,3));break;default:console.log("can not spawn")}},i([y(r.default)],e.prototype,"AudioManager",void 0),i([y(c.GameController)],e.prototype,"GameController",void 0),i([y(l.default)],e.prototype,"LoadFoodController",void 0),i([y(u.default)],e.prototype,"SpawnController",void 0),i([y(cc.Node)],e.prototype,"CTA",void 0),i([d],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager","./GameController":"GameController","./LoadFoodController":"LoadFoodController","./SpawnController":"SpawnController"}],IronSource:[function(t,e,o){"use strict";cc._RF.push(e,"49c0ang8TBDWqCvjXG1XKDi","IronSource");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(i<3?a(s):i>3?a(e,o,s):a(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Data/constants"),r=t("../Plugin/AudioManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AudioManager=null,e}return a(e,t),e.prototype.handleIronSourcePlaySound=function(){s.Constants.ironSource.isPlayBgSound||(s.Constants.ironSource.isPlayBgSound=!0,s.Constants.ironSource.SoundState&&this.AudioManager.playSound(s.Constants.SoundTrack.bgSound))},e.prototype.handleMuteSoundIronSource=function(){s.Constants.ironSource.State=parseInt(localStorage.getItem("cocosSoundState"),10),s.Constants.ironSource.State&&(1!==s.Constants.ironSource.State||s.Constants.ironSource.SoundState||s.Constants.ironSource.isEndGame||(s.Constants.ironSource.SoundState=!0,this.AudioManager.playSound(s.Constants.SoundTrack.bgSound)),2===s.Constants.ironSource.State&&s.Constants.ironSource.SoundState&&(s.Constants.ironSource.SoundState=!1,this.AudioManager.stopAllSound()))},i([u(r.default)],e.prototype,"AudioManager",void 0),i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/constants":"constants","../Plugin/AudioManager":"AudioManager"}],LoadFoodController:[function(t,e,o){"use strict";cc._RF.push(e,"8aaf1Qac2lG3aTwixhAfLvl","LoadFoodController");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(i<3?a(s):i>3?a(e,o,s):a(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Data/constants"),r=cc._decorator,c=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.overlay=null,e.label=null,e.unitCosts=[],e.unitFrames=[],e}return a(e,t),e.prototype.start=function(){},e.prototype.increaseFood=function(){var t=this;this.overlay.scaleX=0,s.Constants.isPauseGame||cc.tween(this.overlay).to(1.5,{scaleX:1}).call(function(){s.Constants.food+=1,t.increaseFood()}).start()},e.prototype.checkEnableCost=function(){for(var t=0;t<this.unitCosts.length;t++){var e=this.unitCosts[t];Number(this.label.string)>=Number(e.string)?(0===t&&(this.unitFrames[t].opacity=255,e.node.color=cc.Color.WHITE),1===t&&s.Constants.isCanBuyArmyLv2&&(this.unitFrames[t].opacity=255,e.node.color=cc.Color.WHITE),2===t&&s.Constants.isCanBuyArmyLv3&&(this.unitFrames[t].opacity=255,e.node.color=cc.Color.WHITE)):(e.node.color=cc.Color.RED,1===t&&s.Constants.isCanBuyArmyLv2&&(this.unitFrames[t].opacity=255),2===t&&s.Constants.isCanBuyArmyLv3&&(this.unitFrames[t].opacity=255),this.unitFrames[t].opacity=0)}},e.prototype.update=function(){this.label.string=String(s.Constants.food),this.checkEnableCost()},i([l(cc.Node)],e.prototype,"overlay",void 0),i([l(cc.Label)],e.prototype,"label",void 0),i([l([cc.Label])],e.prototype,"unitCosts",void 0),i([l([cc.Node])],e.prototype,"unitFrames",void 0),i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Data/constants":"constants"}],Responsive:[function(t,e,o){"use strict";cc._RF.push(e,"d3abaWwEQhAi5Yf4wF9VZxN","Responsive");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(i<3?a(s):i>3?a(e,o,s):a(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Controller/BaseController"),r=t("../Controller/CoinController"),c=t("../Data/constants"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enemyBase=null,e.allyBase=null,e.CoinController=null,e.Environment=null,e.Options=null,e.Bg_Hor=null,e.Bg_Ver=null,e.FrameFood=null,e.LoadFood=null,e.Options_Layout=null,e.device="",e.isRotate=!1,e.HORIZONTAL_IPX="horizontal_IPX",e.HORIZONTAL_TABLET="horizontal_Tablet",e.VERTICAL_IPX="vertical_IPX",e.VERTICAL_MOBILE="vertical_Mobile",e}return a(e,t),e.prototype.start=function(){this.Bg_Hor=this.Environment.getChildByName("Bg_Hor"),this.Bg_Ver=this.Environment.getChildByName("Bg_Ver"),this.FrameFood=this.Options.getChildByName("Framefood"),this.LoadFood=this.Options.getChildByName("Loadfood"),this.Options_Layout=this.Options.getChildByName("Layout")},e.prototype.handleRotate=function(){cc.view.getFrameSize().width>cc.view.getFrameSize().height?(c.Constants.isRotate=!0,this.setHorizontal()):(c.Constants.isRotate=!1,this.setVertical())},e.prototype.setHorizontal=function(){var t=cc.view.getFrameSize().width;cc.view.getFrameSize().height/t<.65?this.setHorizontalForIpX():this.setHorizontalForTablet()},e.prototype.setHorizontalForIpX=function(){if(this.HORIZONTAL_IPX!==this.device){this.device=this.HORIZONTAL_IPX,c.Constants.Responsive.speedCalculated=20,c.Constants.scaleArmy=.5,this.Bg_Hor.active=!0,this.Bg_Ver.active=!1,this.CoinController.node.scale=1,this.allyBase.node.scale=1,this.allyBase.getComponent(cc.Widget).top=210,this.allyBase.getComponent(cc.Widget).left=80,this.allyBase.node.getChildByName("base").setScale(.4,.4),this.enemyBase.node.scale=1,this.enemyBase.getComponent(cc.Widget).top=210,this.enemyBase.getComponent(cc.Widget).right=80,this.enemyBase.node.getChildByName("base").setScale(-.4,.4),this.FrameFood.setScale(10,.3),this.FrameFood.getComponent(cc.Widget).bottom=-5,this.LoadFood.setScale(.316,.316),this.LoadFood.getComponent(cc.Widget).left=-5,this.LoadFood.getComponent(cc.Widget).bottom=-10,this.Options_Layout.setScale(1,1);var t=this.Options_Layout.getComponent(cc.Widget),e=this.Options_Layout.getComponent(cc.Layout),o=this.Options_Layout.children;t.isAlignLeft=!0,t.isAlignRight=!0,t.isAlignHorizontalCenter=!1,t.left=30,t.right=-130,t.bottom=65,e.spacingX=140,o.forEach(function(t){t.name.includes("Op")?t.scale=1.15:t.scale=.41})}},e.prototype.setHorizontalForTablet=function(){if(this.HORIZONTAL_TABLET!==this.device){this.device=this.HORIZONTAL_TABLET,c.Constants.Responsive.speedCalculated=10,c.Constants.scaleArmy=.5,this.Bg_Hor.active=!0,this.Bg_Ver.active=!1,this.CoinController.node.scale=1,this.allyBase.node.scale=1,this.allyBase.getComponent(cc.Widget).top=210,this.allyBase.getComponent(cc.Widget).left=80,this.allyBase.node.getChildByName("base").setScale(.4,.4),this.enemyBase.node.scale=1,this.enemyBase.getComponent(cc.Widget).top=210,this.enemyBase.getComponent(cc.Widget).right=80,this.enemyBase.node.getChildByName("base").setScale(-.4,.4),this.FrameFood.setScale(10,.3),this.FrameFood.getComponent(cc.Widget).bottom=-5,this.LoadFood.setScale(.316,.316),this.LoadFood.getComponent(cc.Widget).left=-5,this.LoadFood.getComponent(cc.Widget).bottom=-10,this.Options_Layout.setScale(1,1);var t=this.Options_Layout.getComponent(cc.Widget),e=this.Options_Layout.getComponent(cc.Layout),o=this.Options_Layout.children;t.isAlignLeft=!0,t.isAlignRight=!0,t.isAlignHorizontalCenter=!1,t.left=30,t.right=-130,t.bottom=65,e.spacingX=120,o.forEach(function(t){t.name.includes("Op")?t.scale=1.15:t.scale=.41})}},e.prototype.setVertical=function(){cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5?this.setIphoneX():this.setMobile()},e.prototype.setIphoneX=function(){if(!c.Constants.Responsive.isVer){c.Constants.Responsive.speedCalculated=0,c.Constants.scaleArmy=.25,this.Bg_Hor.active=!1,this.Bg_Ver.active=!0,this.CoinController.node.scale=.8,this.allyBase.node.scale=.85,this.allyBase.getComponent(cc.Widget).top=220,this.allyBase.getComponent(cc.Widget).left=30,this.allyBase.node.getChildByName("base").setScale(.25,.25),this.enemyBase.node.scale=.85,this.enemyBase.getComponent(cc.Widget).top=220,this.enemyBase.getComponent(cc.Widget).right=30,this.enemyBase.node.getChildByName("base").setScale(-.25,.25),this.Options_Layout.setScale(1,1);var t=this.Options_Layout.getComponent(cc.Widget);t.isAlignHorizontalCenter=!0,t.isAlignRight=!1}},e.prototype.setMobile=function(){if(this.VERTICAL_MOBILE!==this.device){this.device=this.VERTICAL_MOBILE,cc.view.getFrameSize().width,cc.view.getFrameSize().height,c.Constants.Responsive.speedCalculated=0,c.Constants.scaleArmy=.25,this.Bg_Hor.active=!1,this.Bg_Ver.active=!0,this.CoinController.node.scale=.8,this.allyBase.node.scale=.85,this.allyBase.getComponent(cc.Widget).top=220,this.allyBase.getComponent(cc.Widget).left=30,this.allyBase.node.getChildByName("base").setScale(.25,.25),this.enemyBase.node.scale=.85,this.enemyBase.getComponent(cc.Widget).top=220,this.enemyBase.getComponent(cc.Widget).right=30,this.enemyBase.node.getChildByName("base").setScale(-.25,.25),this.Options_Layout.setScale(1,1);var t=this.Options_Layout.getComponent(cc.Widget),e=this.Options_Layout.getComponent(cc.Layout);t.isAlignHorizontalCenter=!0,t.isAlignRight=!1,e.spacingX=70}},e.prototype.update=function(){this.handleRotate()},i([p(s.default)],e.prototype,"enemyBase",void 0),i([p(s.default)],e.prototype,"allyBase",void 0),i([p(r.default)],e.prototype,"CoinController",void 0),i([p(cc.Node)],e.prototype,"Environment",void 0),i([p(cc.Node)],e.prototype,"Options",void 0),i([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Controller/BaseController":"BaseController","../Controller/CoinController":"CoinController","../Data/constants":"constants"}],SpawnController:[function(t,e,o){"use strict";cc._RF.push(e,"fe46aRT4+tC+aNQcYlNw6Y+","SpawnController");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(i<3?a(s):i>3?a(e,o,s):a(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Data/constants"),r=t("../Other/Army"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AllyPoints=[],e.EnemyPoints=[],e.Army_Lv1=null,e.Army_Lv2=null,e.Army_Lv3=null,e.Army2_Lv1=null,e.Army2_Lv2=null,e.Army2_Lv3=null,e.enemySpawnTime=4,e}return a(e,t),e.prototype.start=function(){},e.prototype.SpawnEnemies=function(){this.schedule(function(){s.Constants.isPauseGame||this.SpawnEnemyArmy(s.Constants.ArmySkin.Enemy)},this.enemySpawnTime,cc.macro.REPEAT_FOREVER,.2)},e.prototype.SpawnEnemyArmy=function(t){(s.Constants.isCanBuyArmyLv3||s.Constants.isUpgrade)&&.3===this.enemySpawnTime&&(console.log("up spawn time"),this.enemySpawnTime=1.5);var e=cc.math.randomRangeInt(0,3),o=cc.instantiate(this.Army_Lv1);s.Constants.enemyArmies.push(o),o.scaleX=-s.Constants.scaleArmy,o.scaleY=s.Constants.scaleArmy;var n=this.EnemyPoints[e],a=o.getComponent(r.default);n.parent.addChild(o),o.setSiblingIndex(0),o.setPosition(n.getPosition()),a.skin=t,o.group="Enemy",o.getChildByName("Spine").getComponent(sp.Skeleton).setSkin(t)},e.prototype.SpawnPlayerArmy=function(t,e){var o,n=cc.math.randomRangeInt(0,3);if(s.Constants.isUpgrade)switch(e){case 1:o=cc.instantiate(this.Army2_Lv1);break;case 2:o=cc.instantiate(this.Army2_Lv2);break;case 3:o=cc.instantiate(this.Army2_Lv3)}else switch(e){case 1:o=cc.instantiate(this.Army_Lv1);break;case 2:o=cc.instantiate(this.Army_Lv2);break;case 3:o=cc.instantiate(this.Army_Lv3)}s.Constants.allyArmies.push(o),console.log("Allies:"+s.Constants.allyArmies.length),o.scale=s.Constants.scaleArmy;var a=this.AllyPoints[n],i=o.getComponent(r.default);a.parent.addChild(o),o.setSiblingIndex(0),o.setPosition(a.getPosition()),i.skin=t,o.group="Ally";var c=o.getChildByName("Spine").getComponent(sp.Skeleton);c.setSkin(t),c.timeScale=.9},i([u([cc.Node])],e.prototype,"AllyPoints",void 0),i([u([cc.Node])],e.prototype,"EnemyPoints",void 0),i([u(cc.Prefab)],e.prototype,"Army_Lv1",void 0),i([u(cc.Prefab)],e.prototype,"Army_Lv2",void 0),i([u(cc.Prefab)],e.prototype,"Army_Lv3",void 0),i([u(cc.Prefab)],e.prototype,"Army2_Lv1",void 0),i([u(cc.Prefab)],e.prototype,"Army2_Lv2",void 0),i([u(cc.Prefab)],e.prototype,"Army2_Lv3",void 0),i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/constants":"constants","../Other/Army":"Army"}],TouchAreaController:[function(t,e,o){"use strict";cc._RF.push(e,"85711X2lIBGPIPjaJXFSYaE","TouchAreaController");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(i<3?a(s):i>3?a(e,o,s):a(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.TouchAreaController=void 0;var s=t("../Data/constants"),r=t("../Data/IronSource"),c=t("../Plugin/AudioManager"),l=t("./GameController"),u=t("./GamePlay"),p=cc._decorator,d=p.ccclass,y=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.IronSource=null,e.AudioManager=null,e.GameController=null,e.GamePlay=null,e.CTA=null,e.hidemask=null,e.hand=null,e.btn_SpawnArmys=[],e.btn_install=null,e.btn_upgrade=null,e.btn_BuyArmys=[],e.ps_upgrade=[],e.Lv1Troops=[],e.Lv2Troops=[],e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.registerEvent()},e.prototype.registerEvent=function(){for(var t=this,e=function(e){o.btn_SpawnArmys[e].on(cc.Node.EventType.TOUCH_START,function(){s.Constants.isToStore?t.GameController.installHandle():s.Constants.isLoose||s.Constants.isWin||t.CTA.active||(t.AudioManager.playSound(s.Constants.SoundTrack.clickSound),t.GamePlay.spawnArmy(e+1),t.hand.active=!1)},o)},o=this,n=0;n<this.btn_SpawnArmys.length;n++)e(n);var a=function(e){var o=i.btn_BuyArmys[e];o.on(cc.Node.EventType.TOUCH_START,function(){s.Constants.isToStore?t.GameController.installHandle():0===e?s.Constants.currentCoin>=60?(t.AudioManager.playSound(s.Constants.SoundTrack.buySound),console.log("buyed"),s.Constants.isCanBuyArmyLv2=!0,s.Constants.enemyDie-=2,t.btn_SpawnArmys[e+1].getChildByName("frame").active=!0,o.active=!1):console.log("-- can not buy"):s.Constants.currentCoin>=90?(t.AudioManager.playSound(s.Constants.SoundTrack.buySound),console.log("buyed"),s.Constants.isCanBuyArmyLv3=!0,s.Constants.enemyDie-=3,t.btn_SpawnArmys[e+1].getChildByName("frame").active=!0,o.active=!1):console.log("-- can not buy")},i)},i=this;for(n=0;n<this.btn_BuyArmys.length;n++)a(n);this.btn_upgrade.on(cc.Node.EventType.TOUCH_START,function(){t.AudioManager.playSound(s.Constants.SoundTrack.UpgradeSound),s.Constants.currentCoin>=120?(console.log("Upgraded"),s.Constants.isUpgrade=!0,s.Constants.enemyDie-=4,t.AudioManager.playSound(s.Constants.SoundTrack.UpgradeSound),t.btn_upgrade.parent.active=!1,t.ps_upgrade.forEach(function(t){return t.resetSystem()}),t.Lv2Troops.forEach(function(t){return t.active=!0}),t.Lv1Troops.forEach(function(t){return t.active=!1})):console.log("Fail")},this)},i([y(r.default)],e.prototype,"IronSource",void 0),i([y(c.default)],e.prototype,"AudioManager",void 0),i([y(l.GameController)],e.prototype,"GameController",void 0),i([y(u.default)],e.prototype,"GamePlay",void 0),i([y(cc.Node)],e.prototype,"CTA",void 0),i([y(cc.Node)],e.prototype,"hidemask",void 0),i([y(cc.Node)],e.prototype,"hand",void 0),i([y([cc.Node])],e.prototype,"btn_SpawnArmys",void 0),i([y(cc.Node)],e.prototype,"btn_install",void 0),i([y(cc.Node)],e.prototype,"btn_upgrade",void 0),i([y([cc.Node])],e.prototype,"btn_BuyArmys",void 0),i([y([cc.ParticleSystem])],e.prototype,"ps_upgrade",void 0),i([y([cc.Node])],e.prototype,"Lv1Troops",void 0),i([y([cc.Node])],e.prototype,"Lv2Troops",void 0),i([d],e)}(cc.Component);o.TouchAreaController=h,cc._RF.pop()},{"../Data/IronSource":"IronSource","../Data/constants":"constants","../Plugin/AudioManager":"AudioManager","./GameController":"GameController","./GamePlay":"GamePlay"}],Ultils:[function(t,e,o){"use strict";cc._RF.push(e,"03f2ceupvBEfa9putmH215T","Ultils"),Object.defineProperty(o,"__esModule",{value:!0}),o.Ultils=void 0;var n=cc._decorator,a=(n.ccclass,n.property,{}),i=function(){function t(){}return t.TouchArea=a,t}();o.Ultils=i,cc._RF.pop()},{}],constants:[function(t,e,o){"use strict";cc._RF.push(e,"eaccb/69FZDu6rC4YmR+uAW","constants"),Object.defineProperty(o,"__esModule",{value:!0}),o.Constants=void 0;var n,a,i,s=cc._decorator;s.ccclass,s.property,function(t){t.touchStart="touchstart",t.touchMove="touchmove",t.touchEnd="touchend",t.touchCancel="touchcancel"}(n||(n={})),function(t){t.Ally="ally",t.Enemy="enemy"}(a||(a={})),function(t){t.Attack="Attack",t.Die="Die",t.Hurt="Hurt",t.Run="Run"}(i||(i={}));var r,c={SoundState:!0,State:1,isEndGame:!1,isPlayBgSound:!1},l={calculatedY:0,calculatedX:0,currentDevice:"",isHor:!1,isVer:!1,speedCalculated:0};(function(t){t.bgSound="bgSound",t.ArmyLv1HitSound="ArmyLv1HitSound",t.ArmyLv2HitSound="ArmyLv2HitSound",t.ArmyLv3HitSound="ArmyLv3HitSound",t.clickSound="clickSound",t.buySound="buySound",t.coinSound="coinSound",t.failSound="failSound",t.winSound="winSound",t.earthQuakeSound="earthQuakeSound",t.heliSound="heliSound",t.UpgradeSound="UpgradeSound",t.Lv2_Kinife="Lv2_Kinife",t.Lv2_Gun="Lv2_Gun",t.Lv2_Tank="Lv2_Tank"})(r||(r={}));var u=function(){function t(){}return t.isRotate=!1,t.isTouch=!1,t.isCanTouch=!1,t.isToStore=!1,t.isStartGame=!1,t.isHasResult=!1,t.isGainCoin=!1,t.isPauseGame=!1,t.isWin=!1,t.isLoose=!1,t.isCollideBase=!1,t.isCanBuyArmyLv2=!1,t.isCanBuyArmyLv3=!1,t.isUpgrade=!1,t.currentCoin=0,t.increaseCoin=10,t.enemyDie=0,t.food=3,t.EnemyBaseHeal=1,t.AllyBaseHeal=1,t.scaleBoss=.5,t.scaleArmy=0,t.enemyArmies=[],t.allyArmies=[],t.Event=n,t.SoundTrack=r,t.ironSource=c,t.Responsive=l,t.ArmySkin=a,t.ArmyAnim=i,t}();o.Constants=u,cc._RF.pop()},{}]},{},["BaseController","BossController","CoinController","GameController","GamePlay","LoadFoodController","SpawnController","TouchAreaController","IronSource","Ultils","constants","Army","CTA","AudioManager","Responsive"]);