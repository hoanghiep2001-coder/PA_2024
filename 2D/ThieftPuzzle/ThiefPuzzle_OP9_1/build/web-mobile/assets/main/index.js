window.__require=function t(i,o,e){function n(c,a){if(!o[c]){if(!i[c]){var r=c.split("/");if(r=r[r.length-1],!i[r]){var h="function"==typeof __require&&__require;if(!a&&h)return h(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+c+"'")}c=r}var l=o[c]={exports:{}};i[c][0].call(l.exports,function(t){return n(i[c][1][t]||t)},l,l.exports,t,i,o,e)}return o[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<e.length;c++)n(e[c]);return n}({Hand:[function(t,i){"use strict";cc._RF.push(i,"3697cH7HvJKfaxYpx5bnrPE","Hand"),cc.Class({extends:cc.Component,properties:{Main:t("Main"),Res:t("Res")},onLoad:function(){},onBeginContact:function(t,i,o){var e=this;"Round"==o.node._name&&(this.Main.FlagStatus="Round"),"man1"==o.node._name&&(this.Main.FlagStatus="God",this.Res.FlagMove=!1,this.Res.FlagStatus="Lose",setTimeout(function(){e.Res.Flag_Done=!0},500))}}),cc._RF.pop()},{Main:"Main",Res:"Res"}],Main:[function(t,i){"use strict";var o;cc._RF.push(i,"5011fRH0vRIq6Bm4n9IwqHD","Main"),cc.Class(((o={extends:cc.Component,properties:{Res:t("Res"),Hand:cc.Node,posFall:cc.Node,RestrictedArea:cc.Node,ViewEnd:cc.Node,Enable_Click:cc.Node,Body_01:cc.Node,Body_02:cc.Node,Round:cc.Node,AreaWin:cc.Node,HandFake:cc.Node,Graphics:cc.Node,GraphicBackup:cc.Node,PosStart:cc.Node,HandGuild:cc.Node,GuildGmame:cc.Node,LuckyMoney:cc.Node,PointCollider:cc.Node,hint:cc.Node,Rope_Audio:cc.AudioClip,Fight_Audio:cc.AudioClip,Aaaa_Audio:cc.AudioClip,Hahah_Audio:cc.AudioClip},onLoad:function(){var t=cc.director.getPhysicsManager();t.enabled=!0,t.gravity=cc.v2(0,0),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),cc.winSize.width,cc.winSize.height,this.ColorWinStatus=(new cc.Color).fromHEX("#8DFAFF"),this.ColorWaitStatus=(new cc.Color).fromHEX("#000000"),this.ColorLoseStatus=(new cc.Color).fromHEX("#ff0000"),this.ColorLine=this.ColorWaitStatus,this.lineWidth,this.FlagAudio_Rope=null,this.Backup=null,this.isCollider=!1,this.FlagAdd=!1,this.FlagbackupStatus=null,this.countCollider=0,this.FlagStatus=!1,this.FlagMove=!1,this.Fllow_Current=1,this.FlagAudio_Rope=null,this.ArrPoint=[],this.ArrPointEdit=[],this.flagPhysic=!0,this.lerpFactor=.05,this.flagDoneOne=!1,this.threshold=1e3,this.BackupPosMove=null},start:function(){},AddCollider:function(t){t.getComponent(cc.Collider)&&(collider.on(Contact2DType.BEGIN_CONTACT,this.onBeginContact,this),collider.on(Contact2DType.END_CONTACT,this.onEndContact,this),collider.on(Contact2DType.PRE_SOLVE,this.onPreSolve,this),collider.on(Contact2DType.POST_SOLVE,this.onPostSolve,this))},calculateDistanceBetweenPoints:function(t,i){var o=i.x-t.x,e=i.y-t.y,n=Math.sqrt(o*o+e*e);return 8*Math.round(n)},onTouchStart:function(){this.Res.StartAudio()},onTouchMove:function(t){var i=this;if(this.Res.FlagMove&&!this.Res.Flag_Done){this.Res.StartAudio(),this.HandGuild.active=!1,this.hint.active=!1;var o=t.getLocation().subSelf(cc.v2(cc.winSize.width/2,cc.winSize.height/2));null==this.FlagAudio_Rope&&(this.Res.ironSourceSoundState&&(this.FlagAudio_Rope=cc.audioEngine.play(this.Rope_Audio,!1,1)),setTimeout(function(){i.FlagAudio_Rope=null},1e3)),this.BackupPosMove=this.Hand.position,this.Hand.position=this.lerp(this.Hand.position,o,this.lerpFactor),this.HandFake.active=!1,this.isCheckDone(),this.isOverlappingNodeB(),this.DragMove(),this.checkApproximatelyCollinear(),this.checkPop(),this.checkFalse()}},lerp:function(t,i,o){return t.mul(1-o).add(i.mul(o))},isOverlappingNodeB:function(){var t=this;this.FlagMove||this.RestrictedArea._children.forEach(function(i){var o=t.Hand.getBoundingBoxToWorld(),e=i.getBoundingBoxToWorld();o.intersects(e)&&t.adjustPosition(t.Hand,i)})},isCheckDone:function(){var t=this.Hand.getBoundingBoxToWorld();this.AreaWin.getBoundingBoxToWorld().intersects(t)},adjustPosition:function(t,i){var o=cc.v2(i.x-t.x,i.y-t.y).normalize(),e=t.width/20+i.width/20,n=cc.v2(t.x-o.x*e,t.y-o.y*e);this.Hand.setPosition(n)},onTouchEnd:function(){if("Round"==this.FlagStatus){if(0==this.ArrPoint.length)return void(this.ViewEnd.active=!0);this.GuildGmame.active=!1,this.FlagMove=!0,this.RestrictedArea.active=!1,this.Round.active=!1,this.PosStart.getPosition(),this.LuckyMoney.setPosition(this.Hand.getPosition()),this.Move(this.Hand,!0),this.Move(this.LuckyMoney,!1),this.Enable_Click=!0}else if("God"==this.FlagStatus)return},onMoveComplete:function(){this.flagDoneOne||(this.flagDoneOne=!0,this.Res.FlagStatus="Win",this.DoneFn())},Move:function(t,i){for(var o=this,e=[],n=function(t){var n=o.ArrPointEdit[t],s=o.ArrPointEdit[t-1],c=n.sub(s).mag()/500,a=cc.moveTo(c,s),r=cc.callFunc(function(){t!=o.ArrPointEdit.length-1&&i&&o.ArrPoint.pop()}),h=cc.spawn(a,r);e.push(h)},s=this.ArrPointEdit.length-1;s>0;s--)n(s);var c=cc.callFunc(this.onMoveComplete,this),a=cc.sequence(e,c),r=cc.sequence(a,c);t.runAction(r)},DragMove:function(){var t=this.Graphics.getComponent(cc.Graphics);t.clear();var i=this.PosStart.getPosition(),o=this.Hand.getPosition(),e=[];this.ArrPoint.length>0&&this.ArrPoint.forEach(function(t){e.push(t.position)}),e.unshift(i),e.push(o),this.ArrPointEdit=e;for(var n=0;n<e.length-1;n++)t.strokeColor=this.ColorLine,t.moveTo(e[n].x,e[n].y),t.lineTo(e[n+1].x,e[n+1].y),t.stroke();var s=e.length;this.DirectionVector(e[s-2],e[s-1])},DirectionVector:function(t,i){var o=t.x,e=t.y,n=i.x,s=i.y,c=this.calculateAngle(o,e,n,s);this.Hand.angle=c+30},checkApproximatelyCollinear:function(){var t,i,o,e=this;this.PointCollider._children.forEach(function(n){if(!(e.ArrPoint.length>0&&n._id==e.ArrPoint[e.ArrPoint.length-1]._id)){var s=e.ArrPointEdit.length,c=e.ArrPointEdit[s-1],a=e.ArrPointEdit[s-2],r=e.ArrPointEdit[s-2],h=e.ArrPointEdit[s-1],l=Math.abs((n.y-c.y)*(a.x-c.x)-(n.x-c.x)*(a.y-c.y));t=l<e.threshold;var d=e.calculateDistanceBetweenPoints(c,a),u=e.calculateDistanceBetweenPoints(c,n),g=e.calculateDistanceBetweenPoints(r,h),p=e.calculateDistanceBetweenPoints(r,n);i=d>u,o=g>p,0==e.ArrPoint.length&&(e.Backup=null),null!=e.Backup&&e.Backup._id==n._id||i&&o&&t&&!e.isCollider&&(0==e.ArrPoint.length?(e.ArrPoint.push(n),e.Backup=n,e.FlagAdd=!0,e.FlagbackupStatus=!0,e.countCollider=0):n._id!=e.Backup._id&&(e.FlagAdd=!0,e.countCollider=0,e.ArrPoint.push(n),e.Backup=n))}})},checkPop:function(){if(!this.FlagMove){var t=this.ArrPointEdit.length;if(!(t<=2)){var i,o=this.GraphicBackup.getComponent(cc.Graphics),e=[];o.clear();var n=this.ArrPointEdit[t-3],s=this.ArrPointEdit[t-1];e.unshift(n),e.push(s);for(var c=0;c<e.length-1;c++)o.moveTo(e[c].x,e[c].y),o.lineTo(e[c+1].x,e[c+1].y),o.stroke();var a,r=n,h=s,l=this.ArrPoint[this.ArrPoint.length-1];this.ArrPoint.length>0&&l._id==this.ArrPoint[this.ArrPoint.length-1]._id&&(i=Math.abs((l.y-r.y)*(h.x-r.x)-(l.x-r.x)*(h.y-r.y))<this.threshold,this.calculateDistanceBetweenPoints(r,h)>this.calculateDistanceBetweenPoints(r,l)&&(a=!!i,this.FlagbackupStatus!=a&&(this.FlagbackupStatus=a,a||(++this.countCollider,this.countCollider>=2&&(this.isCollider=!1,this.countCollider=1,this.ArrPoint.pop())))))}}},checkFalse:function(){var t=this;if(this.ArrPointEdit.length>2){var i,o;this.posFall._children.forEach(function(e){var n=t.ArrPointEdit.length,s=t.ArrPointEdit[n-1],c=t.ArrPointEdit[n-2],a=t.ArrPointEdit[n-2],r=t.ArrPointEdit[n-1],h=Math.abs((e.y-s.y)*(c.x-s.x)-(e.x-s.x)*(c.y-s.y));i=h<t.threshold;var l=t.calculateDistanceBetweenPoints(s,c),d=t.calculateDistanceBetweenPoints(s,e),u=t.calculateDistanceBetweenPoints(a,r),g=t.calculateDistanceBetweenPoints(a,e);o=u>g,l>d&&o&&i&&(t.FlagStatus="God",t.Res.FlagMove=!1,t.Res.FlagStatus="Lose",setTimeout(function(){t.Res.Flag_Done=!0},500))})}else{var e,n=this.PosStart.getPosition(),s=this.Hand.getPosition(),c=n,a=s;this.posFall._children.forEach(function(i){var o=Math.abs((i.y-c.y)*(a.x-c.x)-(i.x-c.x)*(a.y-c.y));e=o<t.threshold,t.calculateDistanceBetweenPoints(c,a)>t.calculateDistanceBetweenPoints(c,i)&&e&&(t.FlagStatus="God",t.Res.FlagMove=!1,t.Res.FlagStatus="Lose",setTimeout(function(){t.Res.Flag_Done=!0},500))})}}}).calculateDistanceBetweenPoints=function(t,i){var o=i.x-t.x,e=i.y-t.y,n=Math.sqrt(o*o+e*e);return Math.round(n)},o.DirectionVectorPhysics=function(t,i){var o=t.x,e=t.y,n=i.x,s=i.y;return this.calculateAngle(o,e,n,s)},o.calculateAngle=function(t,i,o,e){var n=e-i,s=o-t,c=Math.atan2(n,s)*(180/Math.PI);return(c+360)%360},o.DoneFn=function(){var t=this;this.Graphics.active=!1,this.Res.Flag_Done=!0,"Win"==this.Res.FlagStatus?(this.Body_02._children[0].active=!0,this.Res.ironSourceSoundState&&this.Res.FlagAudiohaha&&(this.Res.FlagAudiohaha=!1,cc.audioEngine.play(this.Hahah_Audio,!1,1))):(this.Res.ironSourceSoundState&&this.Res.FlagAudiohaha&&(this.Res.FlagAudiohaha=!1,cc.audioEngine.play(this.Aaaa_Audio,!1,1),cc.audioEngine.play(this.Fight_Audio,!1,1)),this.Body_02._children[1].active=!0),this.Body_01.active=!1,this.Body_02.active=!0,this.Hand.active=!1,this.Round.active=!1,this.GuildGmame.active=!1,this.LuckyMoney.active=!1,setTimeout(function(){t.ViewEnd.active=!0},1500)},o.update=function(){this.FlagMove||("Round"==this.FlagStatus?console.log("hehe"):0==this.FlagStatus?this.ColorLine=this.ColorWaitStatus:"God"==this.FlagStatus&&(this.ColorLine=this.ColorLoseStatus,this.DragMove())),this.FlagMove&&this.DragMove(),this.Res.Flag_Done&&(this.flagDoneOne||(this.flagDoneOne=!0,this.DoneFn()));var t=cc.winSize.width,i=cc.winSize.height;this.threshold=t<i?200:400},o)),cc._RF.pop()},{Res:"Res"}],Res:[function(t,i){"use strict";cc._RF.push(i,"e90f1APAVhH8bcUjVWiuutU","Res"),cc.Class({extends:cc.Component,properties:{ViewNgang:cc.Node,ViewDoc:cc.Node,viewDocGirlRigidbody:cc.Node,viewNgangGirlRigidbody:cc.Node,ClickStoreOverlay_1:cc.Node,ClickStoreOverlay_2:cc.Node,ClickStoreNode:cc.Node,ToStore:t("ToStore"),girl_doc:cc.Node,round_doc:cc.Node,hand_doc:cc.Node,AudioBg:cc.AudioClip,HORIZONTAL:"horizontal",VERTICAL:"vertical",device:"",isRotate:!1},onLoad:function(){this.ClickStoreOverlay_1.on(cc.Node.EventType.TOUCH_START,this.ToStoreFn,this),this.ClickStoreOverlay_2.on(cc.Node.EventType.TOUCH_START,this.ToStoreFn,this),this.ClickStoreNode.on(cc.Node.EventType.TOUCH_START,this.ToStoreFn,this),this.FlagAudio=!0,this.ironSourceState=1,this.ironSourceSoundState=!0,this.isEndGame=!1,this.Flag_Done=!1,this.FlagAudiohaha=!0,this.FlagMove=!0,this.FlagStatus=!1,this.StartAudio()},ToStoreFn:function(){this.ToStore.installHandle()},StartAudio:function(){this.FlagAudio&&this.ironSourceSoundState&&(this.FlagAudio=!1,cc.audioEngine.play(this.AudioBg,!0,.8))},update:function(){if(cc.winSize.width<cc.winSize.height){if(this.VERTICAL===this.device)return;this.device=this.VERTICAL,this.ViewDoc.active=!0,this.ViewNgang.active=!1,cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5&&(this.ViewDoc.scale=.8,this.girl_doc.y=-192,this.round_doc.x=-70,this.hand_doc.x=129,this.hand_doc.y=85)}else{if(this.HORIZONTAL===this.device)return;this.device=this.HORIZONTAL,this.ViewDoc.active=!1,this.ViewNgang.active=!0}this.ironSourceState=parseInt(localStorage.getItem("cocosSoundState"),10),this.ironSourceState&&(1!==this.ironSourceState||this.ironSourceSoundState||this.isEndGame||(this.ironSourceSoundState=!0,cc.audioEngine.play(this.AudioBg,!0,1)),2===this.ironSourceState&&this.ironSourceSoundState&&(this.ironSourceSoundState=!1,cc.audioEngine.stopAll())),this.Flag_Done&&(this.ClickStoreNode.active=!0)}}),cc._RF.pop()},{ToStore:"ToStore"}],ToStore:[function(t,i){"use strict";cc._RF.push(i,"078a3wCCVdJ5qP81bvcA87q","ToStore"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){window.gameReady&&window.gameReady(),console.log("start")},onFinish:function(){window.gameEnd&&window.gameEnd()},installHandle:function(){if(console.log("store"),cc.audioEngine.stopAll(),this.onFinish(),"undefined"==typeof playableSDK)if("undefined"==typeof ExitApi){if("undefined"==typeof dapi)return"undefined"!=typeof mraid?cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.ANDROID?void mraid.open("https://play.google.com/store/apps/details?id=com.tvc.thiefpuzzle"):cc.sys.os==cc.sys.OS_IOS||cc.sys.os==cc.sys.IPHONE||cc.sys.os==cc.sys.IPAD?void mraid.open("https://itunes.apple.com/us/app/id1589022394?mt=8"):void mraid.open("https://play.google.com/store/apps/details?id=com.tvc.thiefpuzzle"):void(window.install&&window.install());dapi.openStoreUrl()}else ExitApi.exit();else window.playableSDK.openAppStore()}}),cc._RF.pop()},{}]},{},["Hand","Main","Res","ToStore"]);