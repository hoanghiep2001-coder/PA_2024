{"version":3,"sources":["assets\\Script\\Controller\\GamePlay.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Constants } from \"../Data/constants\";\r\nimport AudioManager from \"../Plugin/AudioManager\";\r\nimport { GameController } from \"./GameController\";\r\nimport GraphicsController from \"./GraphicsController\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GamePlay extends cc.Component {\r\n\r\n  @property(AudioManager)\r\n  AudioManager: AudioManager = null;\r\n  @property(GameController)\r\n  GameController: GameController = null;\r\n  @property(GraphicsController)\r\n  GraphicsController: GraphicsController = null;\r\n\r\n\r\n  // Node\r\n  @property(cc.Node)\r\n  Hand: cc.Node = null;\r\n  @property(cc.Node)\r\n  CTA: cc.Node = null;\r\n  @property(cc.Node)\r\n  CTA_Button: cc.Node = null;\r\n\r\n\r\n  // UI\r\n  @property(cc.Node)\r\n  background: cc.Node = null;\r\n\r\n  @property(cc.Node)\r\n  thieftDefault: cc.Node = null;\r\n  @property(cc.Node)\r\n  guardDefault: cc.Node = null;\r\n  @property(cc.Node)\r\n  guardDefault_Flag: cc.Node = null;\r\n  @property(cc.Node)\r\n  thieftCTA: cc.Node = null;\r\n  @property(cc.Node)\r\n  guardCTA: cc.Node = null;\r\n\r\n  @property(cc.Node)\r\n  tree: cc.Node = null;\r\n  @property(cc.Node)\r\n  glass: cc.Node = null;\r\n  @property(cc.Node)\r\n  cage: cc.Node = null;\r\n\r\n\r\n  protected onLoad(): void {\r\n    this.initPhysics();\r\n  }\r\n\r\n\r\n  protected start(): void {\r\n\r\n  }\r\n\r\n\r\n  public loseGame(): void {\r\n    Constants.isLoseGame = true;\r\n    this.AudioManager.stopSound(Constants.SoundTrack.drawSound);\r\n    this.AudioManager.playSound(Constants.SoundTrack.naniSound);\r\n    \r\n    // fill color for graphics to red\r\n    this.GraphicsController.getComponent(cc.Graphics).fillColor = cc.Color.RED;\r\n    this.GraphicsController.getComponent(cc.Graphics).strokeColor = cc.Color.RED;\r\n    this.GraphicsController.graphicsNodes.forEach(graphic => {\r\n      graphic.clear()\r\n    });\r\n\r\n    if(Constants.isTouchPoint1) {\r\n      this.GraphicsController.graphicsNodes[1].fillColor = cc.Color.RED;\r\n      this.GraphicsController.graphicsNodes[1].strokeColor = cc.Color.RED;\r\n      this.GraphicsController.graphicsNodes[1].moveTo(Constants.pointA_Pos.x, Constants.pointA_Pos.y);\r\n      this.GraphicsController.graphicsNodes[1].lineTo(Constants.point1Pos.x, Constants.point1Pos.y);\r\n      this.GraphicsController.graphicsNodes[1].stroke();\r\n  \r\n      this.GraphicsController.graphicsNodes[2].fillColor = cc.Color.RED;\r\n      this.GraphicsController.graphicsNodes[2].strokeColor = cc.Color.RED;\r\n      this.GraphicsController.graphicsNodes[2].moveTo(Constants.point1Pos.x, Constants.point1Pos.y);\r\n      this.GraphicsController.graphicsNodes[2].lineTo(Constants.point5Pos.x, Constants.point5Pos.y);\r\n      this.GraphicsController.graphicsNodes[2].stroke();\r\n\r\n      this.GraphicsController.graphicsNodes[6].fillColor = cc.Color.RED;\r\n      this.GraphicsController.graphicsNodes[6].strokeColor = cc.Color.RED;\r\n      this.GraphicsController.graphicsNodes[6].moveTo(Constants.point5Pos.x, Constants.point5Pos.y);\r\n      this.GraphicsController.graphicsNodes[6].lineTo(Constants.point6Pos.x, Constants.point6Pos.y);\r\n      this.GraphicsController.graphicsNodes[6].stroke();\r\n    }\r\n\r\n    // show flag\r\n    this.guardDefault_Flag.active = true;\r\n\r\n    this.scheduleOnce(() => {\r\n      Constants.ironSource.isEndGame = true;\r\n      this.AudioManager.playSound(Constants.SoundTrack.stunSound);\r\n\r\n      // active CTA\r\n      this.guardDefault.active = false;\r\n      this.thieftDefault.active = false;\r\n      this.guardCTA.active = true;\r\n      this.thieftCTA.active = true;\r\n\r\n      // destroy hand\r\n      this.Hand.active = false;\r\n      this.Hand.destroy();\r\n\r\n\r\n      this.GraphicsController.graphicsNodes.forEach(graphic => graphic.clear());\r\n      this.GraphicsController.getComponent(cc.Graphics).clear();\r\n      \r\n    }, 1.5);\r\n\r\n    this.scheduleOnce(()  => {\r\n      this.CTA.getComponent(cc.Animation).play(\"CTA_Anim\");\r\n\r\n      this.CTA_Button.on(cc.Node.EventType.TOUCH_START, this.GameController.installHandle, this);\r\n    }, 2.5)\r\n  }\r\n  \r\n\r\n  private initPhysics(): void {\r\n    cc.director.getPhysicsManager().enabled = true;\r\n    let collisionManager = cc.director.getCollisionManager();\r\n    collisionManager.enabled = true;\r\n    collisionManager.enabledDebugDraw = true;\r\n    collisionManager.enabledDrawBoundingBox = true;\r\n  }\r\n\r\n  protected update(dt: number): void {\r\n      // ironsource\r\n     \r\n  }\r\n\r\n}\r\n"]}