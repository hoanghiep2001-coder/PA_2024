{"version":3,"sources":["assets\\Script\\Controller\\TubeController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+CAA8C;AAC9C,mDAA8C;AAC9C,uCAAkC;AAE5B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA4C,kCAAY;IAAxD;QAAA,qEAyDC;QAtDG,cAAQ,GAAa,IAAI,CAAA;QAGzB,iBAAW,GAAiB,EAAE,CAAC;QAE/B,eAAS,GAAc,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;QAE7C,eAAS,GAAa,EAAE,CAAC,KAAK,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;QAClD,gBAAU,GAAa,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;QAClD,iBAAW,GAAa,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;QACpD,iBAAW,GAAa,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;;IA4C9D,CAAC;IAzCa,8BAAK,GAAf;QACI,IAAI,CAAC,cAAc,EAAE,CAAC;IAC1B,CAAC;IAGO,uCAAc,GAAtB;QACI,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,WAAW,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,CAAA;QAEnG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,WAAW,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;QAEvG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,WAAW,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;QAEzG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,WAAW,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,CAAC,CAAA;IAC7G,CAAC;IAGA,mDAA0B,GAA1B,UAA2B,KAAgB;QACxC,uCAAuC;QACvC,IAAM,SAAS,GAAG,KAAK,CAAC,MAAM,CAAC,UAAA,KAAK,IAAI,OAAA,KAAK,KAAK,IAAI,EAAd,CAAc,CAAC,CAAC,MAAM,CAAC;QAE/D,+CAA+C;QAC/C,OAAO,SAAS,GAAG,CAAC,CAAC;IACzB,CAAC;IAGO,mCAAU,GAAlB;gCACa,KAAK;YACV,IAAM,MAAM,GAAG,OAAK,WAAW,CAAC,KAAK,CAAC,CAAC;YACvC,IAAM,cAAc,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;YAErD,IAAG,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,UAAA,KAAK,IAAI,OAAA,KAAK,CAAC,KAAK,EAAE,KAAK,cAAc,EAAhC,CAAgC,CAAC;gBAAE,OAAK,SAAS,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;YAErG,IAAG,OAAK,0BAA0B,CAAC,OAAK,SAAS,CAAC;gBAAE,OAAK,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;;;QANpF,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,KAAK,EAAE;oBAAnD,KAAK;SAOb;IACL,CAAC;IAGS,+BAAM,GAAhB,UAAiB,EAAU;QACvB,CAAC,qBAAS,CAAC,SAAS,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;IAC9C,CAAC;IApDD;QADC,QAAQ,CAAC,kBAAQ,CAAC;oDACM;IAGzB;QADC,QAAQ,CAAC,CAAC,oBAAU,CAAC,CAAC;uDACQ;IANd,cAAc;QADlC,OAAO;OACa,cAAc,CAyDlC;IAAD,qBAAC;CAzDD,AAyDC,CAzD2C,EAAE,CAAC,SAAS,GAyDvD;kBAzDoB,cAAc","file":"","sourceRoot":"/","sourcesContent":["import { Constants } from \"../Data/constants\";\r\nimport BottleItem from \"../Ultils/BottleItem\";\r\nimport GamePlay from \"./GamePlay\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class TubeController extends cc.Component {\r\n\r\n    @property(GamePlay)\r\n    GamePlay: GamePlay = null\r\n    \r\n    @property([BottleItem])\r\n    BottleItems: BottleItem[] = [];\r\n\r\n    StatusArr: boolean[] = [false, false, false, false];\r\n\r\n    public blueColor: cc.Color = cc.color(28, 101, 170, 255);\r\n    public brownColor: cc.Color = cc.color(161, 71, 71, 255);\r\n    public orangeColor: cc.Color = cc.color(241, 116, 58, 255);\r\n    public transparent: cc.Color = cc.color(255, 255, 255, 0);\r\n\r\n\r\n    protected start(): void {\r\n        this.initTubeColors();\r\n    }\r\n\r\n\r\n    private initTubeColors(): void {\r\n        this.BottleItems[0].waterColors = [this.blueColor, this.blueColor, this.brownColor, this.blueColor]\r\n\r\n        this.BottleItems[1].waterColors = [this.orangeColor, this.orangeColor, this.blueColor, this.brownColor]\r\n\r\n        this.BottleItems[2].waterColors = [this.transparent, this.transparent, this.orangeColor, this.brownColor]\r\n\r\n        this.BottleItems[3].waterColors = [this.transparent, this.transparent, this.brownColor, this.orangeColor]\r\n    }\r\n\r\n\r\n     hasMoreThanThreeTrueValues(array: boolean[]) {\r\n        // Đếm số lượng phần tử true trong mảng\r\n        const trueCount = array.filter(value => value === true).length;\r\n    \r\n        // Kiểm tra nếu số lượng phần tử true lớn hơn 3\r\n        return trueCount > 3;\r\n    }\r\n\r\n\r\n    private isDoneGame(): void {\r\n        for (let index = 0; index < this.BottleItems.length; index++) {\r\n            const bottle = this.BottleItems[index];\r\n            const colorToCompare = bottle.waterColors[0].toCSS();\r\n\r\n            if(bottle.waterColors.every(color => color.toCSS() === colorToCompare)) this.StatusArr[index] = true;\r\n\r\n            if(this.hasMoreThanThreeTrueValues(this.StatusArr)) this.GamePlay.showCTA(true);\r\n        }\r\n    }\r\n\r\n\r\n    protected update(dt: number): void {\r\n        !Constants.isShowCTA && this.isDoneGame();\r\n    }\r\n\r\n}\r\n"]}