{"version":3,"sources":["file:///D:/PA_2024/3D/CamoSniper/CamoSniper_Op2/assets/Script/Game/TouchArea.ts"],"names":["_decorator","Component","Node","Vec3","UIController","GameController","AudioManager","GamePlay","Constants","ccclass","property","TouchArea","start","HideMask","on","EventType","TOUCH_START","handleTouchStart","TOUCH_MOVE","handleTouchMove","TOUCH_END","handleTouchEnd","TOUCH_CANCEL","e","isCanClick","isToStore","installHandle","countShoot","handleIronSourcePlaySound","Aim","active","Hint_Hand","Gun","Hint_icon","EnemyStatus","Text_1","handleZoomCamera","activeAimTargets","isTouch","pos","convertToNodeSpace","getUILocation","y","background","setPosition","x","screenPos","shoot","checkHitEnemy"],"mappings":"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","sourcesContent":["import { _decorator, Component, EventTouch, Node, tween, Vec2, Vec3 } from 'cc';\nimport { UIController } from './UIController';\nimport { GameController } from './GameController';\nimport { AudioManager } from './AudioManager';\nimport { GamePlay } from './GamePlay';\nimport { Constants } from '../Data/constants';\nconst { ccclass, property } = _decorator;\n\n@ccclass('TouchArea')\nexport class TouchArea extends Component {\n\n    @property(UIController)\n    UIController: UIController = null;\n    @property(GameController)\n    GameController: GameController = null;\n    @property(AudioManager)\n    AudioManager: AudioManager = null;\n    @property(GamePlay)\n    GamePlay: GamePlay = null;\n\n\n    // static\n    isTouch: boolean = false;\n\n\n    protected start(): void {\n        this.UIController.HideMask.on(Node.EventType.TOUCH_START, this.handleTouchStart, this);\n        this.UIController.HideMask.on(Node.EventType.TOUCH_MOVE, this.handleTouchMove, this);\n        this.UIController.HideMask.on(Node.EventType.TOUCH_END, this.handleTouchEnd, this);\n        this.UIController.HideMask.on(Node.EventType.TOUCH_CANCEL, this.handleTouchEnd, this);\n    }\n\n\n    private handleTouchStart(e: EventTouch): void {\n        if (!Constants.isCanClick) return;\n        Constants.isToStore && this.GameController.installHandle();\n        Constants.countShoot >= 3 && this.GameController.installHandle();\n        this.GamePlay.handleIronSourcePlaySound();\n\n        this.UIController.Aim.active = true;\n        this.UIController.Hint_Hand.active = false;\n        this.UIController.Gun.active = false;\n        this.UIController.Hint_icon.active = false;\n        this.UIController.EnemyStatus.active = true;\n        this.UIController.Text_1.active = false;\n        this.GamePlay.handleZoomCamera(true);\n        this.GamePlay.activeAimTargets();\n        this.isTouch = true;\n    }\n\n\n    private handleTouchMove(e: EventTouch): void {\n        if (!Constants.isCanClick) return;\n        let pos = this.convertToNodeSpace(e.getUILocation());\n        if (pos.y > 130 || pos.y < -130) {\n            return;\n        }\n\n        this.UIController.background.setPosition(pos.x, pos.y, 0);\n    }\n\n\n    private convertToNodeSpace(screenPos: Vec2): Vec3 {\n        let pos = new Vec3(-(screenPos.x - 160), -(screenPos.y - 240), 0);\n        return pos;\n    }\n\n\n    private handleTouchEnd(e: EventTouch): void {\n        if (!this.isTouch) return;\n        this.isTouch = false;\n        this.GamePlay.shoot();\n        this.GamePlay.checkHitEnemy();\n    }\n\n}\n"]}