{"version":3,"sources":["file:///D:/PA_2024/3D/MuscleTyphoon/MuscleTyphoon_Op2/assets/Script/Game/GamePlay.ts"],"names":["_decorator","Component","Node","VideoPlayer","ParticleSystem2D","GameController","AudioManager","Constants","ccclass","property","GamePlay","onLoad","start","isCanClick","video","node","on","EventType","READY_TO_PLAY","initVideo","registerEvent","HideMask","TOUCH_START","handleVideo","installHandle","handleMuteSoundIronSource","ironSource","State","parseInt","localStorage","getItem","SoundState","isEndGame","stopAllSound","loop","volume"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,S,OAAAA,S;AAAuBC,MAAAA,I,OAAAA,I;AAA+GC,MAAAA,W,OAAAA,W;AAA+BC,MAAAA,gB,OAAAA,gB;;AAE5LC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;OAHH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;0BAMjBU,Q,WADZF,OAAO,CAAC,UAAD,C,UAGHC,QAAQ;AAAA;AAAA,2C,UAERA,QAAQ;AAAA;AAAA,uC,UAIRA,QAAQ,CAACN,WAAD,C,UAERM,QAAQ,CAACP,IAAD,C,UAERO,QAAQ,CAACL,gBAAD,C,oCAbb,MACaM,QADb,SAC8BT,SAD9B,CACwC;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAgB1BU,QAAAA,MAAM,GAAS,CAExB;;AAGSC,QAAAA,KAAK,GAAS;AACpB;AAAA;AAAA,sCAAUC,UAAV,GAAuB,IAAvB,CADoB,CAEpB;;AACA,eAAKC,KAAL,CAAWC,IAAX,CAAgBC,EAAhB,CAAmBb,WAAW,CAACc,SAAZ,CAAsBC,aAAzC,EAAwD,KAAKC,SAA7D,EAAwE,IAAxE;AACA,eAAKC,aAAL;AACH;;AAGOA,QAAAA,aAAa,GAAS;AAC1B,eAAKC,QAAL,CAAcL,EAAd,CAAiBd,IAAI,CAACe,SAAL,CAAeK,WAAhC,EAA6C,KAAKC,WAAlD,EAA+D,IAA/D;AACH;;AAGOA,QAAAA,WAAW,GAAS;AACxB,eAAKlB,cAAL,CAAoBmB,aAApB;AACH;;AAGOC,QAAAA,yBAAyB,GAAS;AACtC;AAAA;AAAA,sCAAUC,UAAV,CAAqBC,KAArB,GAA6BC,QAAQ,CAACC,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAD,EAA0C,EAA1C,CAArC;;AAEA,cAAI;AAAA;AAAA,sCAAUJ,UAAV,CAAqBC,KAAzB,EAAgC;AAC5B,gBAAI;AAAA;AAAA,wCAAUD,UAAV,CAAqBC,KAArB,KAA+B,CAA/B,IAAoC,CAAC;AAAA;AAAA,wCAAUD,UAAV,CAAqBK,UAA1D,IAAwE,CAAC;AAAA;AAAA,wCAAUL,UAAV,CAAqBM,SAAlG,EAA6G;AACzG;AAAA;AAAA,0CAAUN,UAAV,CAAqBK,UAArB,GAAkC,IAAlC;AACH;;AAED,gBAAI;AAAA;AAAA,wCAAUL,UAAV,CAAqBC,KAArB,KAA+B,CAA/B,IAAoC;AAAA;AAAA,wCAAUD,UAAV,CAAqBK,UAA7D,EAAyE;AACrE;AAAA;AAAA,0CAAUL,UAAV,CAAqBK,UAArB,GAAkC,KAAlC;AACA,mBAAKzB,YAAL,CAAkB2B,YAAlB;AACH;AACJ;AACJ;;AAGOd,QAAAA,SAAS,CAACL,KAAD,EAAqB;AAClCA,UAAAA,KAAK,CAACoB,IAAN,GAAa,IAAb;AACApB,UAAAA,KAAK,CAACqB,MAAN,GAAe,CAAf;AACH;;AA1DmC,O;;;;;iBAGH,I;;;;;;;iBAEJ,I;;;;;;;iBAIR,I;;;;;;;iBAEJ,I;;;;;;;iBAEgB,I","sourcesContent":["import { _decorator, Animation, Component, EventTouch, Node, PhysicsSystem, SkeletalAnimation, Vec2, Vec3, ParticleSystem, log, sp, view, UITransform, Label, Sprite, VideoPlayer, director, Button, ParticleSystem2D } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { GameController } from './GameController';\nimport { AudioManager } from './AudioManager';\nimport { Constants } from '../Data/constants';\n\n@ccclass('GamePlay')\nexport class GamePlay extends Component {\n    // Component\n    @property(GameController)\n    GameController: GameController = null;\n    @property(AudioManager)\n    AudioManager: AudioManager = null;\n\n\n    @property(VideoPlayer)\n    video: VideoPlayer = null;\n    @property(Node)\n    HideMask: Node = null;\n    @property(ParticleSystem2D)\n    effect_blink: ParticleSystem2D = null;\n\n\n    protected onLoad(): void {\n\n    }\n\n\n    protected start(): void {\n        Constants.isCanClick = true;\n        // this.AudioManager.playSound(Constants.SoundTrack.bgSound);\n        this.video.node.on(VideoPlayer.EventType.READY_TO_PLAY, this.initVideo, this);\n        this.registerEvent();\n    }\n\n\n    private registerEvent(): void {\n        this.HideMask.on(Node.EventType.TOUCH_START, this.handleVideo, this);\n    }\n\n\n    private handleVideo(): void {\n        this.GameController.installHandle();\n    }\n\n\n    private handleMuteSoundIronSource(): void {\n        Constants.ironSource.State = parseInt(localStorage.getItem(\"cocosSoundState\"), 10)\n\n        if (Constants.ironSource.State) {\n            if (Constants.ironSource.State === 1 && !Constants.ironSource.SoundState && !Constants.ironSource.isEndGame) {\n                Constants.ironSource.SoundState = true;\n            }\n\n            if (Constants.ironSource.State === 2 && Constants.ironSource.SoundState) {\n                Constants.ironSource.SoundState = false;\n                this.AudioManager.stopAllSound();\n            }\n        }\n    }\n\n\n    private initVideo(video: VideoPlayer) {\n        video.loop = true;\n        video.volume = 0;\n    }\n}\n"]}