{"version":3,"sources":["file:///D:/PA_2024/3D/TangleUNS/TangleUNS_Op1/assets/Script/Game/Responsive.ts"],"names":["_decorator","Component","screen","Vec3","GamePlay","Constants","UIController","ccclass","property","Responsive","onLoad","start","handleRotate","windowSize","width","height","isRotate","setHorizontal","setVertical","setHorizontalForIpX","setHorizontalForTablet","HORIZONTAL_IPX","device","Layer_1","active","Layer_2","console","log","HORIZONTAL_TABLET","setIphoneX","setMobile","VERTICAL_IPX","setPosition","VERTICAL_MOBILE","update","dt"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, math, Node, Tween, tween, view, Animation, screen, log, Widget, Vec3 } from 'cc';\nimport { GamePlay } from './GamePlay';\nimport { Constants } from '../Data/constants';\nimport { UIController } from './UIController';\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('Responsive')\nexport class Responsive extends Component {\n\n    @property(GamePlay)\n    GamePlay: GamePlay = null;\n    @property(UIController)\n    UIController: UIController = null;\n\n\n    // state\n    device: string = \"\";\n    isRotate: boolean = false;\n    hint_Pos_X: number;\n    hint_Pos_Y: number;\n\n    hand: Node = null;\n\n    HORIZONTAL_IPX: string = \"horizontal_IPX\";\n    HORIZONTAL_TABLET: string = \"horizontal_Tablet\";\n    VERTICAL_IPX: string = \"vertical_IPX\";\n    VERTICAL_MOBILE: string = \"vertical_Mobile\";\n\n\n    protected onLoad(): void {\n\n    }\n\n\n    protected start(): void {\n\n    }\n\n\n    private handleRotate(): void {\n        if (screen.windowSize.width > screen.windowSize.height) {\n            Constants.isRotate = true;\n            this.setHorizontal();\n        } else {\n            Constants.isRotate = false;\n            this.setVertical();\n        }\n    }\n\n\n    private setHorizontal(): void {\n        if (screen.windowSize.height / screen.windowSize.width < 0.65) {\n            // Iphone 6 / 6 plus / 7 / 7 Plus / X\n            this.setHorizontalForIpX();\n        } else {\n            this.setHorizontalForTablet();\n        }\n    }\n\n\n    private setHorizontalForIpX(): void {\n        if (this.HORIZONTAL_IPX === this.device) {\n            return;\n        }\n        this.device = this.HORIZONTAL_IPX;\n\n        this.UIController.Layer_1.active = false;\n        this.UIController.Layer_2.active = false;\n\n        // if(cc.screen.windowSize.height / cc.screen.windowSize.width >= 0.6) {\n        //     // Applovin horizontal\n\n        //     return;\n        // }    \n\n\n        if (screen.windowSize.height / screen.windowSize.width > 0.55) {\n            // Ip 6 / 6Plus / 7 / 7 Plus\n            // this.GamePlay.video.node.scale = new Vec3(0.665, 0.665, 0.665);\n\n            console.log(1);\n        } else {\n            // IpX\n            // this.GamePlay.video.node.scale = new Vec3(0.665, 0.665, 0.665);\n            console.log(2);\n        }\n    }\n\n\n    private setHorizontalForTablet(): void {\n        if (this.HORIZONTAL_TABLET === this.device) {\n            return;\n        }\n\n        this.device = this.HORIZONTAL_TABLET;\n        this.UIController.Layer_1.active = false;\n        this.UIController.Layer_2.active = false;\n\n        console.log(3);\n\n        // horizontal google\n        // if(cc.screen.windowSize.width / cc.screen.windowSize.height <= 1.2 && cc.screen.windowSize.width / cc.screen.windowSize.height >= 1.2) {\n\n        //     return;\n        // }\n    }\n\n\n    private setVertical(): void {\n        if (screen.windowSize.width / screen.windowSize.height < 0.5) {\n            this.setIphoneX();\n        } else {\n            this.setMobile();\n        }\n    }\n\n\n    private setIphoneX(): void {\n        if (this.VERTICAL_IPX === this.device) {\n            return;\n        }\n\n        this.device = this.VERTICAL_IPX;\n        // this.UIController.Layer_1.setPosition(new Vec3(0, 420, 0));\n        // this.UIController.Layer_2.setPosition(new Vec3(0, -420, 0));\n        this.UIController.Layer_1.active = true;\n        this.UIController.Layer_2.active = true;\n        this.UIController.Layer_1.setPosition(new Vec3(0, 415, 0));\n        this.UIController.Layer_2.setPosition(new Vec3(0, -422, 0));\n        console.log(4);\n    }\n\n\n    private setMobile(): void {\n        if (this.VERTICAL_MOBILE === this.device) {\n            return;\n        }\n\n        this.device = this.VERTICAL_MOBILE;\n\n        let width = screen.windowSize.width;\n        let height = screen.windowSize.height;\n\n        if (width / height < 0.7) {\n            this.UIController.Layer_1.active = true;\n            this.UIController.Layer_2.active = true;\n\n            if (width / height >= 0.6 && width / height < 0.62) {\n                // mobile mode applovin\n                this.UIController.Layer_1.setPosition(new Vec3(0, 414, 0));\n                this.UIController.Layer_2.setPosition(new Vec3(0, -422.5, 0));\n                return;\n            }\n\n            // Iphone 6 / 6 plus / 7 / 7 Plus\n            this.UIController.Layer_1.setPosition(new Vec3(0, 424, 0));\n            this.UIController.Layer_2.setPosition(new Vec3(0, -424, 0));\n            console.log(5);\n        } else {\n            this.UIController.Layer_1.active = false;\n            this.UIController.Layer_2.active = false;\n            // Ipad\n            // this.UIController.Layer_1.setPosition(new Vec3(0, 400, 0));\n            // this.UIController.Layer_2.setPosition(new Vec3(0, -400, 0));\n            console.log(6);\n        }\n    }\n\n    protected update(dt: number): void {\n        this.handleRotate();\n    }\n}\n\n"]}