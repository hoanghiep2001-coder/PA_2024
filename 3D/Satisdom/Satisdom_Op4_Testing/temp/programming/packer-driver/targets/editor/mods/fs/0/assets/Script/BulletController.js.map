{"version":3,"sources":["file:///D:/playable-ads-hiepdh/MergeToilet/MergeToilet_Op8/assets/Script/BulletController.ts"],"names":["_decorator","Component","Node","RigidBody","BoxCollider","ERigidBodyType","math","AudioManager","ccclass","property","BulletController","start","rigidbody","getComponent","collider","on","e","otherCollider","node","name","isRun","isDoneFight","type","STATIC","active","GamePlay","countingBoomBullet","handleRunSpineBlast","blastSound","play","Run","setLinearVelocity","Vec3","update","dt"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAA8BC,MAAAA,c,OAAAA,c;AAAgBC,MAAAA,I,OAAAA,I;;AACtFC,MAAAA,Y,iBAAAA,Y;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;kCAGjBU,gB,WADZF,OAAO,CAAC,kBAAD,C,UAGHC,QAAQ;AAAA;AAAA,uC,UAGRA,QAAQ,CAACP,IAAD,C,oCANb,MACaQ,gBADb,SACsCT,SADtC,CACgD;AAAA;AAAA;;AAAA;;AAAA;;AAAA,yCAQ3B,KAR2B;;AAAA,+CASrB,KATqB;;AAAA;;AAAA;AAAA;;AAalCU,QAAAA,KAAK,GAAS;AACpB;AAEA,eAAKC,SAAL,GAAiB,KAAKC,YAAL,CAAkBV,SAAlB,CAAjB;AACA,eAAKW,QAAL,GAAgB,KAAKD,YAAL,CAAkBT,WAAlB,CAAhB;AAEA,eAAKU,QAAL,CAAcC,EAAd,CAAiB,kBAAjB,EAAsCC,CAAD,IAAwB;AACzD,gBAAIA,CAAC,CAACC,aAAF,CAAgBC,IAAhB,CAAqBC,IAArB,KAA8B,eAAlC,EAAmD;AAC/C,mBAAKC,KAAL,GAAa,KAAb;AACA,mBAAKC,WAAL,GAAmB,IAAnB;AACA,mBAAKT,SAAL,CAAeU,IAAf,GAAsBjB,cAAc,CAACkB,MAArC;AACA,mBAAKL,IAAL,CAAUM,MAAV,GAAmB,KAAnB;AACA,mBAAKC,QAAL,CAAcZ,YAAd,CAA2B,UAA3B,EAAuCa,kBAAvC;AACA,mBAAKD,QAAL,CAAcZ,YAAd,CAA2B,UAA3B,EAAuCc,mBAAvC;AACA,mBAAKpB,YAAL,CAAkBqB,UAAlB,CAA6BC,IAA7B;AACH;AACJ,WAVD;AAWH;;AAEOC,QAAAA,GAAG,GAAS;AAChB,eAAKlB,SAAL,CAAemB,iBAAf,CAAiC,IAAIzB,IAAI,CAAC0B,IAAT,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,CAAjC;AACH;;AAESC,QAAAA,MAAM,CAACC,EAAD,EAAmB;AAC/B,cAAI,KAAKd,KAAT,EAAgB,KAAKU,GAAL;AACnB;;AAtC2C,O;;;;;iBAGf,I;;;;;;;iBAGZ,I","sourcesContent":["\nimport { _decorator, Component, Node, RigidBody, BoxCollider, ICollisionEvent, ERigidBodyType, math } from 'cc';\nimport { AudioManager } from './AudioManager';\nconst { ccclass, property } = _decorator;\n\n@ccclass('BulletController')\nexport class BulletController extends Component {\n\n    @property(AudioManager)\n    AudioManager: AudioManager = null;\n\n    @property(Node)\n    GamePlay: Node = null;\n\n    isRun: boolean = false;\n    isDoneFight: boolean = false;\n    rigidbody: RigidBody;\n    collider: BoxCollider;\n\n    protected start(): void {\n        // this.node.active = false;\n\n        this.rigidbody = this.getComponent(RigidBody);\n        this.collider = this.getComponent(BoxCollider)\n\n        this.collider.on(\"onCollisionEnter\", (e: ICollisionEvent) => {\n            if (e.otherCollider.node.name === \"Merged_BanBan\") {\n                this.isRun = false;\n                this.isDoneFight = true;\n                this.rigidbody.type = ERigidBodyType.STATIC;\n                this.node.active = false;\n                this.GamePlay.getComponent(\"GamePlay\").countingBoomBullet++;\n                this.GamePlay.getComponent(\"GamePlay\").handleRunSpineBlast();\n                this.AudioManager.blastSound.play();\n            }\n        });\n    }\n\n    private Run(): void {\n        this.rigidbody.setLinearVelocity(new math.Vec3(0, 0, 5));\n    }\n\n    protected update(dt: number): void {\n        if (this.isRun) this.Run()\n    }\n}\n"]}