{"version":3,"sources":["file:///D:/MergeGrimise_Op1/assets/Script/RangerControl.ts"],"names":["_decorator","Component","ERigidBodyType","BoxCollider","RigidBody","math","SkeletalAnimation","ccclass","property","RangerControl","start","Character","getComponent","rigidbody","node","collider","on","e","otherCollider","name","selfCollider","type","STATIC","isRun","play","scheduleOnce","active","stop","Run","DYNAMIC","setLinearVelocity","Vec3","update","dt"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, ERigidBodyType, BoxCollider, RigidBody, ICollisionEvent, math, SkeletalAnimation } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('RangerControl')\nexport class RangerControl extends Component {\n\n    @property(Component)\n    Character: Component;\n\n    isRun: boolean = false;\n    rigidbody: RigidBody;\n    collider: BoxCollider;\n\n    protected start(): void {\n        \n        this.Character = this.Character.getComponent(\"CharacterControl\");\n\n        this.rigidbody = this.node.getComponent(RigidBody);\n        this.collider = this.node.getComponent(BoxCollider);\n\n        this.collider.on(\"onCollisionEnter\", (e: ICollisionEvent) => {\n            if (e.otherCollider.node.name === \"Ranger07\" && e.selfCollider.node.name !== \"RangerLittle_9\") {\n                this.rigidbody.type = ERigidBodyType.STATIC;\n                this.isRun = false;\n                this.node.getComponent(SkeletalAnimation).play(\"Comp|Die\");\n\n                this.scheduleOnce(() => {\n                    this.node.active = false;\n                    this.node.getComponent(SkeletalAnimation).stop();\n                }, 1);\n            }\n\n            if (e.selfCollider.node.name === \"CompLittle_9\") {\n                this.rigidbody.type = ERigidBodyType.STATIC;\n                this.isRun = false;\n                this.node.getComponent(SkeletalAnimation).play(\"Comp|Die\");\n\n                this.scheduleOnce(() => {\n                    this.node.active = false;\n                    this.node.getComponent(SkeletalAnimation).stop()\n                }, 1);\n            }\n        });\n    }\n\n    private Run(): void {\n        this.rigidbody.type = ERigidBodyType.DYNAMIC;\n\n        switch (this.node.name) {\n            case \"CompLittle_9\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-1, 0, -7))\n                break;\n            case \"CompLittle_10\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-8, 0, -7))\n                break;\n            case \"CompLittle_11\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-6, 0, -6))\n                break;\n            case \"CompLittle_12\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-2, 0, -7))\n                break;\n            case \"CompLittle_13\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-3, 0, -7))\n                break;\n            default:\n                break;\n        }\n    }\n\n    protected update(dt: number): void {\n        if (this.isRun) this.Run()\n    }\n}\n"]}