{"version":3,"sources":["file:///D:/PA_2024/3D/CatEscape/CatEscape_OP15/assets/Script/NextScene.ts"],"names":["_decorator","Component","Node","Button","tween","Vec3","Quat","v3","CCFloat","GameController","ccclass","property","NextScene","start","window","gameReady","hideMask","node","active","boss1","by","position","to","rotation","fromEuler","union","repeatForever","boss2","onLoad","on","cc","EventType","TOUCH_START","installHandle","update","deltaTime","view","getFrameSize","width","height","camera","setPosition","_realHeight","_realWidth","icon","title","setScale","y"],"mappings":"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","sourcesContent":["import {\n  _decorator,\n  Component,\n  Node,\n  Button,\n  tween,\n  Vec3,\n  Quat,\n  Camera,\n  v3,\n  CCFloat,\n} from \"cc\";\nimport { GameController } from \"./GameController\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"NextScene\")\nexport class NextScene extends Component {\n  @property(GameController)\n  GameController: GameController = null;\n  @property(Node)\n  canvas2D: Node = null;\n\n  @property(Button)\n  hideMask: Button = null;\n\n  @property(Node)\n  icon: Node = null;\n\n  @property(Node)\n  title: Node = null;\n\n  @property(Node)\n  boss1: Node = null;\n\n  @property(Node)\n  boss2: Node = null;\n\n  @property(Node)\n  camera: Node = null;\n\n  @property(CCFloat)\n  private _realHeight: number = null;\n\n  @property(CCFloat)\n  private _realWidth: number = null;\n\n  start() {\n    window.gameReady && window.gameReady();\n    this.hideMask.node.active = true;\n    tween(this.boss1)\n      .by(3.5, { position: new Vec3(6, 0, 0) })\n      .to(0, { rotation: Quat.fromEuler(new Quat(), 0, -90, 0) })\n      .by(3.5, { position: new Vec3(-6, 0, 0) })\n      .to(0, { rotation: Quat.fromEuler(new Quat(), 0, 90, 0) })\n      .union()\n      .repeatForever()\n      .start();\n\n    tween(this.boss2)\n      .by(2.5, { position: new Vec3(0, 0, 4.5) })\n      .to(0, { rotation: Quat.fromEuler(new Quat(), 0, 180, 0) })\n      .by(2.5, { position: new Vec3(0, 0, -4.5) })\n      .to(0, { rotation: Quat.fromEuler(new Quat(), 0, 0, 0) })\n      .union()\n      .repeatForever()\n      .start();\n\n    // console.log(this.camera.getPosition());\n  }\n\n  onLoad() {\n    this.hideMask.node.on(\n      cc.Node.EventType.TOUCH_START,\n      this.installHandle,\n      this\n    );\n  }\n\n\n  private installHandle(): void {\n    this.GameController.installHandle();\n    \n  }\n\n\n  update(deltaTime: number) {\n    if (cc.view.getFrameSize().width > cc.view.getFrameSize().height) {\n      this.camera.setPosition(v3(-14.8, 24, 0));\n\n      this._realHeight = 480;\n      this._realWidth =\n        320 * (cc.view.getFrameSize().width / cc.view.getFrameSize().height);\n      // console.log(this._realWidth);\n      this.icon.setPosition((this._realWidth - 320) / 2 + 160, 0, 0);\n      this.title.setPosition((320 - this._realWidth) / 2 - 160, 0, 0);\n\n      this.icon.setScale(0.9, 0.9, 0.9);\n      this.title.setScale(0.35, 0.35, 0.35);\n    } else {\n      if (cc.view.getFrameSize().height / cc.view.getFrameSize().width < 1.4) {\n        this._realWidth = 370;\n      } else {\n        this._realWidth = 320;\n      }\n      this.camera.setPosition(v3(-13, 24, 0));\n      this._realHeight =\n        this._realWidth *\n        (cc.view.getFrameSize().height / cc.view.getFrameSize().width);\n\n      this.title.y = (this._realHeight - 480) / 2 + 207;\n      this.icon.y = (this._realHeight - 480) / 2 + 207;\n\n      this.icon.setPosition(56, 207 + (this._realHeight - 480) / 2, 0);\n      this.title.setPosition(-40, 207 + (this._realHeight - 480) / 2, 0);\n      this.icon.setScale(0.25, 0.25, 0.25);\n      this.title.setScale(0.2, 0.2, 0.2);\n    }\n  }\n}\n"]}