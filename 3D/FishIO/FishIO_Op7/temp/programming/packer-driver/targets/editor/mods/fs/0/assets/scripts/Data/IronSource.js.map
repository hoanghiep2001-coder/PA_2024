{"version":3,"sources":["file:///D:/PA_2024/3D/FishIO/FishIO_Op7/assets/scripts/Data/IronSource.ts"],"names":["_decorator","Component","Constants","AudioManager","ccclass","property","IronSource","handleIronSourcePlaySound","ironSource","isPlayBgSound","SoundState","isCompleteVideo","playSound","SoundTrack","bgSound","Skiing_BgSound","handleMuteSoundIronSource","State","parseInt","localStorage","getItem","isEndGame","stopAllSound","update","dt"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;4BAIjBM,U,WADZF,OAAO,CAAC,YAAD,C,UAGHC,QAAQ;AAAA;AAAA,uC,oCAHb,MACaC,UADb,SACgCL,SADhC,CAC0C;AAAA;AAAA;;AAAA;AAAA;;AAM/BM,QAAAA,yBAAyB,GAAS;AACrC,cAAI;AAAA;AAAA,sCAAUC,UAAV,CAAqBC,aAAzB,EAAwC;AACpC;AACH;;AAED;AAAA;AAAA,sCAAUD,UAAV,CAAqBC,aAArB,GAAqC,IAArC;;AACA,cAAI;AAAA;AAAA,sCAAUD,UAAV,CAAqBE,UAArB,IAAmC;AAAA;AAAA,sCAAUC,eAAjD,EAAkE;AAC9D,iBAAKR,YAAL,CAAkBS,SAAlB,CAA4B;AAAA;AAAA,wCAAUC,UAAV,CAAqBC,OAAjD;AACH,WAFD,MAEO;AACH,iBAAKX,YAAL,CAAkBS,SAAlB,CAA4B;AAAA;AAAA,wCAAUC,UAAV,CAAqBE,cAAjD;AACH;AAEJ;;AAGOC,QAAAA,yBAAyB,GAAS;AACtC;AAAA;AAAA,sCAAUR,UAAV,CAAqBS,KAArB,GAA6BC,QAAQ,CAACC,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAD,EAA0C,EAA1C,CAArC;;AAEA,cAAI;AAAA;AAAA,sCAAUZ,UAAV,CAAqBS,KAAzB,EAAgC;AAC5B,gBAAI;AAAA;AAAA,wCAAUT,UAAV,CAAqBS,KAArB,KAA+B,CAA/B,IAAoC,CAAC;AAAA;AAAA,wCAAUT,UAAV,CAAqBE,UAA1D,IAAwE,CAAC;AAAA;AAAA,wCAAUF,UAAV,CAAqBa,SAAlG,EAA6G;AACzG;AAAA;AAAA,0CAAUb,UAAV,CAAqBE,UAArB,GAAkC,IAAlC;;AACA,kBAAG;AAAA;AAAA,0CAAUC,eAAb,EAA8B;AAC1B,qBAAKR,YAAL,CAAkBS,SAAlB,CAA4B;AAAA;AAAA,4CAAUC,UAAV,CAAqBC,OAAjD;AACH,eAFD,MAEO;AACH,qBAAKX,YAAL,CAAkBS,SAAlB,CAA4B;AAAA;AAAA,4CAAUC,UAAV,CAAqBE,cAAjD;AACH;AACJ;;AAED,gBAAI;AAAA;AAAA,wCAAUP,UAAV,CAAqBS,KAArB,KAA+B,CAA/B,IAAoC;AAAA;AAAA,wCAAUT,UAAV,CAAqBE,UAA7D,EAAyE;AACrE;AAAA;AAAA,0CAAUF,UAAV,CAAqBE,UAArB,GAAkC,KAAlC;AACA,mBAAKP,YAAL,CAAkBmB,YAAlB;AACH;AACJ;AACJ;;AAGSC,QAAAA,MAAM,CAACC,EAAD,EAAmB;AAC/B,eAAKR,yBAAL;AACH;;AA5CqC,O;;;;;iBAGT,I","sourcesContent":["\nimport { _decorator, Component, Node } from 'cc';\nimport { Constants } from './Constant';\nimport { AudioManager } from '../Controller/AudioManager';\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('IronSource')\nexport class IronSource extends Component {\n\n    @property(AudioManager)\n    AudioManager: AudioManager = null;\n\n\n    public handleIronSourcePlaySound(): void {\n        if (Constants.ironSource.isPlayBgSound) {\n            return;\n        }\n        \n        Constants.ironSource.isPlayBgSound = true;\n        if (Constants.ironSource.SoundState && Constants.isCompleteVideo) {\n            this.AudioManager.playSound(Constants.SoundTrack.bgSound);\n        } else {\n            this.AudioManager.playSound(Constants.SoundTrack.Skiing_BgSound);\n        }\n\n    }\n\n\n    private handleMuteSoundIronSource(): void {\n        Constants.ironSource.State = parseInt(localStorage.getItem(\"cocosSoundState\"), 10)\n\n        if (Constants.ironSource.State) {\n            if (Constants.ironSource.State === 1 && !Constants.ironSource.SoundState && !Constants.ironSource.isEndGame) {\n                Constants.ironSource.SoundState = true;\n                if(Constants.isCompleteVideo) {\n                    this.AudioManager.playSound(Constants.SoundTrack.bgSound);\n                } else {\n                    this.AudioManager.playSound(Constants.SoundTrack.Skiing_BgSound);\n                }\n            }\n\n            if (Constants.ironSource.State === 2 && Constants.ironSource.SoundState) {\n                Constants.ironSource.SoundState = false;\n                this.AudioManager.stopAllSound();\n            }\n        }\n    }\n\n\n    protected update(dt: number): void {\n        this.handleMuteSoundIronSource();\n    }\n}\n\n"]}