{"version":3,"sources":["file:///D:/PA_2024/3D/MergeDino/MergeDino_Op9/assets/Script/Controller/TouchAreaController.ts"],"names":["_decorator","Component","Node","Vec3","Constants","ccclass","property","TouchAreaController","start","registerEvent","hideMask","on","EventType","TOUCH_START","touchMove","TOUCH_MOVE","TOUCH_END","touchEnd","TOUCH_CANCEL","event","stick","isTouching","screenPos","getUILocation","pos","convertToLocalLocation","point","setPosition","value","localX","x","node","getPosition","localY","y","result","update","dt"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAwBC,MAAAA,I,OAAAA,I;;AAC/CC,MAAAA,S,iBAAAA,S;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;qCAGjBO,mB,WADZF,OAAO,CAAC,qBAAD,C,UAGLC,QAAQ,CAACJ,IAAD,C,UAERI,QAAQ,CAACJ,IAAD,C,UAIRI,QAAQ,CAAC,CAACJ,IAAD,CAAD,C,oCATX,MACaK,mBADb,SACyCN,SADzC,CACmD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,uCAarC,IAbqC;AAAA;;AAgBvCO,QAAAA,KAAK,GAAS;AACtB,eAAKC,aAAL;AACD;;AAGOA,QAAAA,aAAa,GAAS;AAC5B,eAAKC,QAAL,CAAcC,EAAd,CAAiBT,IAAI,CAACU,SAAL,CAAeC,WAAhC,EAA6C,KAAKC,SAAlD,EAA6D,IAA7D;AACA,eAAKJ,QAAL,CAAcC,EAAd,CAAiBT,IAAI,CAACU,SAAL,CAAeG,UAAhC,EAA4C,KAAKD,SAAjD,EAA4D,IAA5D;AACA,eAAKJ,QAAL,CAAcC,EAAd,CAAiBT,IAAI,CAACU,SAAL,CAAeI,SAAhC,EAA2C,KAAKC,QAAhD,EAA0D,IAA1D;AACA,eAAKP,QAAL,CAAcC,EAAd,CAAiBT,IAAI,CAACU,SAAL,CAAeM,YAAhC,EAA8C,KAAKD,QAAnD,EAA6D,IAA7D;AACD;;AAGMH,QAAAA,SAAS,CAACK,KAAD,EAAoBC,KAApB,EAAiC;AAC/C;AAAA;AAAA,sCAAUC,UAAV,GAAuB,IAAvB;AAIA,cAAMC,SAAS,GAAGH,KAAK,CAACI,aAAN,EAAlB;AACA,eAAKC,GAAL,GAAW,KAAKC,sBAAL,CAA4BH,SAA5B,CAAX;AACA,eAAKI,KAAL,CAAWC,WAAX,CAAuB,KAAKH,GAA5B;AACD;;AAGOP,QAAAA,QAAQ,GAAS;AACvB;AAAA;AAAA,sCAAUI,UAAV,GAAuB,KAAvB;AACD;;AAGMI,QAAAA,sBAAsB,CAACG,KAAD,EAAc;AACzC,cAAMC,MAAM,GAAGD,KAAK,CAACE,CAAN,GAAU,GAAV,GAAgB,KAAKC,IAAL,CAAUC,WAAV,GAAwBF,CAAvD;AACA,cAAMG,MAAM,GAAGL,KAAK,CAACM,CAAN,GAAU,GAAV,GAAgB,KAAKH,IAAL,CAAUC,WAAV,GAAwBE,CAAvD;AACA,cAAMC,MAAM,GAAG,IAAIhC,IAAJ,CAAS0B,MAAT,EAAiBI,MAAjB,EAAyB,CAAzB,CAAf;AACA,iBAAOE,MAAP;AACD;;AAGSC,QAAAA,MAAM,CAACC,EAAD,EAAmB,CAElC;;AAvDgD,O;;;;;iBAGnC,I;;;;;;;iBAEG,I;;;;;;;iBAIE,E","sourcesContent":["import { _decorator, Component, Node, Vec2, EventTouch, Vec3 } from \"cc\";\nimport { Constants } from \"../Data/Constant\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"TouchAreaController\")\nexport class TouchAreaController extends Component {\n\n  @property(Node)\n  point: Node = null;\n  @property(Node)\n  hideMask: Node = null;\n\n\n  @property([Node])\n  points_1: Node[] = [];\n\n\n  // state\n  pos: Vec3 = null;\n\n\n  protected start(): void {\n    this.registerEvent();\n  }\n\n\n  private registerEvent(): void {\n    this.hideMask.on(Node.EventType.TOUCH_START, this.touchMove, this);\n    this.hideMask.on(Node.EventType.TOUCH_MOVE, this.touchMove, this);\n    this.hideMask.on(Node.EventType.TOUCH_END, this.touchEnd, this);\n    this.hideMask.on(Node.EventType.TOUCH_CANCEL, this.touchEnd, this);\n  }\n\n\n  public touchMove(event: EventTouch, stick: Node) {\n    Constants.isTouching = true;\n\n   \n\n    const screenPos = event.getUILocation();\n    this.pos = this.convertToLocalLocation(screenPos);\n    this.point.setPosition(this.pos);\n  }\n\n\n  private touchEnd(): void {\n    Constants.isTouching = false;\n  }\n\n\n  public convertToLocalLocation(value: Vec2) {\n    const localX = value.x - 160 - this.node.getPosition().x;\n    const localY = value.y - 240 - this.node.getPosition().y;\n    const result = new Vec3(localX, localY, 0);\n    return result;\n  }\n\n\n  protected update(dt: number): void {\n\n  }\n}\n"]}