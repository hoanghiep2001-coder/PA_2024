{"version":3,"sources":["file:///D:/PA_2024/3D/MergeDino/MergeDino_Op9/assets/Script/Controller/RangerControl.ts"],"names":["_decorator","Component","ERigidBodyType","BoxCollider","RigidBody","math","SkeletalAnimation","ccclass","property","RangerControl","start","getComponent","play","rigidbody","node","collider","on","e","otherCollider","name","selfCollider","type","STATIC","isRun","scheduleOnce","active","stop","Run","DYNAMIC","setLinearVelocity","Vec3","update","dt"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, ERigidBodyType, BoxCollider, RigidBody, ICollisionEvent, math, SkeletalAnimation } from 'cc';\nimport { CharacterControl } from './CharacterControl';\nconst { ccclass, property } = _decorator;\n\n@ccclass('RangerControl')\nexport class RangerControl extends Component {\n\n\n    isRun: boolean = false;\n    rigidbody: RigidBody;\n    collider: BoxCollider;\n\n    protected start(): void {\n        this.getComponent(SkeletalAnimation).play(\"Idle_1\");\n\n        this.rigidbody = this.node.getComponent(RigidBody);\n        this.collider = this.node.getComponent(BoxCollider);\n\n        this.collider.on(\"onCollisionEnter\", (e: ICollisionEvent) => {\n            if (e.otherCollider.node.name === \"Robot_melee02_base\" && e.selfCollider.node.name !== \"Robot_melee07_9\") {\n                this.rigidbody.type = ERigidBodyType.STATIC;\n                this.isRun = false;\n                this.node.getComponent(SkeletalAnimation).play(\"die\");\n\n                this.scheduleOnce(() => {\n                    this.node.active = false;\n                    this.node.getComponent(SkeletalAnimation).stop();\n                }, 1);\n            }\n\n            if (e.selfCollider.node.name === \"Robot_melee07_9\") {\n                this.rigidbody.type = ERigidBodyType.STATIC;\n                this.isRun = false;\n                this.node.getComponent(SkeletalAnimation).play(\"die\");\n\n                this.scheduleOnce(() => {\n                    this.node.active = false;\n                    this.node.getComponent(SkeletalAnimation).stop()\n                }, 1);\n            }\n        });\n    }\n\n    private Run(): void {\n        this.rigidbody.type = ERigidBodyType.DYNAMIC;\n\n        switch (this.node.name) {\n            case \"Robot_melee07_9\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-1, 0, -7))\n                break;\n            case \"Robot_melee07_10\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-3, 0, -7))\n                break;\n            case \"Robot_melee07_11\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-3, 0, -6))\n                break;\n            case \"Robot_melee07_12\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-2, 0, -7))\n                break;\n            case \"Robot_melee07_13\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-3, 0, -7))\n                break;\n            default:\n                break;\n        }\n    }\n\n    protected update(dt: number): void {\n        if (this.isRun) this.Run()\n    }\n}\n"]}