{"version":3,"sources":["file:///D:/PlayableAds/PA_2024/3D/MergeDino/MergeDino_Op9/assets/Script/Controller/CharacterControl.ts"],"names":["_decorator","BoxCollider","Component","ERigidBodyType","math","Node","RigidBody","SkeletalAnimation","Vec3","ccclass","property","CharacterControl","onLoad","level","active","node","start","getComponent","play","setScale","rigidbody","collider","on","e","otherCollider","name","isRun","isFight","Run","type","DYNAMIC","setLinearVelocity","update","dt"],"mappings":";;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,c,OAAAA,c;AAAiCC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,iB,OAAAA,iB;AAAmBC,MAAAA,I,OAAAA,I;;;;;;;OAClH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;;kCAGjBW,gB,WADZF,OAAO,CAAC,kBAAD,C,UAGHC,QAAQ,CAACL,IAAD,C,oCAHb,MACaM,gBADb,SACsCT,SADtC,CACgD;AAAA;AAAA;;AAAA;;AAAA,yCAM3B,KAN2B;;AAAA,2CAOzB,KAPyB;;AAAA;;AAAA;AAAA;;AAYlCU,QAAAA,MAAM,GAAS;AACrB,eAAKC,KAAL,CAAWC,MAAX,GAAoB,KAApB;AACA,eAAKC,IAAL,CAAUD,MAAV,GAAmB,KAAnB;AACH;;AAGSE,QAAAA,KAAK,GAAS;AACpB,eAAKC,YAAL,CAAkBV,iBAAlB,EAAqCW,IAArC,CAA0C,QAA1C;AACA,eAAKH,IAAL,CAAUI,QAAV,CAAmB,IAAIX,IAAJ,CAAS,CAAT,EAAW,CAAX,EAAa,CAAb,CAAnB;AAEA,eAAKY,SAAL,GAAiB,KAAKL,IAAL,CAAUE,YAAV,CAAuBX,SAAvB,CAAjB;AACA,eAAKe,QAAL,GAAgB,KAAKN,IAAL,CAAUE,YAAV,CAAuBhB,WAAvB,CAAhB;AAEA,eAAKoB,QAAL,CAAcC,EAAd,CAAiB,kBAAjB,EAAsCC,CAAD,IAAwB;AACzD,gBAAIA,CAAC,CAACC,aAAF,CAAgBT,IAAhB,CAAqBU,IAArB,KAA8B,oBAAlC,EAAwD;AACpD,mBAAKC,KAAL,GAAa,KAAb;AACA,mBAAKC,OAAL,GAAe,IAAf;AACH;AACJ,WALD;AAMH;;AAEOC,QAAAA,GAAG,GAAS;AAChB,eAAKR,SAAL,CAAeS,IAAf,GAAsB1B,cAAc,CAAC2B,OAArC;AACA,eAAKV,SAAL,CAAeW,iBAAf,CAAiC,IAAI3B,IAAI,CAACI,IAAT,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAAC,EAArB,CAAjC;AACH;;AAESwB,QAAAA,MAAM,CAACC,EAAD,EAAmB;AAC/B,cAAI,KAAKP,KAAT,EAAgB,KAAKE,GAAL;AACnB;;AAxC2C,O;;;;;iBAG9B,I","sourcesContent":["\r\nimport { _decorator, BoxCollider, Component, ERigidBodyType, ICollisionEvent, math, Node, RigidBody, SkeletalAnimation, Vec3 } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('CharacterControl')\r\nexport class CharacterControl extends Component {\r\n\r\n    @property(Node)\r\n    level: Node = null;\r\n\r\n\r\n    isRun: boolean = false;\r\n    isFight: boolean = false;\r\n    rigidbody: RigidBody;\r\n    collider: BoxCollider;\r\n\r\n\r\n    protected onLoad(): void {\r\n        this.level.active = false;\r\n        this.node.active = false;\r\n    }\r\n\r\n\r\n    protected start(): void {\r\n        this.getComponent(SkeletalAnimation).play(\"Idle_2\");\r\n        this.node.setScale(new Vec3(0,0,0));\r\n\r\n        this.rigidbody = this.node.getComponent(RigidBody);\r\n        this.collider = this.node.getComponent(BoxCollider)\r\n\r\n        this.collider.on(\"onCollisionEnter\", (e: ICollisionEvent) => {\r\n            if (e.otherCollider.node.name === \"Robot_melee02_base\") {\r\n                this.isRun = false;\r\n                this.isFight = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    private Run(): void {\r\n        this.rigidbody.type = ERigidBodyType.DYNAMIC;\r\n        this.rigidbody.setLinearVelocity(new math.Vec3(2, 0, -10))\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        if (this.isRun) this.Run()\r\n    }\r\n}\r\n\r\n"]}