{"version":3,"sources":["file:///D:/PlayableAds/PA_2024/3D/MergeDino/MergeDino_Op9/assets/Script/Controller/RangerControl.ts"],"names":["_decorator","Component","ERigidBodyType","BoxCollider","RigidBody","math","SkeletalAnimation","ccclass","property","RangerControl","start","getComponent","play","rigidbody","node","collider","on","e","otherCollider","name","selfCollider","type","STATIC","isRun","scheduleOnce","active","stop","Run","DYNAMIC","setLinearVelocity","Vec3","update","dt"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, ERigidBodyType, BoxCollider, RigidBody, ICollisionEvent, math, SkeletalAnimation } from 'cc';\r\nimport { CharacterControl } from './CharacterControl';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RangerControl')\r\nexport class RangerControl extends Component {\r\n\r\n\r\n    isRun: boolean = false;\r\n    rigidbody: RigidBody;\r\n    collider: BoxCollider;\r\n\r\n    protected start(): void {\r\n        this.getComponent(SkeletalAnimation).play(\"Idle_1\");\r\n\r\n        this.rigidbody = this.node.getComponent(RigidBody);\r\n        this.collider = this.node.getComponent(BoxCollider);\r\n\r\n        this.collider.on(\"onCollisionEnter\", (e: ICollisionEvent) => {\r\n            if (e.otherCollider.node.name === \"Robot_melee02_base\" && e.selfCollider.node.name !== \"Robot_melee07_9\") {\r\n                this.rigidbody.type = ERigidBodyType.STATIC;\r\n                this.isRun = false;\r\n                this.node.getComponent(SkeletalAnimation).play(\"die\");\r\n\r\n                this.scheduleOnce(() => {\r\n                    this.node.active = false;\r\n                    this.node.getComponent(SkeletalAnimation).stop();\r\n                }, 1);\r\n            }\r\n\r\n            if (e.selfCollider.node.name === \"Robot_melee07_9\") {\r\n                this.rigidbody.type = ERigidBodyType.STATIC;\r\n                this.isRun = false;\r\n                this.node.getComponent(SkeletalAnimation).play(\"die\");\r\n\r\n                this.scheduleOnce(() => {\r\n                    this.node.active = false;\r\n                    this.node.getComponent(SkeletalAnimation).stop()\r\n                }, 1);\r\n            }\r\n        });\r\n    }\r\n\r\n    private Run(): void {\r\n        this.rigidbody.type = ERigidBodyType.DYNAMIC;\r\n\r\n        switch (this.node.name) {\r\n            case \"Robot_melee07_9\":\r\n                this.rigidbody.setLinearVelocity(new math.Vec3(-1, 0, -7))\r\n                break;\r\n            case \"Robot_melee07_10\":\r\n                this.rigidbody.setLinearVelocity(new math.Vec3(-3, 0, -7))\r\n                break;\r\n            case \"Robot_melee07_11\":\r\n                this.rigidbody.setLinearVelocity(new math.Vec3(-3, 0, -6))\r\n                break;\r\n            case \"Robot_melee07_12\":\r\n                this.rigidbody.setLinearVelocity(new math.Vec3(-2, 0, -7))\r\n                break;\r\n            case \"Robot_melee07_13\":\r\n                this.rigidbody.setLinearVelocity(new math.Vec3(-3, 0, -7))\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        if (this.isRun) this.Run()\r\n    }\r\n}\r\n"]}