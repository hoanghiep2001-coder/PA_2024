{"version":3,"sources":["file:///D:/PA_2024/3D/MergeDino/MergeDino_Op9/assets/Script/JoyStick.ts"],"names":["_decorator","Component","CCBoolean","ccclass","property","JoyStick","start","onLoad","stickMove","event","stick","screenPos","getUILocation","pos","convertToLocalLocation","setPosition","value","localX","x","node","getPosition","localY","y","result","cc","Vec3","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;AACEA,MAAAA,U,OAAAA,U;AACAC,MAAAA,S,OAAAA,S;AAcAC,MAAAA,S,OAAAA,S;;;;;;;OAEI;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;0BAGjBK,Q,WADZF,OAAO,CAAC,UAAD,C,UAOLC,QAAQ,CAACF,SAAD,C,oCAPX,MACaG,QADb,SAC8BJ,SAD9B,CACwC;AAAA;AAAA;;AAAA;;AAAA;;AAAA,yCASjB,IATiB;;AAAA,4CAalB,KAbkB;;AAAA,uCAc1B,IAd0B;AAAA;;AAgBtCK,QAAAA,KAAK,GAAG,CAAE;;AAEVC,QAAAA,MAAM,GAAG,CAER;;AAEMC,QAAAA,SAAS,CAACC,KAAD,EAAoBC,KAApB,EAAiC;AAC/C,gBAAMC,SAAS,GAAGF,KAAK,CAACG,aAAN,EAAlB;AACA,eAAKC,GAAL,GAAW,KAAKC,sBAAL,CAA4BH,SAA5B,CAAX;AACAD,UAAAA,KAAK,CAACK,WAAN,CAAkB,KAAKF,GAAvB;AACD;;AAGMC,QAAAA,sBAAsB,CAACE,KAAD,EAAc;AACzC,gBAAMC,MAAM,GAAGD,KAAK,CAACE,CAAN,GAAU,GAAV,GAAgB,KAAKC,IAAL,CAAUC,WAAV,GAAwBF,CAAvD;AACA,gBAAMG,MAAM,GAAGL,KAAK,CAACM,CAAN,GAAU,GAAV,GAAgB,KAAKH,IAAL,CAAUC,WAAV,GAAwBE,CAAvD;AACA,gBAAMC,MAAM,GAAG,IAAIC,EAAE,CAACC,IAAP,CAAYR,MAAZ,EAAoBI,MAApB,EAA4B,CAA5B,CAAf;AACA,iBAAOE,MAAP;AACD;;AAEDG,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAtCqC,O,gFAGrCvB,Q;;;;;iBACsB,G;;;;;;;iBAGG,K","sourcesContent":["import {\n  _decorator,\n  Component,\n  Node,\n  UITransform,\n  v3,\n  Vec2,\n  screen,\n  Touch,\n  EventTouch,\n  v2,\n  view,\n  Vec3,\n  math,\n  CCFloat,\n  CCInteger,\n  CCBoolean,\n} from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"JoyStick\")\nexport class JoyStick extends Component {\n\n\n  @property\n  public max_r: number = 100;\n\n  @property(CCBoolean)\n  public isTouch: boolean = false;\n\n  public stick: Node = null;\n  \n\n  // state\n  isRotate: boolean = false;\n  pos: Vec3 = null;\n\n  start() {}\n\n  onLoad() {\n\n  }\n\n  public stickMove(event: EventTouch, stick: Node) {\n    const screenPos = event.getUILocation();\n    this.pos = this.convertToLocalLocation(screenPos);\n    stick.setPosition(this.pos);\n  }\n\n\n  public convertToLocalLocation(value: Vec2) {\n    const localX = value.x - 160 - this.node.getPosition().x;\n    const localY = value.y - 240 - this.node.getPosition().y;\n    const result = new cc.Vec3(localX, localY, 0);\n    return result;\n  }\n\n  update(deltaTime: number) {\n\n  }\n}\n"]}