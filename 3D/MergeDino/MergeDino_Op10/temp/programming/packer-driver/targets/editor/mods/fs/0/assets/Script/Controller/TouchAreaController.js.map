{"version":3,"sources":["file:///D:/PA_2024/3D/MergeDino/MergeDino_Op10/assets/Script/Controller/TouchAreaController.ts"],"names":["_decorator","Component","Node","Vec3","Animation","Constants","NodesController","GameController","AudioManager","IronSource","ccclass","property","TouchAreaController","start","registerEvent","hideMask","on","EventType","TOUCH_START","touchStart","TOUCH_MOVE","touchMove","TOUCH_END","touchEnd","TOUCH_CANCEL","BtnClaim","isClickStart","installHandle","isCanTouch","ironSource","isEndGame","playSound","SoundTrack","Dino_ChooseSound","Dino_MergeSound","isTouching","Text_Tap","active","RewardContainer","getComponent","play","event","stick","convertToLocalLocation","value","localX","x","node","getPosition","localY","y","result"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Vec2, EventTouch, Vec3, UITransform, Animation } from \"cc\";\r\nimport { Constants } from \"../Data/Constant\";\r\nimport { NodesController } from \"./NodesController\";\r\nimport { GameController } from \"./GameController\";\r\nimport { AudioManager } from \"../Plugin/AudioManager\";\r\nimport { IronSource } from \"../Plugin/IronSource\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"TouchAreaController\")\r\nexport class TouchAreaController extends Component {\r\n  @property(IronSource)\r\n  IronSource: IronSource = null;\r\n  @property(AudioManager)\r\n  AudioManager: AudioManager = null;\r\n  @property(NodesController)\r\n  NodesController: NodesController = null;\r\n  @property(GameController)\r\n  GameController: GameController = null;\r\n\r\n  // state\r\n  pos: Vec3 = null;\r\n\r\n\r\n  isDoneMergeStep1: boolean = false;\r\n  isDoneMergeStep2: boolean = false;\r\n\r\n  protected start(): void {\r\n    this.registerEvent();\r\n  }\r\n\r\n\r\n  private registerEvent(): void {\r\n    this.NodesController.hideMask.on(Node.EventType.TOUCH_START, this.touchStart, this);\r\n    this.NodesController.hideMask.on(Node.EventType.TOUCH_MOVE, this.touchMove, this);\r\n    this.NodesController.hideMask.on(Node.EventType.TOUCH_END, this.touchEnd, this);\r\n    this.NodesController.hideMask.on(Node.EventType.TOUCH_CANCEL, this.touchEnd, this);\r\n\r\n    this.NodesController.BtnClaim.on(Node.EventType.TOUCH_START, this.touchStart, this);\r\n  }\r\n\r\n\r\n\r\n  private touchStart(): void {\r\n    Constants.isClickStart && this.GameController.installHandle();\r\n    if (!Constants.isCanTouch || Constants.ironSource.isEndGame) {\r\n      return;\r\n    }\r\n\r\n    this.AudioManager.playSound(Constants.SoundTrack.Dino_ChooseSound)\r\n    this.AudioManager.playSound(Constants.SoundTrack.Dino_MergeSound)\r\n    // this.NodesController.hideMask.active = false;\r\n    Constants.isTouching = true;  \r\n    this.NodesController.Text_Tap.active = false;\r\n    !Constants.isClickStart && this.NodesController.RewardContainer.getComponent(Animation).play(\"Reward_Anim\");\r\n    Constants.isClickStart = true;\r\n    // this.IronSource.handleIronSourcePlaySound();\r\n  }\r\n\r\n\r\n  private touchMove(event: EventTouch, stick: Node) {\r\n    if (!Constants.isCanTouch) {\r\n      return;\r\n    }\r\n\r\n   \r\n  }\r\n\r\n\r\n  private touchEnd(): void {\r\n\r\n  }\r\n\r\n\r\n  private convertToLocalLocation(value: Vec2): Vec3 {\r\n    const localX = value.x - 160 - this.node.getPosition().x;\r\n    const localY = value.y - 240 - this.node.getPosition().y;\r\n    const result = new Vec3(localX, localY, 0);\r\n    return result;\r\n  }\r\n\r\n\r\n\r\n  // protected update(dt: number): void {\r\n  //       this.IronSource.handleMuteSoundIronSource();\r\n  // }\r\n}\r\n"]}