{"version":3,"sources":["file:///D:/PA_2024/3D/MergeDino/MergeDino_Op9/assets/Script/RangerControl.ts"],"names":["_decorator","Component","ERigidBodyType","BoxCollider","RigidBody","math","SkeletalAnimation","CharacterControl","ccclass","property","RangerControl","start","rigidbody","node","getComponent","collider","on","e","otherCollider","name","selfCollider","type","STATIC","isRun","play","scheduleOnce","active","stop","Run","DYNAMIC","setLinearVelocity","Vec3","update","dt"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, ERigidBodyType, BoxCollider, RigidBody, ICollisionEvent, math, SkeletalAnimation } from 'cc';\nimport { CharacterControl } from './CharacterControl';\nconst { ccclass, property } = _decorator;\n\n@ccclass('RangerControl')\nexport class RangerControl extends Component {\n\n    @property(CharacterControl)\n    Character: CharacterControl;\n\n    isRun: boolean = false;\n    rigidbody: RigidBody;\n    collider: BoxCollider;\n\n    protected start(): void {\n        this.rigidbody = this.node.getComponent(RigidBody);\n        this.collider = this.node.getComponent(BoxCollider);\n\n        this.collider.on(\"onCollisionEnter\", (e: ICollisionEvent) => {\n            if (e.otherCollider.node.name === \"Robot_melee02_base\" && e.selfCollider.node.name !== \"Robot_melee07_9\") {\n                this.rigidbody.type = ERigidBodyType.STATIC;\n                this.isRun = false;\n                this.node.getComponent(SkeletalAnimation).play(\"die\");\n\n                this.scheduleOnce(() => {\n                    this.node.active = false;\n                    this.node.getComponent(SkeletalAnimation).stop();\n                }, 1);\n            }\n\n            if (e.selfCollider.node.name === \"Robot_melee07_9\") {\n                this.rigidbody.type = ERigidBodyType.STATIC;\n                this.isRun = false;\n                this.node.getComponent(SkeletalAnimation).play(\"die\");\n\n                this.scheduleOnce(() => {\n                    this.node.active = false;\n                    this.node.getComponent(SkeletalAnimation).stop()\n                }, 1);\n            }\n        });\n    }\n\n    private Run(): void {\n        this.rigidbody.type = ERigidBodyType.DYNAMIC;\n\n        switch (this.node.name) {\n            case \"Robot_melee07_9\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-1, 0, -7))\n                break;\n            case \"Robot_melee07_10\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-3, 0, -7))\n                break;\n            case \"Robot_melee07_11\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-3, 0, -6))\n                break;\n            case \"Robot_melee07_12\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-2, 0, -7))\n                break;\n            case \"Robot_melee07_13\":\n                this.rigidbody.setLinearVelocity(new math.Vec3(-3, 0, -7))\n                break;\n            default:\n                break;\n        }\n    }\n\n    protected update(dt: number): void {\n        if (this.isRun) this.Run()\n    }\n}\n"]}