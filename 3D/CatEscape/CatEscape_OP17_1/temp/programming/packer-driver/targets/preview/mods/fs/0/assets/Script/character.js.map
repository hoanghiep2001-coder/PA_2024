{"version":3,"sources":["file:///D:/Cocos2dx/CatEscape_OP1/assets/Script/character.ts"],"names":["_decorator","Component","CCString","RigidBody","v3","SkeletalAnimation","CCBoolean","JoyStick","ccclass","property","v3Clone","Character","start","_body","node","getComponent","setRotationFromEuler","_aniSkeleton","play","directionMove","value","result","pause","resume","update","deltaTime","catDirectionMove","joyStick","angleMove","setLinearVelocity","speed"],"mappings":"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","sourcesContent":["import {\n  _decorator,\n  Component,\n  CCString,\n  Quat,\n  Vec3,\n  tween,\n  RigidBody,\n  v3,\n  SkeletalAnimation,\n  CCBoolean,\n} from \"cc\";\nimport { JoyStick } from \"./JoyStick\";\nconst { ccclass, property } = _decorator;\nlet v3Clone = v3();\n\n@ccclass(\"Character\")\nexport class Character extends Component {\n  @property(JoyStick)\n  joyStick: JoyStick;\n\n  @property(CCString)\n  catDirectionMove: string = \"stop\";\n\n  @property(RigidBody)\n  _body: RigidBody;\n\n  @property(CCBoolean)\n  _isMoving: boolean = false;\n\n  @property\n  public speed: number = 3;\n\n  @property(SkeletalAnimation)\n  _aniSkeleton: SkeletalAnimation = null;\n\n  start() {\n    this._body = this.node.getComponent(RigidBody);\n    this.node.setRotationFromEuler(v3(0, 90, 0));\n    this._aniSkeleton = this.node.getComponent(SkeletalAnimation);\n    this._aniSkeleton.play(\"Cats_Runcycle\");\n  }\n\n  directionMove(value: number | null) {\n    let result: string = \"\";\n    if (value === null) {\n      this._aniSkeleton.pause();\n\n      return (result = \"stop\");\n    } else {\n      this._aniSkeleton.resume();\n      if (-45 <= value && value < 45) return (result = \"top\");\n      if (45 <= value && value < 135) return (result = \"right\");\n      if (135 <= value && value < 180) return (result = \"bottom\");\n      if (-180 <= value && value < -135) return (result = \"bottom\");\n      if (-135 <= value && value < -45) return (result = \"left\");\n    }\n  }\n\n  update(deltaTime: number) {\n    this.catDirectionMove = this.directionMove(this.joyStick.angleMove);\n    switch (this.catDirectionMove) {\n      case \"stop\":\n        return this._body.setLinearVelocity(v3(0, 0, 0));\n      case \"top\":\n        this.node.setRotationFromEuler(v3(0, 90, 0));\n        return this._body.setLinearVelocity(v3(this.speed, 0, 0));\n      case \"right\":\n        this.node.setRotationFromEuler(v3(0, 0, 0));\n        return this._body.setLinearVelocity(v3(0, 0, this.speed));\n      case \"bottom\":\n        this.node.setRotationFromEuler(v3(0, -90, 0));\n        return this._body.setLinearVelocity(v3(-this.speed, 0, 0));\n      case \"left\":\n        this.node.setRotationFromEuler(v3(0, 180, 0));\n        return this._body.setLinearVelocity(v3(0, 0, -this.speed));\n      default:\n        return this._body.setLinearVelocity(v3(0, 0, 0));\n    }\n  }\n}\n"]}